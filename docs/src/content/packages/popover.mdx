---
title: Popover
description: "A component that is initially hidden and revealed upon user interaction either through a click or hover event. Popover can contain lists of actions, links, or additional supplementary content."
package: "@vrembem/popover"
status: "circle"
---

import CodeExample from "../../components/CodeExample.astro";
import DocBlock from "../../components/DocBlock.astro";
import Menu from "../../examples/Menu.astro";

# Popover

A component that is initially hidden and revealed upon user interaction either through a click or hover event. Popover can contain lists of actions, links, or additional supplementary content.

```sh
npm install @vrembem/popover
```

<CodeExample lang="scss">
  ```scss
  @use "@vrembem/popover";
  ```
</CodeExample>

<CodeExample lang="js">
  ```js
  import Popover from "@vrembem/popover";
  const popover = new Popover({ autoMount: true });
  ```
</CodeExample>

## Basic usage

The popover is a simple container component consisting of the `popover` class and an `id`. Popover triggers should have an `aria-controls` attribute set to the ID of the popover element.

<CodeExample>
  <Fragment slot="output">
    <button class="button button_color_primary" aria-controls="popover-1">Popover</button>
    <div class="popover" id="popover-1">
      <Menu name="text" />
    </div>
  </Fragment>
  ```html
  <button aria-controls="unique-id">...</button>
  <div class="popover" id="unique-id">
    ...
  </div>
  ```
</CodeExample>

Add an arrow to a popover using an empty `<div>` or `<span>` with the `popover__arrow` class. Popover arrows are positioned center relative to the reference element.

<CodeExample>
  <Fragment slot="output">
    <button class="button button_color_primary" aria-controls="popover-2">Popover</button>
    <div class="popover" id="popover-2">
      <Menu name="utility" />
      <span class="popover__arrow"></span>
    </div>
  </Fragment>
  ```html
  <button aria-controls="unique-id">...</button>
  <div id="unique-id" class="popover">
    ...
    <span class="popover__arrow"></span>
  </div>
  ```
</CodeExample>

### Event type

There are two event types that can trigger a popover: `click` (the default) and `hover` (hover also applies focus events). You an set your preferred default event type by passing it as an option on instantiation or mount.

<CodeExample lang="js">

  ```js
  // Set on instantiation
  const popover = new Popover({
    eventType: "click"
  });

  // Set on mount
  popover.mount({
    eventType: "hover"
  });
  ```
</CodeExample>

Alternatively, this value can be overridden using the [`--vb-popover-event` CSS variable](#css-variables). This can be done either through your own custom CSS or using the `style` attribute.

<CodeExample>
  <Fragment slot="output">
    <button class="button button_color_primary" aria-describedby="popover-3">Popover</button>
    <div id="popover-3" class="popover" style="--vb-popover-event: hover;">
      <Menu name="utility" />
    </div>
  </Fragment>
  ```html
  <div class="popover" style="--vb-popover-event: hover;">
    ...
  </div>
  ```
</CodeExample>

### Placement

Popover uses the [Popper JS positioning engine](https://popper.js.org/) to determine the optimal place to display a popover. The default preference is `bottom` but can be changed by passing it as an option on instantiation or mount.

<CodeExample lang="js">

  ```js
  // Set on instantiation
  const popover = new Popover({
    placement: "top"
  });

  // Set on mount
  popover.mount({
    placement: "bottom"
  });
  ```
</CodeExample>

Alternatively, this value can be overridden using the [`--vb-popover-placement` CSS variable](#css-variables). This can be done either through your own custom CSS or using the `style` attribute.

<CodeExample>
  <Fragment slot="output">
    <button class="button button_color_primary" aria-describedby="popover-4">Popover</button>
    <div id="popover-4" class="popover" style="--vb-popover-placement: right;">
      <Menu name="text" />
      <span class="popover__arrow"></span>
    </div>
  </Fragment>
  ```html
  <div class="popover" style="--vb-popover-placement: right;">
    ...
  </div>
  ```
</CodeExample>

**Available Variants**

- `auto`
- `auto-start`
- `auto-end`
- `top`
- `top-start`
- `top-end`
- `bottom`
- `bottom-start`
- `bottom-end`
- `left`
- `left-start`
- `left-end`
- `right`
- `right-start`
- `right-end`

### CSS Variables

Popover provides CSS variables on the `:root` element for controlling the event type, preferred placement, offset and overflow-padding. They're consumed by the JavaScript implementation to set options dynamically. The following Sass variable are output as CSS variables:

The advantage to having these values set by a CSS variable is that they can be given new values for specific use cases either in your own stylesheet or by setting the variables in a `style` attribute.

<CodeExample>
  <Fragment slot="output">
    <div class="flex flex-justify-between" style="--vb-popover-offset: 0;">
      <div style="--vb-popover-placement: right;">
        <button class="button button_icon button_color_secondary" aria-describedby="popover-5">
          <span class="arrow-right"></span>
        </button>
        <div id="popover-5" class="popover">
          <Menu name="utility" />
          <span class="popover__arrow"></span>
        </div>
      </div>
      <div style="--vb-popover-placement: left;">
        <button class="button button_icon button_color_secondary" aria-describedby="popover-6">
          <span class="arrow-left"></span>
        </button>
        <div id="popover-6" class="popover">
          <Menu name="utility" />
          <span class="popover__arrow"></span>
        </div>
      </div>
    </div>
  </Fragment>
  ```html
  <div style="--vb-popover-offset: 0;">
    <div style="--vb-popover-placement: right;">
      ...
    </div>
    <div style="--vb-popover-placement: left;">
      ...
    </div>
  </div>
  ```
</CodeExample>

## popover_size_[value]

Adjusts the size of the popover. There are two options relative to the default size, `popover_size_sm` and `popover_size_lg`. Also available is `popover_size_auto` which allows the popover to adjust size based on its content.

<CodeExample>
  <div slot="output" class="level">
    <button class="button" aria-describedby="popover-7">Auto</button>
    <div id="popover-7" class="popover popover_size_auto">
      <Menu name="utility" />
    </div>
    <button class="button" aria-describedby="popover-8">Small</button>
    <div id="popover-8" class="popover popover_size_sm">
      <Menu name="utility" />
    </div>
    <button class="button" aria-describedby="popover-9">Default</button>
    <div id="popover-9" class="popover">
      <Menu name="utility" />
    </div>
    <button class="button" aria-describedby="popover-10">Large</button>
    <div id="popover-10" class="popover popover_size_lg">
      <Menu name="utility" />
    </div>
  </div>
  ```html
  <div id="unique-id" class="popover popover_size_sm">
    ...
  </div>
  ```
</CodeExample>

**Available Variants**

- `popover_size_auto`
- `popover_size_sm`
- `popover_size_lg`

## popover_tooltip

Applies styles to create a popover tooltip. The default placement of a tooltip is `top` and are triggered by the `hover` and `focus` events. Tooltips also require a different set of attributes for accessibility:

- The popover element should have the `role="tooltip"` set.
- The popover trigger should have `aria-describedby` (instead of `aria-controls`) set to the ID of the popover element.

<CodeExample>
  <Fragment slot="output">
    <span class="link" aria-describedby="popover-tooltip">HTML</span>
    <div id="popover-tooltip" class="popover popover_tooltip" role="tooltip">
      Hypertext Markup Language
      <span class="popover__arrow"></span>
    </div>
  </Fragment>
  ```html
  <span aria-describedby="unique-id">HTML</span>
  <div id="unique-id" class="popover popover_tooltip" role="tooltip">
    Hypertext Markup Language
    <span class="popover__arrow"></span>
  </div>
  ```
</CodeExample>

> For more information regarding tooltip accessibility and best practices, please see: [ARIA: tooltip role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tooltip_role).

## Customization

Popovers are primarily customized using CSS variables but can also be modified using Sass variables. All CSS variables are given the Vrembem vendor prefix `"vb-"`. This can be changed by setting the `$prefix-variable` variable via the `core` module.

<DocBlock name="CSS Variables" type="file" src="popover/src/scss/_root.scss">

  ```scss
  @use "./variables" as var;

  $_v: var.$prefix-variable;

  :root {
    @if (var.$event) {
      --#{$_v}popover-event: #{var.$event};
    }
    @if (var.$placement) {
      --#{$_v}popover-placement: #{var.$placement};
    }

    --#{$_v}popover-offset: #{var.$offset};
    --#{$_v}popover-overflow-padding: #{var.$overflow-padding};
    --#{$_v}popover-flip-padding: #{var.$flip-padding};
    --#{$_v}popover-arrow-padding: #{var.$arrow-padding};
  }
  ```
</DocBlock>

<DocBlock name="SCSS Variables" type="file" src="popover/src/scss/_variables.scss">

  ```scss
  @use "@vrembem/core/theme";
  @use "@vrembem/core";

  $prefix-variable: core.$prefix-variable !default;
  $prefix-block: core.$prefix-block !default;
  $prefix-element: core.$prefix-element !default;
  $prefix-modifier: core.$prefix-modifier !default;
  $prefix-modifier-value: core.$prefix-modifier-value !default;

  $event: null !default;
  $placement: null !default;
  $offset: 8 !default;
  $overflow-padding: 10 !default;
  $flip-padding: 10 !default;

  $z-index: 10 !default;
  $width: 16em !default;
  $max-width: calc(100vw - 20px) !default;
  $padding: 0.5em !default;
  $border: null !default;
  $border-radius: core.$border-radius !default;
  $foreground: theme.get("foreground") !default;
  $background: theme.get("background") !default;
  $background-clip: padding-box !default;
  $shadow: core.$shadow-2 !default;
  $font-size: core.$font-size-sm !default;
  $line-height: null !default;

  $arrow-size: 12px !default;
  $arrow-padding: 10 !default;
  $arrow-border: core.$border !default;

  $size-sm-width: 12em !default;
  $size-lg-width: 20em !default;
  ```
</DocBlock>

<DocBlock name="JS Config" type="file" src="popover/src/js/defaults.js">

  ```js
  export default {
    autoMount: false,

    // Selectors
    selectorPopover: ".popover",
    selectorArrow: ".popover__arrow",

    // State classes
    stateActive: "is-active",

    // Feature settings
    eventListeners: true,
    eventType: "click",
    placement: "bottom"
  };
  ```
</DocBlock>

## JavaScript usage

After the popover component has been instantiated the popover object is returned with a robust API to help manage all the popovers on your page.

<DocBlock name="popover.collection" type="property" returns="array" src="core/src/js/Collection.js" line="3">
  Returns an array where all popover objects are stored when registered. Each popover object contains the following properties:

  ```scss
  {
    id: String, // The unique ID of the popover.
    state: String, // The current state of the popover ('closed' or 'opened').
    el: HTMLElement, // The popover HTML element.
    trigger: HTMLElement, // The popover trigger HTML element.
    popper: Object // The popper JS instance.
    config: Object // Stores the popover configuration options.
    open: Function // Method to open this popover.
    close: Function // Method to close this popover.
    deregister: Function // Method to deregister this popover.
  }
  ```
</DocBlock>

<DocBlock name="popover.mount" type="method" returns="Object" src="popover/src/js/index.js" line="23" args={[
  ["options", "Object (optional)", "An options object for passing custom settings."]
]}>
  Mounts the popover instance. During mounting, the following processes are run:

  - Builds the popover collection by running `registerCollection()`
  - Sets up the global event listeners by running `mountEventListeners()`

  <Fragment slot="example">
    ```js
    const popover = new Popover();
    await popover.mount();
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.unmount" type="method" returns="Object" src="popover/src/js/index.js" line="43">
  Destroys and cleans up the popover mount. During cleanup, the following processes are run:

  - Deregister the popover collection by running `deregisterCollection()`
  - Removes global event listeners by running `unmountEventListeners()`

  <Fragment slot="example">
    ```js
    const popover = new Popover();
    await popover.mount();
    // ...
    await popover.unmount();
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.mountEventListeners" type="method" returns="Object" src="popover/src/js/index.js" line="60" args={[
  ["processCollection", "Boolean", "Whether or not to process the event listeners of popover collection. Defaults to true."]
]}>
  Set document and collection entry event listeners.

  <Fragment slot="example">
    ```js
    const popover = new Popover({ eventListeners: false });
    await popover.mount();
    popover.mountEventListeners();
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.unmountEventListeners" type="method" returns="Object" src="popover/src/js/index.js" line="72" args={[
  ["processCollection", "Boolean", "Whether or not to process the event listeners of popover collection. Defaults to true."]
]}>
  Remove document and collection entry event listeners.

  <Fragment slot="example">
    ```js
    const popover = new Popover();
    await popover.mount();
    // ...
    popover.unmountEventListeners();
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.register" type="method" returns="Object" src="popover/src/js/register.js" args={[
  ["query", "String || Object", "A popover ID or an HTML element of either a popover or its trigger."]
]}>
Registers a popover into the collection. This also sets the initial state, creates the popper instance and attaches event listeners. Returns the popover object that got stored in the collection.

  <Fragment slot="example">
    ```js
    const result = await popover.register("popover-id");
    // => Object { id: "popover-id", ... }
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.deregister" type="method" returns="Array" src="popover/src/js/deregister.js" args={[
  ["query", "String || Object", "A popover ID or an HTML element of either a popover or its trigger."]
]}>
Deregister the popover from the collection. This closes the popover if it's opened, cleans up the popper instance, removes event listeners and then removes the entry from the collection. Returns the newly modified collection array.

  <Fragment slot="example">
    ```js
    const result = await popover.deregister("popover-id");
    // => Array [{}, {}, ...]
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.registerCollection" type="method" returns="Array" src="core/src/js/Collection.js" line="26" args={[
  ["items", "Array", "An array of popovers or popover IDs to register."]
]}>
Registers array of popovers to the collection. All popovers in array are run through the `register()` method. Returns the collection array.

  <Fragment slot="example">
    ```js
    const popovers = document.querySelectorAll(".popover");
    const result = await popover.registerCollection(popovers);
    // => Array [{}, {}, ...]
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.deregisterCollection" type="method" returns="Array" src="core/src/js/Collection.js" line="33">
Deregister all popovers in the collections array. All popovers in collection are run through the `deregister()` method. Returns an empty collection array.

  <Fragment slot="example">
    ```js
    const result = await popover.registerCollection();
    // => Array []
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.get" type="method" returns="Object || undefined" src="core/src/js/Collection.js" line="40" args={[
  ["value", "String || Object", "The value to search for within the collection."],
  ["key", "String (optional)", "The property key to search the value against (defaults to 'id')."]
]}>
  Used to retrieve a registered popover object from the collection. Query should match the key type to search by: e.g. to search by popover elements, pass the popover html node with a key of `'el'`. Defaults to `'id'`.

  Returns the first element in the collection that matches the provided query and key. Otherwise, undefined is returned.

  <Fragment slot="example">
    ```js
    const entry = popover.get("popover-id");
    // => Object { id: "popover-id", ... }
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.open" type="method" returns="Object" src="popover/src/js/open.js" args={[
  ["id", "String", "The ID of the popover to open."],
  ["transition", "Boolean (optional)", "Whether or not to animate the transition."],
  ["focus", "Boolean (optional)", "Whether or not to handle focus management."]
]}>
  Opens a popover using the provided ID. Returns the popover object that was opened.

  <Fragment slot="example">
    ```js
    const entry = await popover.open("popover-id");
    // => Object { state: 'opened', ... }
    ```
  </Fragment>
</DocBlock>

<DocBlock name="popover.close" type="method" returns="Object" src="popover/src/js/close.js" args={[
  ["id", "String", "The ID of the popover to close."],
  ["transition", "Boolean (optional)", "Whether or not to animate the transition."],
  ["focus", "Boolean (optional)", "Whether or not to handle focus management."]
]}>
  Close a popover using the provided ID. Can be called without an ID to close all open popovers. Returns the popover object or array of popover objects that were closed.

  <Fragment slot="example">
    ```js
    const entry = await popover.close();
    // => Array [{}, {}, ...]
    ```
  </Fragment>
</DocBlock>
