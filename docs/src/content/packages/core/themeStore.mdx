---
title: themeStore
description: "A JavaScript utility that manages theme state for your application or website."
parent: core
group: theme-state
slug: core/themeStore
---

<CodeExample lang="js">
  ```js
  import { themeStore } from "@vrembem/core";
  ```
</CodeExample>

## Basic Usage

Once you've defined set of themes for your project, you'll want to allow users to select their preferred theme and persist that choice. This can be accomplished using the `themeStore` module which stores the selected theme using local storage and a simple API to manage the state.

The first step is to create a UI for users to select a theme. This can be anything from a dropdown to a simple set of buttons. To keep things simple, we'll use a set of buttons.

<CodeExample lang="html">
  ```html
  <button type="button" data-set-theme="root">Auto</button>
  <button type="button" data-set-theme="light">Light</button>
  <button type="button" data-set-theme="dark">Dark</button>
  ```
</CodeExample>

Now, in our JavaScript, we initialize `themeStore` and pass a callback function for the `onInit` lifecycle hook. This will add event listeners to all theme selection buttons.

<CodeExample lang="js">
  ```js
  // Import the themeStore module
  import { themeStore } from "@vrembem/core";

  // Get all the theme set button elements
  const buttons = document.querySelectorAll("[data-set-theme]");

  // Setup theme switching functionality
  const myTheme = themeStore({
    onInit() {
      // Loop through the theme set buttons
      buttons.forEach((btn) => {
        // Add click event listener for changing the current theme
        btn.addEventListener(("click"), () => {
          this.theme = btn.getAttribute("data-set-theme");
        });
      });
    }
  });
  ```
</CodeExample>

<div class="notice notice_color_secondary font-size-base">
  A lifecycle hook is a callback function that runs at a specific event, such as initialization (`onInit`) or when the theme changes (`onChange`).
</div>

We can further improve this UI by adding a function to toggle the state of our buttons, and running it both on initialization and whenever the theme changes, using the `onChange` lifecycle hook.

<CodeExample lang="js">
  ```js
  // Import the themeStore module
  import { themeStore } from "@vrembem/core";

  // Get all the theme set button elements
  const buttons = document.querySelectorAll("[data-set-theme]");

  // Setup theme switching functionality
  const myTheme = themeStore({
    onInit() {
      // Loop through the theme set buttons
      buttons.forEach((btn) => {
        // Toggle the state of our button set
        toggleState.call(this, btn);
        // Add click event listener for changing the current theme
        btn.addEventListener(("click"), () => {
          this.theme = btn.getAttribute("data-set-theme");
        });
      });
    },
    onChange() {
      buttons.forEach((btn) => {
        // Toggle the state of our button set
        toggleState.call(this, btn);
      });
    }
  });

  // Function to toggle the state class for a theme set button
  function toggleState(btn) {
    btn.getAttribute("data-set-theme") === this.theme 
      ? btn.classList.add("is-active")
      : btn.classList.remove("is-active");
  }
  ```
</CodeExample>

We use [`.call(this, btn)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call) on `toggleState` inside our callback functions so the function can access the current theme from the themeStore instance by providing `this` context.

The last aspect to handle when persisting a user's preferred theme is avoiding the flash of pre-themed content. This can be done by adding a render-blocking script in the `<head>` element of your HTML before other script and style tags.

<CodeExample lang="html">
  ```html
  <script>
    const local = localStorage.getItem("VB:Profile");
    const store = local ? JSON.parse(local) : {};
    const class = `vb-theme-${store.theme || "root"}`;
    document.documentElement.classList.add(class);
  </script>
  ```
</CodeExample>

This script gets the stored value that `themeStore` sets in local storage and adds the appropriate theme class to the root document element.

## Reference

The following is a reference of the `themeStore` API which is designed to be both simple and fit most use cases of theme management.

### Arguments

<CodeExample lang="js">
  ```js
  interface ThemeStoreOptions {
    prefix?: string;
    themes?: string[];
    storeKey?: string;
    onInit?: () => void;
    onChange?: () => void;
  }
  ```
</CodeExample>

### API

<CodeExample lang="js">
  ```js
  interface ThemeStoreApi {
    settings: {
      prefix: string;
      themes: string[];
      storeKey: string;
    };
    add: (value: string) => void;
    remove: (value: string) => void;
    callback: (name: keyof ThemeStoreCallbacks) => void;
    readonly class: string;
    readonly classes: string[];
    readonly themes: string[];
    theme: string;
  }
  ```
</CodeExample>

### themeStore.settings

### themeStore.theme

### themeStore.class

### themeStore.themes[]

### themeStore.classes[]

### themeStore.add()

### themeStore.remove()

### themeStore.callback()
