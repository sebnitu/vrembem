---
import Icon from './Icon.vue';

interface Props {
  name?: string;
  file?: string;
}

const { name, file } = Astro.props;
---

<div class="file-reference is-closed">
  <div class="file-reference__content">
    <div class="file-reference__toolbar">
      <div class="media media_gap-x_sm flex-align-center">
        <div class="media__obj">
          <button type="button" class="file-reference__toggle button button_icon button_size_sm">
            <Icon name="chevron-right" iconClass="icon_size_sm" />
          </button>
        </div>
        <div class="media__body flex flex-gap-x flex-wrap">
          <strong class="flex-grow-1">{name}</strong>
          <code>
            <a class="link" target="_blank" href={`https://github.com/sebnitu/vrembem/blob/next/packages/${file}`}>
              {file}
            </a>
          </code>
        </div>
      </div>
    </div>
    <slot />
  </div>
</div>

<script>
  // Find our component DOM on the page.
  const buttons = document.querySelectorAll('.file-reference__toggle');

  // Add event listeners to fire confetti when a button is clicked.
  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      const root = button.closest('.file-reference');
      root.classList.toggle('is-closed');
      root.classList.toggle('is-opened');
    });
  });
</script>
