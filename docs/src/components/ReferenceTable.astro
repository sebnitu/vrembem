---
import Icon from "./Icon.astro";
import CodeBlock from "./CodeBlock.astro";

interface Props {
  data: {};
}

const { data } = Astro.props;

// TODO:
// - Capture the hash click and scroll appropriatly
// - Add the ability to click cell to copy its contents
// - Implement search filter of table
// - Allow clicking a CSS value to link to prop reference
// - Add active class to the "selected" table row
---

<div class="reference-table">
  <table class="table">
    <tr>
      <th>Var</th>
      <th>Value</th>
    </tr>

    {
      Object.entries(data).map(([key, value]) => (
        <tr id={key}>
          <td>
            <a
              class="table-anchor"
              href={`#${key}`}
              aria-label={`Permalink to '${key}' CSS custom property`}
            >
              <Icon name="hash" classes="icon_size_sm" />
            </a>
            <CodeBlock>
              <code>{key}</code>
            </CodeBlock>
          </td>
          <td>
            {typeof value === "string" ? (
              <CodeBlock>
                <code>{value}</code>
              </CodeBlock>
            ) : (
              <div class="scroll-box">
                {Object.entries(value).map(([theme, v]) => (
                  <div class="flex justify-content-between align-items-center">
                    <span>
                      <CodeBlock>
                        <code>{v}</code>
                      </CodeBlock>
                    </span>
                    <span>
                      <span class="badge">{theme}</span>
                    </span>
                  </div>
                ))}
              </div>
            )}
          </td>
        </tr>
      ))
    }
  </table>
</div>
