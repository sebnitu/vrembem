@use "@vrembem/core";
@use "./variables" as var;

$_v: var.$prefix-variable;
$_b: var.$prefix-block;
$_offset: calc(calc(core.vars($_v, "offset", var.$offset) + 1) * 1px);

.#{$_b}popover {
  position: absolute;
  z-index: core.vars($_v, "z-index", var.$z-index);
  top: 100%;
  left: 0;
  display: none;
  width: core.vars($_v, "width", var.$width);
  max-width: core.vars($_v, "max-width", var.$max-width);
  margin: calc(core.vars($_v, "offset", var.$offset) * 1px) 0 0;
  padding: core.vars($_v, "padding", var.$padding);
  border: core.vars($_v, "border", var.$border);
  border-radius: core.vars($_v, "border-radius", var.$border-radius);
  background: core.vars($_v, "background", var.$background);
  background-clip: core.vars($_v, "background-clip", var.$background-clip);
  box-shadow: core.vars($_v, "box-shadow", var.$box-shadow);
  color: core.vars($_v, "color", var.$color);
  font-size: core.vars($_v, "font-size", var.$font-size);
  line-height: core.vars($_v, "line-height", var.$line-height);

  &::before {
    content: "";
    position: absolute;
    top: auto;
    right: 0;
    bottom: 100%;
    left: 0;
    width: 100%;
    height: $_offset;
  }

  &.is-active {
    z-index: calc(core.vars($_v, "z-index", var.$z-index) + 1);
    display: block;
  }

  &:hover,
  &:focus,
  &:focus-within {
    z-index: calc(core.vars($_v, "z-index", var.$z-index) + 2);
  }
}

.#{$_b}popover[data-popper-placement^="top"] {
  margin: 0 0 calc(core.vars($_v, "offset", var.$offset) * 1px) 0;

  &::before {
    top: 100%;
    right: 0;
    bottom: auto;
    left: 0;
    width: 100%;
    height: $_offset;
  }
}

.#{$_b}popover[data-popper-placement^="bottom"] {
  margin: calc(core.vars($_v, "offset", var.$offset) * 1px) 0 0 0;

  &::before {
    top: auto;
    right: 0;
    bottom: 100%;
    left: 0;
    width: 100%;
    height: $_offset;
  }
}

.#{$_b}popover[data-popper-placement^="left"] {
  margin: 0 calc(core.vars($_v, "offset", var.$offset) * 1px) 0 0;

  &::before {
    top: 0;
    right: auto;
    bottom: 0;
    left: 100%;
    width: $_offset;
    height: 100%;
  }
}

.#{$_b}popover[data-popper-placement^="right"] {
  margin: 0 0 0 calc(core.vars($_v, "offset", var.$offset) * 1px);

  &::before {
    top: 0;
    right: 100%;
    bottom: 0;
    left: auto;
    width: $_offset;
    height: 100%;
  }
}
