@use "../modules/css";
@use "../variables/border" as *;
@use "./size" as *;

$_output-spin-animation: true;

@include css.set("loading", (
  "size": 1em,
  "border": 2px solid,
  "color": currentcolor,
  "duration": 0.6s
));

/// TODO: Add documentation.
/// TODO: Add position strategy as an option.
@mixin loading-spinner() {
  @include size(css.get("loading", "size"));
  content: "";
  position: absolute;
  top: calc(50% - calc(css.get("loading", "size") * 0.5));
  left: calc(50% - calc(css.get("loading", "size") * 0.5));
  display: inline-flex;
  animation: spin css.get("loading", "duration") infinite linear;
  border: css.get("loading", "border");
  border-radius: $border-radius-circle;
  border-color: css.get("loading", "color") css.get("loading", "color") transparent transparent;

  // Only output the spin animation once.
  @if ($_output-spin-animation) {
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
    
      to {
        transform: rotate(360deg);
      }
    }
    $_output-spin-animation: false !global;
  }
}
