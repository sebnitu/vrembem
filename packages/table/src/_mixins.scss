@use "sass:list";
@use "@vrembem/core";
@use "@vrembem/core/css";
@use "./variables" as var;

@mixin table-responsive-styles() {
  thead,
  tbody,
  tr,
  th,
  td {
    display: block;
  }

  thead,
  [rowspan] {
    position: absolute;
    top: -9999px;
    left: -9999px;
  }

  [#{var.$mobile-label-attr}] {
    position: relative;
    padding-left: calc(css.get("table", "mobile-label-width") + css.get("table", "mobile-label-spacing"));
    white-space: normal;

    &::before {
      content: attr(#{var.$mobile-label-attr});
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: css.get("table", "mobile-label-width");
      padding: css.get("table", "padding");
      overflow: hidden;
      background-color: css.get("table", "mobile-label-background");
      color: css.get("table", "mobile-label-foreground");
      font-weight: css.get("font-weight-bold");
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }

  &#{core.bem("table", null, "style", "bordered")} {
    border: css.get("table", "border");

    td {
      border: none;
    }

    td + td,
    th + td {
      border-top: css.get("table", "border-alt");
    }

    [#{var.$mobile-label-attr}]::before {
      border-right: css.get("table", "border");
    }

    tr + tr {
      border-top: css.get("table", "border");
    }
  }
}
