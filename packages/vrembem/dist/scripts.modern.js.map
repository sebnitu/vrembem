{"version":3,"file":"scripts.modern.js","sources":["../../core/src/js/accessibility.js","../../core/src/js/addClass.js","../../core/src/js/camelCase.js","../../core/src/js/focus.js","../../core/src/js/getElement.js","../../core/src/js/hasClass.js","../../core/src/js/hyphenCase.js","../../core/src/js/moveElement.js","../../core/src/js/removeClass.js","../../core/src/js/toggleClass.js","../../core/src/js/transition.js","../../core/src/js/variables.js","../../checkbox/index.js","../../drawer/src/js/defaults.js","../../drawer/src/js/switchTo.js","../../drawer/src/js/breakpoint.js","../../drawer/src/js/handlers.js","../../drawer/src/js/state.js","../../drawer/index.js","../../modal/src/js/defaults.js","../../modal/src/js/handlers.js","../../modal/src/js/initialState.js","../../modal/index.js"],"sourcesContent":["export const setInert = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\n\nexport const setOverflowHidden = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\n\nexport const setTabindex = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n","/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\n\nexport const addClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.add(...cl);\n  });\n};\n","/**\n * Takes a hyphen cased string and converts it to camel case\n * ---\n * @param {String } str - the string to convert to camel case\n * @returns {Boolean} - returns a camel cased string\n */\n\nexport const camelCase = (str) => {\n  return str.replace(/-([a-z])/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\n","export const focusTarget = (target, settings) => {\n  const innerFocus = target.querySelector(\n    `[data-${settings.dataFocus}]`\n  );\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    const innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\n\nexport const focusTrigger = (obj = null) => {\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\n\nexport class FocusTrap {\n  constructor() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  }\n\n  destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  }\n\n  handlerFocusTrap(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (!isTab) return;\n    if (event.shiftKey) {\n      if (\n        document.activeElement === this.focusableFirst ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (\n        document.activeElement === this.focusableLast ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  handlerFocusLock(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (isTab) event.preventDefault();\n  }\n\n  getFocusable() {\n    const focusable = [];\n    const initFocus = document.activeElement;\n    const initScrollTop = (this.inner) ? this.inner.scrollTop : 0;\n\n    this.target\n      .querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type=\"text\"]:not([disabled]),input[type=\"radio\"]:not([disabled]),input[type=\"checkbox\"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex=\"-1\"])')\n      .forEach((el) => {\n        el.focus();\n        if (el === document.activeElement) {\n          focusable.push(el);\n        }\n      });\n\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  }\n}\n","/**\n * Get an element(s) from a selector or return value if not a string\n * ---\n * @param {String} selector - Selector to query\n * @param {Boolean} single - Whether to return a single or all matches\n */\n\nexport const getElement = function (selector, single = 0) {\n  if (typeof selector != 'string') return selector;\n  return (single) ?\n    document.querySelector(selector) :\n    document.querySelectorAll(selector);\n};\n","/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\n\nexport const hasClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el = [].slice.call(el);\n\n  return cl.some((cl) => {\n    return el.some((el) => {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n","/**\n * Takes a camel cased string and converts it to hyphen case\n * ---\n * @param {String } str - the string to convert to hyphen case\n * @returns {Boolean} - returns a hyphen cased string\n */\n\nexport const hyphenCase = (str) => {\n  return str.replace(/([a-z][A-Z])/g, function (g) {\n    return g[0] + '-' + g[1].toLowerCase();\n  });\n};\n","import { getElement } from './getElement';\n\n/**\n * Moves element(s) in the DOM based on a reference and move type\n * ---\n * @param {String} target - The element(s) to move\n * @param {String} type - Move type can be 'after', 'before', 'append' or 'prepend'\n * @param {String} reference - The reference element the move is relative to\n */\n\nexport function moveElement(target, type, reference = false) {\n  if (reference) {\n    const els = getElement(target);\n    if (!els.length) throw new Error(`Move target element \"${target}\" not found!`);\n    const ref = getElement(reference, 1);\n    if (!ref) throw new Error(`Move reference element \"${reference}\" not found!`);\n    els.forEach((el) => {\n      switch (type) {\n        case 'after':\n          ref.after(el);\n          return { ref, el, type };\n        case 'before':\n          ref.before(el);\n          return { ref, el, type };\n        case 'append':\n          ref.append(el);\n          return { ref, el, type };\n        case 'prepend':\n          ref.prepend(el);\n          return { ref, el, type };\n        default:\n          throw new Error(`Move type \"${type}\" does not exist!`);\n      }\n    });\n  }\n}\n","/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\n\nexport const removeClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.remove(...cl);\n  });\n};\n","/**\n * Toggle a class or classes on an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to toggle class(es) on\n * @param {String || Array} cl - Class(es) to toggle\n */\n\nexport const toggleClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    cl.forEach((cl) => {\n      el.classList.toggle(cl);\n    });\n  });\n};\n","export const openTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\n\nexport const closeTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n","export const breakpoints = {\n  xs: '480px',\n  sm: '620px',\n  md: '760px',\n  lg: '990px',\n  xl: '1380px'\n};\n","export default class Checkbox {\n  constructor(options) {\n    this.defaults = {\n      autoInit: false,\n      stateAttr: 'aria-checked',\n      stateValue: 'mixed'\n    };\n    this.settings = { ...this.defaults, ...options };\n    this.__handlerClick = this.handlerClick.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    const selector = `[${this.settings.stateAttr}=\"${this.settings.stateValue}\"]`;\n    const mixed = document.querySelectorAll(selector);\n    this.setIndeterminate(mixed);\n    document.addEventListener('click', this.__handlerClick, false);\n  }\n\n  destroy() {\n    document.removeEventListener('click', this.__handlerClick, false);\n  }\n\n  handlerClick(event) {\n    const selector = `[${this.settings.stateAttr}=\"${this.settings.stateValue}\"]`;\n    const el = event.target.closest(selector);\n    if (!el) return;\n    this.removeAriaState(el);\n    this.setIndeterminate(el);\n  }\n\n  setAriaState(el, value = this.settings.stateValue) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      el.setAttribute(this.settings.stateAttr, value);\n    });\n  }\n\n  removeAriaState(el) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      el.removeAttribute(this.settings.stateAttr);\n    });\n  }\n\n  setIndeterminate(el) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      if (el.hasAttribute(this.settings.stateAttr)) {\n        el.indeterminate = true;\n      } else {\n        el.indeterminate = false;\n      }\n    });\n  }\n}\n","import { breakpoints } from '@vrembem/core/index';\n\nexport default {\n  autoInit: false,\n\n  // Data attributes\n  dataDrawer: 'drawer',\n  dataDialog: 'drawer-dialog',\n  dataToggle: 'drawer-toggle',\n  dataOpen: 'drawer-open',\n  dataClose: 'drawer-close',\n  dataBreakpoint: 'drawer-breakpoint',\n  dataFocus: 'drawer-focus',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Classes\n  classModal: 'drawer_modal',\n\n  // Selectors\n  selectorInert: null,\n  selectorOverflow: null,\n\n  // Feature toggles\n  breakpoints: breakpoints,\n  customEventPrefix: 'drawer:',\n  stateSave: true,\n  stateKey: 'DrawerState',\n  setTabindex: true,\n  transition: true\n};\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\n\nexport async function switchToModal(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (hasClass(drawer, obj.settings.classModal)) return;\n\n  // Enable modal state\n  addClass(drawer, obj.settings.classModal);\n  addClass(drawer, obj.settings.stateClosed);\n  removeClass(drawer, obj.settings.stateOpened);\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toModal', {\n    bubbles: true\n  }));\n  return drawer;\n}\n\nexport async function switchToDefault(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (!hasClass(drawer, obj.settings.classModal)) return;\n\n  // Tear down modal state\n  setInert(false, obj.settings.selectorInert);\n  setOverflowHidden(false, obj.settings.selectorOverflow);\n  removeClass(drawer, obj.settings.classModal);\n  obj.focusTrap.destroy();\n\n  // Restore drawers saved state\n  drawerKey = drawer.getAttribute(`data-${obj.settings.dataDrawer}`);\n  const drawerState = obj.state[drawerKey];\n  if (drawerState == obj.settings.stateOpened) {\n    addClass(drawer, obj.settings.stateOpened);\n    removeClass(drawer, obj.settings.stateClosed);\n  }\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toDefault', {\n    bubbles: true\n  }));\n  return drawer;\n}\n","import { switchToDefault, switchToModal } from './switchTo';\n\nexport class Breakpoint {\n  constructor(parent) {\n    this.mediaQueryLists = [];\n    this.parent = parent;\n    this.__check = this.check.bind(this);\n  }\n\n  init() {\n    const drawers = document.querySelectorAll(`[data-${this.parent.settings.dataBreakpoint}]`);\n    drawers.forEach((drawer) => {\n      const id = drawer.getAttribute(`data-${this.parent.settings.dataDrawer}`);\n      const key = drawer.getAttribute(`data-${this.parent.settings.dataBreakpoint}`);\n      const bp = this.parent.settings.breakpoints[key] ? this.parent.settings.breakpoints[key] : key;\n      const mql = window.matchMedia('(min-width:' + bp + ')');\n      this.match(mql, drawer);\n      mql.addListener(this.__check);\n      this.mediaQueryLists.push({\n        'mql': mql,\n        'drawer': id\n      });\n    });\n  }\n\n  destroy() {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        item.mql.removeListener(this.__check);\n      });\n    }\n    this.mediaQueryLists = null;\n  }\n\n  check(event = null) {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        // If an event is passed, filter out drawers that don't match the query\n        // If event is null, run all drawers through match\n        let filter = (event) ? event.media == item.mql.media : true;\n        if (!filter) return;\n        const drawer = document.querySelector(\n          `[data-${this.parent.settings.dataDrawer}=\"${item.drawer}\"]`\n        );\n        if (drawer) this.match(item.mql, drawer);\n      });\n      document.dispatchEvent(new CustomEvent(this.parent.settings.customEventPrefix + 'breakpoint', {\n        bubbles: true\n      }));\n    }\n  }\n\n  match(mql, drawer) {\n    if (mql.matches) {\n      switchToDefault(drawer, this.parent);\n    } else {\n      switchToModal(drawer, this.parent);\n    }\n  }\n}\n","export function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Toggle data trigger\n  let trigger = event.target.closest(`[data-${this.settings.dataToggle}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataToggle}`);\n    this.memory.trigger = trigger;\n    this.toggle(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Open data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    this.memory.trigger = trigger;\n    this.open(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Close data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataClose}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataClose}`);\n    if (selector) {\n      this.memory.trigger = trigger;\n      this.close(selector);\n    } else {\n      const target = event.target.closest(`[data-${this.settings.dataDrawer}]`);\n      if (target) this.close(target);\n    }\n    event.preventDefault();\n    return;\n  }\n\n  // Screen modal trigger\n  if (event.target.hasAttribute(`data-${this.settings.dataDrawer}`)) {\n    this.close(event.target);\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.keyCode == 27) {\n    const target = document.querySelector(\n      `.${this.settings.classModal}.${this.settings.stateOpened}`\n    );\n    if (target) {\n      this.close(target);\n    }\n  }\n}\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\n\nexport function stateSet(settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // If there isn't an existing state to set\n  if (!localStorage.getItem(settings.stateKey))\n    return stateSave(null, settings);\n\n  // Set the existing state\n  const state = JSON.parse(localStorage.getItem(settings.stateKey));\n  Object.keys(state).forEach((key) => {\n    const item = document.querySelector(\n      `[data-${settings.dataDrawer}=\"${key}\"]`\n    );\n    if (!item) return;\n    (state[key] == settings.stateOpened) ?\n      addClass(item, settings.stateOpened) :\n      removeClass(item, settings.stateOpened);\n  });\n  return state;\n}\n\nexport function stateSave(target, settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // Get the currently saved object if it exists\n  const state = (localStorage.getItem(settings.stateKey)) ?\n    JSON.parse(localStorage.getItem(settings.stateKey)) : {};\n\n  // Are we saving a single target or the entire suite?\n  const drawers = (target) ? [target] :\n    document.querySelectorAll(`[data-${settings.dataDrawer}]`);\n\n  // Loop through drawers and save their states\n  drawers.forEach((el) => {\n    if (hasClass(el, settings.classModal)) return;\n    const drawerKey = el.getAttribute(`data-${settings.dataDrawer}`);\n    state[drawerKey] = (hasClass(el, settings.stateOpened)) ?\n      settings.stateOpened : settings.stateClosed;\n  });\n\n  // Save to localStorage and return the state\n  localStorage.setItem(settings.stateKey, JSON.stringify(state));\n  return state;\n}\n\nexport function stateClear(settings) {\n  if (localStorage.getItem(settings.stateKey)) {\n    localStorage.removeItem(settings.stateKey);\n  }\n  return {};\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { Breakpoint } from './src/js/breakpoint';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { stateClear, stateSave, stateSet } from './src/js/state';\nimport { switchToDefault, switchToModal } from './src/js/switchTo';\n\nexport default class Drawer {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.state = {};\n    this.focusTrap = new FocusTrap();\n    this.breakpoint = new Breakpoint(this);\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.stateSet();\n    this.setTabindex(this.settings.setTabindex);\n    this.breakpoint.init();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.breakpoint.destroy();\n    this.memory = {};\n    this.state = {};\n    localStorage.removeItem(this.settings.stateKey);\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getDrawer(drawerKey) {\n    if (typeof drawerKey !== 'string') return drawerKey;\n    return document.querySelector(\n      `[data-${this.settings.dataDrawer}=\"${drawerKey}\"]`\n    );\n  }\n\n  drawerNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find drawer with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataDrawer}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  /**\n   * Save state functionality\n   */\n\n  stateSet() {\n    this.state = stateSet(this.settings);\n  }\n\n  stateSave(target = null) {\n    this.state = stateSave(target, this.settings);\n  }\n\n  stateClear() {\n    this.state = stateClear(this.settings);\n  }\n\n  /**\n   * SwitchTo functionality\n   */\n\n  switchToDefault(drawerKey) {\n    return switchToDefault(drawerKey, this);\n  }\n\n  switchToModal(drawerKey) {\n    return switchToModal(drawerKey, this);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async toggle(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    const isOpen = hasClass(drawer, this.settings.stateOpened);\n    if (!isOpen) {\n      return this.open(drawer);\n    } else {\n      return this.close(drawer);\n    }\n  }\n\n  async open(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (!hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      const isModal = hasClass(drawer, this.settings.classModal);\n      if (isModal) {\n        setOverflowHidden(true, this.settings.selectorOverflow);\n      }\n      await openTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      if (isModal) {\n        this.focusTrap.init(drawer);\n        setInert(true, this.settings.selectorInert);\n      }\n      focusTarget(drawer, this.settings);\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      focusTarget(drawer, this.settings);\n      return drawer;\n    }\n  }\n\n  async close(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      if (hasClass(drawer, this.settings.classModal)) {\n        setInert(false, this.settings.selectorInert);\n        setOverflowHidden(false, this.settings.selectorOverflow);\n      }\n      await closeTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      focusTrigger(this);\n      this.focusTrap.destroy();\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      return drawer;\n    }\n  }\n}\n","export default {\n  autoInit: false,\n\n  // Data attributes\n  dataModal: 'modal',\n  dataDialog: 'modal-dialog',\n  dataOpen: 'modal-open',\n  dataClose: 'modal-close',\n  dataFocus: 'modal-focus',\n  dataRequired: 'modal-required',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Selector\n  selectorInert: null,\n  selectorOverflow: 'body',\n\n  // Feature toggles\n  customEventPrefix: 'modal:',\n  moveModals: {\n    ref: null,\n    type: null\n  },\n  setTabindex: true,\n  transition: true\n};\n","export async function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Trigger click\n  const trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    event.preventDefault();\n    const modalKey = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    const fromModal = event.target.closest(`[data-${this.settings.dataModal}]`);\n    if (!fromModal) this.memory.trigger = trigger;\n    await this.close(!fromModal);\n    this.open(modalKey);\n    return;\n  }\n\n  // Close click\n  if (event.target.closest(`[data-${this.settings.dataClose}]`)) {\n    event.preventDefault();\n    this.close();\n    return;\n  }\n\n  // Root click\n  if (\n    event.target.hasAttribute(`data-${this.settings.dataModal}`) &&\n    !event.target.hasAttribute(`data-${this.settings.dataRequired}`)\n  ) {\n    this.close();\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.key === 'Escape' || event.keyCode === 27) {\n    const target = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (target && !target.hasAttribute(`data-${this.settings.dataRequired}`)) {\n      this.close();\n    }\n  }\n}\n","import { addClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\nimport { focusTrigger } from '@vrembem/core/index';\n\nexport function setInitialState(obj) {\n  const modals = document.querySelectorAll(`[data-${obj.settings.dataModal}]`);\n  modals.forEach((el) => {\n    if (el.classList.contains(obj.settings.stateOpened)) {\n      setInert(false, obj.settings.selectorInert);\n      setOverflowHidden(false, obj.settings.selectorOverflow);\n      focusTrigger(obj);\n      obj.focusTrap.destroy();\n    }\n    removeClass(el,\n      obj.settings.stateOpened,\n      obj.settings.stateOpening,\n      obj.settings.stateClosing\n    );\n    addClass(el, obj.settings.stateClosed);\n  });\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\nimport { moveElement } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { setInitialState } from './src/js/initialState';\n\nexport default class Modal {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.focusTrap = new FocusTrap();\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.moveModals();\n    this.setTabindex(this.settings.setTabindex);\n    this.setInitialState();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.memory = {};\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getModal(modalKey) {\n    if (typeof modalKey !== 'string') return modalKey;\n    return document.querySelector(\n      `[data-${this.settings.dataModal}=\"${modalKey}\"]`\n    );\n  }\n\n  modalNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find modal with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataModal}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  setInitialState() {\n    setInitialState(this);\n  }\n\n  moveModals(type = this.settings.moveModals.type, ref = this.settings.moveModals.ref) {\n    const modals = document.querySelectorAll(`[data-${this.settings.dataModal}]`);\n    if (modals.length) moveElement(modals, type, ref);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async open(modalKey) {\n    const modal = this.getModal(modalKey);\n    if (!modal) return this.modalNotFound(modalKey);\n    if (hasClass(modal, this.settings.stateClosed)) {\n      this.working = true;\n      setOverflowHidden(true, this.settings.selectorOverflow);\n      await openTransition(modal, this.settings);\n      this.focusTrap.init(modal);\n      focusTarget(modal, this.settings);\n      setInert(true, this.settings.selectorInert);\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n\n  async close(returnFocus = true) {\n    const modal = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (modal) {\n      this.working = true;\n      setInert(false, this.settings.selectorInert);\n      setOverflowHidden(false, this.settings.selectorOverflow);\n      await closeTransition(modal, this.settings);\n      if (returnFocus) focusTrigger(this);\n      this.focusTrap.destroy();\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n}\n"],"names":["setInert","state","selector","els","document","querySelectorAll","forEach","el","inert","setAttribute","removeAttribute","setOverflowHidden","style","overflow","removeProperty","setTabindex","addClass","cl","classList","add","camelCase","str","replace","g","toUpperCase","focusTarget","target","settings","innerFocus","querySelector","dataFocus","focus","innerElement","focusTrigger","obj","memory","trigger","FocusTrap","constructor","__handlerFocusTrap","handlerFocusTrap","bind","init","inner","focusable","getFocusable","length","focusableFirst","focusableLast","addEventListener","handlerFocusLock","destroy","removeEventListener","event","isTab","key","keyCode","shiftKey","activeElement","preventDefault","initFocus","initScrollTop","scrollTop","push","getElement","single","hasClass","slice","call","some","contains","hyphenCase","toLowerCase","moveElement","type","reference","Error","ref","after","before","append","prepend","removeClass","remove","toggleClass","toggle","openTransition","Promise","resolve","transition","stateClosed","stateOpening","_f","stateOpened","closeTransition","stateClosing","breakpoints","xs","sm","md","lg","xl","Checkbox","options","defaults","autoInit","stateAttr","stateValue","__handlerClick","handlerClick","mixed","setIndeterminate","closest","removeAriaState","setAriaState","value","hasAttribute","indeterminate","dataDrawer","dataDialog","dataToggle","dataOpen","dataClose","dataBreakpoint","classModal","selectorInert","selectorOverflow","customEventPrefix","stateSave","stateKey","switchToModal","drawerKey","drawer","getDrawer","drawerNotFound","dispatchEvent","CustomEvent","bubbles","switchToDefault","focusTrap","getAttribute","drawerState","Breakpoint","parent","mediaQueryLists","__check","check","drawers","id","bp","mql","window","matchMedia","match","addListener","item","removeListener","filter","media","matches","working","open","close","handlerKeyup","stateSet","stateClear","localStorage","getItem","JSON","parse","Object","keys","setItem","stringify","removeItem","Drawer","breakpoint","__handlerKeyup","reject","selectorTabindex","isOpen","isModal","dataModal","dataRequired","moveModals","modalKey","fromModal","setInitialState","modals","Modal","getModal","modalNotFound","modal","returnFocus"],"mappings":"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"}