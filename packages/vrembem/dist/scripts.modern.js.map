{"version":3,"file":"scripts.modern.js","sources":["../../core/src/js/accessibility.js","../../core/src/js/addClass.js","../../core/src/js/focus.js","../../core/src/js/getElement.js","../../core/src/js/hasClass.js","../../core/src/js/moveElement.js","../../core/src/js/removeClass.js","../../core/src/js/transition.js","../../core/src/js/variables.js","../../core/src/js/camelCase.js","../../core/src/js/hyphenCase.js","../../core/src/js/toggleClass.js","../../checkbox/index.js","../../drawer/src/js/defaults.js","../../drawer/src/js/switchTo.js","../../drawer/src/js/breakpoint.js","../../drawer/src/js/handlers.js","../../drawer/src/js/state.js","../../drawer/index.js","../../modal/src/js/defaults.js","../../modal/src/js/handlers.js","../../modal/index.js","../../modal/src/js/initialState.js"],"sourcesContent":["export const setInert = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\n\nexport const setOverflowHidden = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\n\nexport const setTabindex = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n","/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\n\nexport const addClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.add(...cl);\n  });\n};\n","export const focusTarget = (target, settings) => {\n  const innerFocus = target.querySelector(\n    `[data-${settings.dataFocus}]`\n  );\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    const innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\n\nexport const focusTrigger = (obj = null) => {\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\n\nexport class FocusTrap {\n  constructor() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  }\n\n  destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  }\n\n  handlerFocusTrap(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (!isTab) return;\n    if (event.shiftKey) {\n      if (\n        document.activeElement === this.focusableFirst ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (\n        document.activeElement === this.focusableLast ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  handlerFocusLock(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (isTab) event.preventDefault();\n  }\n\n  getFocusable() {\n    const focusable = [];\n    const initFocus = document.activeElement;\n    const initScrollTop = (this.inner) ? this.inner.scrollTop : 0;\n\n    this.target\n      .querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type=\"text\"]:not([disabled]),input[type=\"radio\"]:not([disabled]),input[type=\"checkbox\"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex=\"-1\"])')\n      .forEach((el) => {\n        el.focus();\n        if (el === document.activeElement) {\n          focusable.push(el);\n        }\n      });\n\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  }\n}\n","/**\n * Get an element(s) from a selector or return value if not a string\n * ---\n * @param {String} selector - Selector to query\n * @param {Boolean} single - Whether to return a single or all matches\n */\n\nexport const getElement = function (selector, single = 0) {\n  if (typeof selector != 'string') return selector;\n  return (single) ?\n    document.querySelector(selector) :\n    document.querySelectorAll(selector);\n};\n","/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\n\nexport const hasClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el = [].slice.call(el);\n\n  return cl.some((cl) => {\n    return el.some((el) => {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n","import { getElement } from './getElement';\n\n/**\n * Moves element(s) in the DOM based on a reference and move type\n * ---\n * @param {String} target - The element(s) to move\n * @param {String} type - Move type can be 'after', 'before', 'append' or 'prepend'\n * @param {String} reference - The reference element the move is relative to\n */\n\nexport function moveElement(target, type, reference = false) {\n  if (reference) {\n    const els = getElement(target);\n    if (!els.length) throw new Error(`Move target element \"${target}\" not found!`);\n    const ref = getElement(reference, 1);\n    if (!ref) throw new Error(`Move reference element \"${reference}\" not found!`);\n    els.forEach((el) => {\n      switch (type) {\n        case 'after':\n          ref.after(el);\n          return { ref, el, type };\n        case 'before':\n          ref.before(el);\n          return { ref, el, type };\n        case 'append':\n          ref.append(el);\n          return { ref, el, type };\n        case 'prepend':\n          ref.prepend(el);\n          return { ref, el, type };\n        default:\n          throw new Error(`Move type \"${type}\" does not exist!`);\n      }\n    });\n  }\n}\n","/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\n\nexport const removeClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.remove(...cl);\n  });\n};\n","export const openTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\n\nexport const closeTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n","export const breakpoints = {\n  xs: '480px',\n  sm: '620px',\n  md: '760px',\n  lg: '990px',\n  xl: '1380px'\n};\n","/**\n * Takes a hyphen cased string and converts it to camel case\n * ---\n * @param {String } str - the string to convert to camel case\n * @returns {Boolean} - returns a camel cased string\n */\n\nexport const camelCase = (str) => {\n  return str.replace(/-([a-z])/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\n","/**\n * Takes a camel cased string and converts it to hyphen case\n * ---\n * @param {String } str - the string to convert to hyphen case\n * @returns {Boolean} - returns a hyphen cased string\n */\n\nexport const hyphenCase = (str) => {\n  return str.replace(/([a-z][A-Z])/g, function (g) {\n    return g[0] + '-' + g[1].toLowerCase();\n  });\n};\n","/**\n * Toggle a class or classes on an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to toggle class(es) on\n * @param {String || Array} cl - Class(es) to toggle\n */\n\nexport const toggleClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    cl.forEach((cl) => {\n      el.classList.toggle(cl);\n    });\n  });\n};\n","export default class Checkbox {\n  constructor(options) {\n    this.defaults = {\n      autoInit: false,\n      stateAttr: 'aria-checked',\n      stateValue: 'mixed'\n    };\n    this.settings = { ...this.defaults, ...options };\n    this.__handlerClick = this.handlerClick.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    const selector = `[${this.settings.stateAttr}=\"${this.settings.stateValue}\"]`;\n    const mixed = document.querySelectorAll(selector);\n    this.setIndeterminate(mixed);\n    document.addEventListener('click', this.__handlerClick, false);\n  }\n\n  destroy() {\n    document.removeEventListener('click', this.__handlerClick, false);\n  }\n\n  handlerClick(event) {\n    const selector = `[${this.settings.stateAttr}=\"${this.settings.stateValue}\"]`;\n    const el = event.target.closest(selector);\n    if (!el) return;\n    this.removeAriaState(el);\n    this.setIndeterminate(el);\n  }\n\n  setAriaState(el, value = this.settings.stateValue) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      el.setAttribute(this.settings.stateAttr, value);\n    });\n  }\n\n  removeAriaState(el) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      el.removeAttribute(this.settings.stateAttr);\n    });\n  }\n\n  setIndeterminate(el) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      if (el.hasAttribute(this.settings.stateAttr)) {\n        el.indeterminate = true;\n      } else {\n        el.indeterminate = false;\n      }\n    });\n  }\n}\n","import { breakpoints } from '@vrembem/core/index';\n\nexport default {\n  autoInit: false,\n\n  // Data attributes\n  dataDrawer: 'drawer',\n  dataDialog: 'drawer-dialog',\n  dataToggle: 'drawer-toggle',\n  dataOpen: 'drawer-open',\n  dataClose: 'drawer-close',\n  dataBreakpoint: 'drawer-breakpoint',\n  dataFocus: 'drawer-focus',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Classes\n  classModal: 'drawer_modal',\n\n  // Selectors\n  selectorInert: null,\n  selectorOverflow: null,\n\n  // Feature toggles\n  breakpoints: breakpoints,\n  customEventPrefix: 'drawer:',\n  stateSave: true,\n  stateKey: 'DrawerState',\n  setTabindex: true,\n  transition: true\n};\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\n\nexport async function switchToModal(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (hasClass(drawer, obj.settings.classModal)) return;\n\n  // Enable modal state\n  addClass(drawer, obj.settings.classModal);\n  addClass(drawer, obj.settings.stateClosed);\n  removeClass(drawer, obj.settings.stateOpened);\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toModal', {\n    bubbles: true\n  }));\n  return drawer;\n}\n\nexport async function switchToDefault(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (!hasClass(drawer, obj.settings.classModal)) return;\n\n  // Tear down modal state\n  setInert(false, obj.settings.selectorInert);\n  setOverflowHidden(false, obj.settings.selectorOverflow);\n  removeClass(drawer, obj.settings.classModal);\n  obj.focusTrap.destroy();\n\n  // Restore drawers saved state\n  drawerKey = drawer.getAttribute(`data-${obj.settings.dataDrawer}`);\n  const drawerState = obj.state[drawerKey];\n  if (drawerState == obj.settings.stateOpened) {\n    addClass(drawer, obj.settings.stateOpened);\n    removeClass(drawer, obj.settings.stateClosed);\n  }\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toDefault', {\n    bubbles: true\n  }));\n  return drawer;\n}\n","import { switchToDefault, switchToModal } from './switchTo';\n\nexport class Breakpoint {\n  constructor(parent) {\n    this.mediaQueryLists = [];\n    this.parent = parent;\n    this.__check = this.check.bind(this);\n  }\n\n  init() {\n    const drawers = document.querySelectorAll(`[data-${this.parent.settings.dataBreakpoint}]`);\n    drawers.forEach((drawer) => {\n      const id = drawer.getAttribute(`data-${this.parent.settings.dataDrawer}`);\n      const key = drawer.getAttribute(`data-${this.parent.settings.dataBreakpoint}`);\n      const bp = this.parent.settings.breakpoints[key] ? this.parent.settings.breakpoints[key] : key;\n      const mql = window.matchMedia('(min-width:' + bp + ')');\n      this.match(mql, drawer);\n      mql.addListener(this.__check);\n      this.mediaQueryLists.push({\n        'mql': mql,\n        'drawer': id\n      });\n    });\n  }\n\n  destroy() {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        item.mql.removeListener(this.__check);\n      });\n    }\n    this.mediaQueryLists = null;\n  }\n\n  check(event = null) {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        // If an event is passed, filter out drawers that don't match the query\n        // If event is null, run all drawers through match\n        let filter = (event) ? event.media == item.mql.media : true;\n        if (!filter) return;\n        const drawer = document.querySelector(\n          `[data-${this.parent.settings.dataDrawer}=\"${item.drawer}\"]`\n        );\n        if (drawer) this.match(item.mql, drawer);\n      });\n      document.dispatchEvent(new CustomEvent(this.parent.settings.customEventPrefix + 'breakpoint', {\n        bubbles: true\n      }));\n    }\n  }\n\n  match(mql, drawer) {\n    if (mql.matches) {\n      switchToDefault(drawer, this.parent);\n    } else {\n      switchToModal(drawer, this.parent);\n    }\n  }\n}\n","export function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Toggle data trigger\n  let trigger = event.target.closest(`[data-${this.settings.dataToggle}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataToggle}`);\n    this.memory.trigger = trigger;\n    this.toggle(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Open data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    this.memory.trigger = trigger;\n    this.open(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Close data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataClose}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataClose}`);\n    if (selector) {\n      this.memory.trigger = trigger;\n      this.close(selector);\n    } else {\n      const target = event.target.closest(`[data-${this.settings.dataDrawer}]`);\n      if (target) this.close(target);\n    }\n    event.preventDefault();\n    return;\n  }\n\n  // Screen modal trigger\n  if (event.target.hasAttribute(`data-${this.settings.dataDrawer}`)) {\n    this.close(event.target);\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.keyCode == 27) {\n    const target = document.querySelector(\n      `.${this.settings.classModal}.${this.settings.stateOpened}`\n    );\n    if (target) {\n      this.close(target);\n    }\n  }\n}\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\n\nexport function stateSet(settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // If there isn't an existing state to set\n  if (!localStorage.getItem(settings.stateKey))\n    return stateSave(null, settings);\n\n  // Set the existing state\n  const state = JSON.parse(localStorage.getItem(settings.stateKey));\n  Object.keys(state).forEach((key) => {\n    const item = document.querySelector(\n      `[data-${settings.dataDrawer}=\"${key}\"]`\n    );\n    if (!item) return;\n    (state[key] == settings.stateOpened) ?\n      addClass(item, settings.stateOpened) :\n      removeClass(item, settings.stateOpened);\n  });\n  return state;\n}\n\nexport function stateSave(target, settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // Get the currently saved object if it exists\n  const state = (localStorage.getItem(settings.stateKey)) ?\n    JSON.parse(localStorage.getItem(settings.stateKey)) : {};\n\n  // Are we saving a single target or the entire suite?\n  const drawers = (target) ? [target] :\n    document.querySelectorAll(`[data-${settings.dataDrawer}]`);\n\n  // Loop through drawers and save their states\n  drawers.forEach((el) => {\n    if (hasClass(el, settings.classModal)) return;\n    const drawerKey = el.getAttribute(`data-${settings.dataDrawer}`);\n    state[drawerKey] = (hasClass(el, settings.stateOpened)) ?\n      settings.stateOpened : settings.stateClosed;\n  });\n\n  // Save to localStorage and return the state\n  localStorage.setItem(settings.stateKey, JSON.stringify(state));\n  return state;\n}\n\nexport function stateClear(settings) {\n  if (localStorage.getItem(settings.stateKey)) {\n    localStorage.removeItem(settings.stateKey);\n  }\n  return {};\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { Breakpoint } from './src/js/breakpoint';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { stateClear, stateSave, stateSet } from './src/js/state';\nimport { switchToDefault, switchToModal } from './src/js/switchTo';\n\nexport default class Drawer {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.state = {};\n    this.focusTrap = new FocusTrap();\n    this.breakpoint = new Breakpoint(this);\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.stateSet();\n    this.setTabindex(this.settings.setTabindex);\n    this.breakpoint.init();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.breakpoint.destroy();\n    this.memory = {};\n    this.state = {};\n    localStorage.removeItem(this.settings.stateKey);\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getDrawer(drawerKey) {\n    if (typeof drawerKey !== 'string') return drawerKey;\n    return document.querySelector(\n      `[data-${this.settings.dataDrawer}=\"${drawerKey}\"]`\n    );\n  }\n\n  drawerNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find drawer with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataDrawer}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  /**\n   * Save state functionality\n   */\n\n  stateSet() {\n    this.state = stateSet(this.settings);\n  }\n\n  stateSave(target = null) {\n    this.state = stateSave(target, this.settings);\n  }\n\n  stateClear() {\n    this.state = stateClear(this.settings);\n  }\n\n  /**\n   * SwitchTo functionality\n   */\n\n  switchToDefault(drawerKey) {\n    return switchToDefault(drawerKey, this);\n  }\n\n  switchToModal(drawerKey) {\n    return switchToModal(drawerKey, this);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async toggle(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    const isOpen = hasClass(drawer, this.settings.stateOpened);\n    if (!isOpen) {\n      return this.open(drawer);\n    } else {\n      return this.close(drawer);\n    }\n  }\n\n  async open(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (!hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      const isModal = hasClass(drawer, this.settings.classModal);\n      if (isModal) {\n        setOverflowHidden(true, this.settings.selectorOverflow);\n      }\n      await openTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      if (isModal) {\n        this.focusTrap.init(drawer);\n        setInert(true, this.settings.selectorInert);\n      }\n      focusTarget(drawer, this.settings);\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      focusTarget(drawer, this.settings);\n      return drawer;\n    }\n  }\n\n  async close(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      if (hasClass(drawer, this.settings.classModal)) {\n        setInert(false, this.settings.selectorInert);\n        setOverflowHidden(false, this.settings.selectorOverflow);\n      }\n      await closeTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      focusTrigger(this);\n      this.focusTrap.destroy();\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      return drawer;\n    }\n  }\n}\n","export default {\n  autoInit: false,\n\n  // Data attributes\n  dataModal: 'modal',\n  dataDialog: 'modal-dialog',\n  dataOpen: 'modal-open',\n  dataClose: 'modal-close',\n  dataFocus: 'modal-focus',\n  dataRequired: 'modal-required',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Selector\n  selectorInert: null,\n  selectorOverflow: 'body',\n\n  // Feature toggles\n  customEventPrefix: 'modal:',\n  moveModals: {\n    ref: null,\n    type: null\n  },\n  setTabindex: true,\n  transition: true\n};\n","export async function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Trigger click\n  const trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    event.preventDefault();\n    const modalKey = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    const fromModal = event.target.closest(`[data-${this.settings.dataModal}]`);\n    if (!fromModal) this.memory.trigger = trigger;\n    await this.close(!fromModal);\n    this.open(modalKey);\n    return;\n  }\n\n  // Close click\n  if (event.target.closest(`[data-${this.settings.dataClose}]`)) {\n    event.preventDefault();\n    this.close();\n    return;\n  }\n\n  // Root click\n  if (\n    event.target.hasAttribute(`data-${this.settings.dataModal}`) &&\n    !event.target.hasAttribute(`data-${this.settings.dataRequired}`)\n  ) {\n    this.close();\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.key === 'Escape' || event.keyCode === 27) {\n    const target = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (target && !target.hasAttribute(`data-${this.settings.dataRequired}`)) {\n      this.close();\n    }\n  }\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\nimport { moveElement } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { setInitialState } from './src/js/initialState';\n\nexport default class Modal {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.focusTrap = new FocusTrap();\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.moveModals();\n    this.setTabindex(this.settings.setTabindex);\n    this.setInitialState();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.memory = {};\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getModal(modalKey) {\n    if (typeof modalKey !== 'string') return modalKey;\n    return document.querySelector(\n      `[data-${this.settings.dataModal}=\"${modalKey}\"]`\n    );\n  }\n\n  modalNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find modal with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataModal}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  setInitialState() {\n    setInitialState(this);\n  }\n\n  moveModals(type = this.settings.moveModals.type, ref = this.settings.moveModals.ref) {\n    const modals = document.querySelectorAll(`[data-${this.settings.dataModal}]`);\n    if (modals.length) moveElement(modals, type, ref);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async open(modalKey) {\n    const modal = this.getModal(modalKey);\n    if (!modal) return this.modalNotFound(modalKey);\n    if (hasClass(modal, this.settings.stateClosed)) {\n      this.working = true;\n      setOverflowHidden(true, this.settings.selectorOverflow);\n      await openTransition(modal, this.settings);\n      this.focusTrap.init(modal);\n      focusTarget(modal, this.settings);\n      setInert(true, this.settings.selectorInert);\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n\n  async close(returnFocus = true) {\n    const modal = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (modal) {\n      this.working = true;\n      setInert(false, this.settings.selectorInert);\n      setOverflowHidden(false, this.settings.selectorOverflow);\n      await closeTransition(modal, this.settings);\n      if (returnFocus) focusTrigger(this);\n      this.focusTrap.destroy();\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n}\n","import { addClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\nimport { focusTrigger } from '@vrembem/core/index';\n\nexport function setInitialState(obj) {\n  const modals = document.querySelectorAll(`[data-${obj.settings.dataModal}]`);\n  modals.forEach((el) => {\n    if (el.classList.contains(obj.settings.stateOpened)) {\n      setInert(false, obj.settings.selectorInert);\n      setOverflowHidden(false, obj.settings.selectorOverflow);\n      focusTrigger(obj);\n      obj.focusTrap.destroy();\n    }\n    removeClass(el,\n      obj.settings.stateOpened,\n      obj.settings.stateOpening,\n      obj.settings.stateClosing\n    );\n    addClass(el, obj.settings.stateClosed);\n  });\n}\n"],"names":["setInert","state","selector","document","querySelectorAll","forEach","el","inert","setAttribute","removeAttribute","setOverflowHidden","style","overflow","removeProperty","setTabindex","addClass","cl","classList","add","focusTarget","target","settings","innerFocus","querySelector","dataFocus","focus","innerElement","focusTrigger","obj","memory","trigger","FocusTrap","constructor","this","__handlerFocusTrap","handlerFocusTrap","bind","init","inner","focusable","getFocusable","length","focusableFirst","focusableLast","addEventListener","handlerFocusLock","destroy","removeEventListener","event","key","keyCode","shiftKey","activeElement","preventDefault","initFocus","initScrollTop","scrollTop","push","getElement","single","hasClass","slice","call","some","contains","moveElement","type","reference","els","Error","ref","after","before","append","prepend","removeClass","remove","openTransition","Promise","resolve","transition","stateClosed","stateOpening","_f","stateOpened","closeTransition","stateClosing","breakpoints","xs","sm","md","lg","xl","str","replace","g","toUpperCase","toLowerCase","toggle","Checkbox","options","defaults","autoInit","stateAttr","stateValue","__handlerClick","handlerClick","mixed","setIndeterminate","closest","removeAriaState","setAriaState","value","indeterminate","hasAttribute","dataDrawer","dataDialog","dataToggle","dataOpen","dataClose","dataBreakpoint","classModal","selectorInert","selectorOverflow","customEventPrefix","stateSave","stateKey","switchToModal","drawerKey","drawer","getDrawer","dispatchEvent","CustomEvent","bubbles","drawerNotFound","async","switchToDefault","focusTrap","getAttribute","Breakpoint","parent","mediaQueryLists","__check","check","id","mql","window","matchMedia","match","addListener","item","removeListener","media","matches","working","open","close","handlerKeyup","stateClear","localStorage","getItem","JSON","parse","setItem","stringify","removeItem","Drawer","breakpoint","__handlerKeyup","stateSet","reject","Object","keys","[object Object]","isModal","dataModal","dataRequired","moveModals","modalKey","fromModal","Modal","setInitialState","getModal","modalNotFound","modals","modal","returnFocus"],"mappings":"MAAaA,EAAW,CAACC,EAAOC,KAC1BA,GACUC,SAASC,iBAAiBF,GAClCG,QAASC,IACPL,GACFK,EAAGC,OAAQ,EACXD,EAAGE,aAAa,eAAe,KAE/BF,EAAGC,MAAQ,KACXD,EAAGG,gBAAgB,mBAMdC,EAAoB,CAACT,EAAOC,KACnCA,GACUC,SAASC,iBAAiBF,GAClCG,QAASC,IACPL,EACFK,EAAGK,MAAMC,SAAW,SAEpBN,EAAGK,MAAME,eAAe,eAMnBC,EAAc,CAACb,EAAOC,KAC7BA,GACUC,SAASC,iBAAiBF,GAClCG,QAASC,IACPL,EACFK,EAAGE,aAAa,WAAY,MAE5BF,EAAGG,gBAAgB,eC5BdM,EAAW,CAACT,KAAOU,MAC9BV,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IACvBD,QAASC,IACVA,EAAGW,UAAUC,OAAOF,MCVXG,EAAc,CAACC,EAAQC,KAClC,MAAMC,EAAaF,EAAOG,cACvB,SAAQF,EAASG,cAEpB,GAAIF,EACFA,EAAWG,YACN,CACL,MAAMC,EAAeN,EAAOG,cAAc,mBACtCG,GAAcA,EAAaD,UAItBE,EAAe,CAACC,EAAM,QAC5BA,GAAQA,EAAIC,QAAWD,EAAIC,OAAOC,UACvCF,EAAIC,OAAOC,QAAQL,QACnBG,EAAIC,OAAOC,QAAU,OAGvB,MAAaC,EACXC,cACEC,KAAKb,OAAS,KACda,KAAKC,mBAAqBD,KAAKE,iBAAiBC,KAAKH,MAGvDI,KAAKjB,GACHa,KAAKb,OAASA,EACda,KAAKK,MAAQL,KAAKb,OAAOG,cAAc,mBACvCU,KAAKM,UAAYN,KAAKO,eAClBP,KAAKM,UAAUE,QACjBR,KAAKS,eAAiBT,KAAKM,UAAU,GACrCN,KAAKU,cAAgBV,KAAKM,UAAUN,KAAKM,UAAUE,OAAS,GAC5DR,KAAKb,OAAOwB,iBAAiB,UAAWX,KAAKC,qBAE7CD,KAAKb,OAAOwB,iBAAiB,UAAWX,KAAKY,kBAIjDC,UACOb,KAAKb,SACVa,KAAKK,MAAQ,KACbL,KAAKM,UAAY,KACjBN,KAAKS,eAAiB,KACtBT,KAAKU,cAAgB,KACrBV,KAAKb,OAAO2B,oBAAoB,UAAWd,KAAKC,oBAChDD,KAAKb,OAAO2B,oBAAoB,UAAWd,KAAKY,kBAChDZ,KAAKb,OAAS,MAGhBe,iBAAiBa,IACc,QAAdA,EAAMC,KAAmC,IAAlBD,EAAME,WAExCF,EAAMG,SAENhD,SAASiD,gBAAkBnB,KAAKS,gBAChCvC,SAASiD,gBAAkBnB,KAAKK,QAEhCL,KAAKU,cAAclB,QACnBuB,EAAMK,kBAINlD,SAASiD,gBAAkBnB,KAAKU,eAChCxC,SAASiD,gBAAkBnB,KAAKK,QAEhCL,KAAKS,eAAejB,QACpBuB,EAAMK,mBAKZR,iBAAiBG,IACc,QAAdA,EAAMC,KAAmC,IAAlBD,EAAME,UACjCF,EAAMK,iBAGnBb,eACE,MAAMD,EAAY,GACZe,EAAYnD,SAASiD,cACrBG,EAAiBtB,KAAKK,MAASL,KAAKK,MAAMkB,UAAY,EAa5D,OAXAvB,KAAKb,OACFhB,iBAAiB,gPACjBC,QAASC,IACRA,EAAGmB,QACCnB,IAAOH,SAASiD,eAClBb,EAAUkB,KAAKnD,KAIjB2B,KAAKK,QAAOL,KAAKK,MAAMkB,UAAYD,GACvCD,EAAU7B,QACHc,SCpFEmB,EAAa,SAAUxD,EAAUyD,EAAS,GACrD,MAAuB,iBAAZzD,EAA6BA,EAChCyD,EACNxD,SAASoB,cAAcrB,GACvBC,SAASC,iBAAiBF,ICFjB0D,EAAW,CAACtD,KAAOU,KAE9BV,EAAK,GAAGuD,MAAMC,KADdxD,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IAGnBU,EAAG+C,KAAM/C,GACPV,EAAGyD,KAAMzD,IACd,GAAIA,EAAGW,UAAU+C,SAAShD,GAAK,sBCLrBiD,EAAY7C,EAAQ8C,EAAMC,GAAY,GACpD,GAAIA,EAAW,CACb,MAAMC,EAAMV,EAAWtC,GACvB,IAAKgD,EAAI3B,OAAQ,UAAU4B,MAAO,wBAAuBjD,iBACzD,MAAMkD,EAAMZ,EAAWS,EAAW,GAClC,IAAKG,EAAK,UAAUD,MAAO,2BAA0BF,iBACrDC,EAAI/D,QAASC,IACX,OAAQ4D,GACN,IAAK,QAEH,OADAI,EAAIC,MAAMjE,GACH,CAAEgE,IAAAA,EAAKhE,GAAAA,EAAI4D,KAAAA,GACpB,IAAK,SAEH,OADAI,EAAIE,OAAOlE,GACJ,CAAEgE,IAAAA,EAAKhE,GAAAA,EAAI4D,KAAAA,GACpB,IAAK,SAEH,OADAI,EAAIG,OAAOnE,GACJ,CAAEgE,IAAAA,EAAKhE,GAAAA,EAAI4D,KAAAA,GACpB,IAAK,UAEH,OADAI,EAAII,QAAQpE,GACL,CAAEgE,IAAAA,EAAKhE,GAAAA,EAAI4D,KAAAA,GACpB,QACE,UAAUG,MAAO,cAAaH,gCCxB3BS,EAAc,CAACrE,KAAOU,MACjCV,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IACvBD,QAASC,IACVA,EAAGW,UAAU2D,UAAU5D,MCVd6D,EAAiB,CAACvE,EAAIe,QACtByD,QAASC,IACd1D,EAAS2D,YACX1E,EAAGW,UAAU2D,OAAOvD,EAAS4D,aAC7B3E,EAAGW,UAAUC,IAAIG,EAAS6D,cAC1B5E,EAAGsC,iBAAiB,gBAAiB,SAASuC,IAC5C7E,EAAGW,UAAUC,IAAIG,EAAS+D,aAC1B9E,EAAGW,UAAU2D,OAAOvD,EAAS6D,cAC7BH,EAAQzE,GACR2B,KAAKc,oBAAoB,gBAAiBoC,OAG5C7E,EAAGW,UAAUC,IAAIG,EAAS+D,aAC1B9E,EAAGW,UAAU2D,OAAOvD,EAAS4D,aAC7BF,EAAQzE,MAKD+E,EAAkB,CAAC/E,EAAIe,QACvByD,QAASC,IACd1D,EAAS2D,YACX1E,EAAGW,UAAUC,IAAIG,EAASiE,cAC1BhF,EAAGW,UAAU2D,OAAOvD,EAAS+D,aAC7B9E,EAAGsC,iBAAiB,gBAAiB,SAASuC,IAC5C7E,EAAGW,UAAU2D,OAAOvD,EAASiE,cAC7BhF,EAAGW,UAAUC,IAAIG,EAAS4D,aAC1BF,EAAQzE,GACR2B,KAAKc,oBAAoB,gBAAiBoC,OAG5C7E,EAAGW,UAAUC,IAAIG,EAAS4D,aAC1B3E,EAAGW,UAAU2D,OAAOvD,EAAS+D,aAC7BL,EAAQzE,MCjCDiF,EAAc,CACzBC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,kGCEoBC,GACjBA,EAAIC,QAAQ,YAAa,SAAUC,GACxC,OAAOA,EAAE,GAAGC,4FCFWH,GAClBA,EAAIC,QAAQ,gBAAiB,SAAUC,GAC5C,OAAOA,EAAE,GAAK,IAAMA,EAAE,GAAGE,wDCFF,CAAC3F,KAAOU,MACjCV,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IACvBD,QAASC,IACVU,EAAGX,QAASW,IACVV,EAAGW,UAAUiF,OAAOlF,gECXLmF,EACnBnE,YAAYoE,GACVnE,KAAKoE,SAAW,CACdC,UAAU,EACVC,UAAW,eACXC,WAAY,SAEdvE,KAAKZ,SAAW,IAAKY,KAAKoE,YAAaD,GACvCnE,KAAKwE,eAAiBxE,KAAKyE,aAAatE,KAAKH,MACzCA,KAAKZ,SAASiF,UAAUrE,KAAKI,OAGnCA,KAAK+D,EAAU,MACTA,IAASnE,KAAKZ,SAAW,IAAKY,KAAKZ,YAAa+E,IACpD,MACMO,EAAQxG,SAASC,iBADL,IAAG6B,KAAKZ,SAASkF,cAActE,KAAKZ,SAASmF,gBAE/DvE,KAAK2E,iBAAiBD,GACtBxG,SAASyC,iBAAiB,QAASX,KAAKwE,gBAAgB,GAG1D3D,UACE3C,SAAS4C,oBAAoB,QAASd,KAAKwE,gBAAgB,GAG7DC,aAAa1D,GACX,MACM1C,EAAK0C,EAAM5B,OAAOyF,QADN,IAAG5E,KAAKZ,SAASkF,cAActE,KAAKZ,SAASmF,gBAE1DlG,IACL2B,KAAK6E,gBAAgBxG,GACrB2B,KAAK2E,iBAAiBtG,IAGxByG,aAAazG,EAAI0G,EAAQ/E,KAAKZ,SAASmF,aACrClG,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IACvBD,QAASC,IACVA,EAAGE,aAAayB,KAAKZ,SAASkF,UAAWS,KAI7CF,gBAAgBxG,IACdA,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IACvBD,QAASC,IACVA,EAAGG,gBAAgBwB,KAAKZ,SAASkF,aAIrCK,iBAAiBtG,IACfA,EAAMA,EAAGD,QAAWC,EAAK,CAACA,IACvBD,QAASC,IAERA,EAAG2G,gBADD3G,EAAG4G,aAAajF,KAAKZ,SAASkF,cC/CxC,MAAe,CACbD,UAAU,EAGVa,WAAY,SACZC,WAAY,gBACZC,WAAY,gBACZC,SAAU,cACVC,UAAW,eACXC,eAAgB,oBAChBhG,UAAW,eAGX4D,YAAa,YACbF,aAAc,aACdI,aAAc,aACdL,YAAa,YAGbwC,WAAY,eAGZC,cAAe,KACfC,iBAAkB,KAGlBpC,YAAaA,EACbqC,kBAAmB,UACnBC,WAAW,EACXC,SAAU,cACVhH,aAAa,EACbkE,YAAY,kBC9BQ+C,EAAcC,EAAWpG,GAE7C,MAAMqG,EAASrG,EAAIsG,UAAUF,GAC7B,OAAKC,EACDrE,EAASqE,EAAQrG,EAAIP,SAASoG,iBAAlC,GAGA1G,EAASkH,EAAQrG,EAAIP,SAASoG,YAC9B1G,EAASkH,EAAQrG,EAAIP,SAAS4D,aAC9BN,EAAYsD,EAAQrG,EAAIP,SAAS+D,aAGjC6C,EAAOE,cAAc,IAAIC,YAAYxG,EAAIP,SAASuG,kBAAoB,UAAW,CAC/ES,SAAS,KAEJJ,GAZarG,EAAI0G,eAAeN,GAezCO,eAAsBC,EAAgBR,EAAWpG,GAE/C,MAAMqG,EAASrG,EAAIsG,UAAUF,GAC7B,OAAKC,EACArE,EAASqE,EAAQrG,EAAIP,SAASoG,aAGnCzH,GAAS,EAAO4B,EAAIP,SAASqG,eAC7BhH,GAAkB,EAAOkB,EAAIP,SAASsG,kBACtChD,EAAYsD,EAAQrG,EAAIP,SAASoG,YACjC7F,EAAI6G,UAAU3F,UAGdkF,EAAYC,EAAOS,aAAc,QAAO9G,EAAIP,SAAS8F,YACjCvF,EAAI3B,MAAM+H,IACXpG,EAAIP,SAAS+D,cAC9BrE,EAASkH,EAAQrG,EAAIP,SAAS+D,aAC9BT,EAAYsD,EAAQrG,EAAIP,SAAS4D,cAInCgD,EAAOE,cAAc,IAAIC,YAAYxG,EAAIP,SAASuG,kBAAoB,YAAa,CACjFS,SAAS,KAEJJ,QApBP,EADoBrG,EAAI0G,eAAeN,SCtB5BW,EACX3G,YAAY4G,GACV3G,KAAK4G,gBAAkB,GACvB5G,KAAK2G,OAASA,EACd3G,KAAK6G,QAAU7G,KAAK8G,MAAM3G,KAAKH,MAGjCI,OACkBlC,SAASC,iBAAkB,SAAQ6B,KAAK2G,OAAOvH,SAASmG,mBAChEnH,QAAS4H,IACf,MAAMe,EAAKf,EAAOS,aAAc,QAAOzG,KAAK2G,OAAOvH,SAAS8F,YACtDlE,EAAMgF,EAAOS,aAAc,QAAOzG,KAAK2G,OAAOvH,SAASmG,gBAEvDyB,EAAMC,OAAOC,WAAW,eADnBlH,KAAK2G,OAAOvH,SAASkE,YAAYtC,GAAOhB,KAAK2G,OAAOvH,SAASkE,YAAYtC,GAAOA,GACxC,KACnDhB,KAAKmH,MAAMH,EAAKhB,GAChBgB,EAAII,YAAYpH,KAAK6G,SACrB7G,KAAK4G,gBAAgBpF,KAAK,CACxBwF,IAAOA,EACPhB,OAAUe,MAKhBlG,UACMb,KAAK4G,iBAAmB5G,KAAK4G,gBAAgBpG,QAC/CR,KAAK4G,gBAAgBxI,QAASiJ,IAC5BA,EAAKL,IAAIM,eAAetH,KAAK6G,WAGjC7G,KAAK4G,gBAAkB,KAGzBE,MAAM/F,EAAQ,MACRf,KAAK4G,iBAAmB5G,KAAK4G,gBAAgBpG,SAC/CR,KAAK4G,gBAAgBxI,QAASiJ,IAI5B,GADctG,GAASA,EAAMwG,OAASF,EAAKL,IAAIO,MAClC,OACb,MAAMvB,EAAS9H,SAASoB,cACrB,SAAQU,KAAK2G,OAAOvH,SAAS8F,eAAemC,EAAKrB,YAEhDA,GAAQhG,KAAKmH,MAAME,EAAKL,IAAKhB,KAEnC9H,SAASgI,cAAc,IAAIC,YAAYnG,KAAK2G,OAAOvH,SAASuG,kBAAoB,aAAc,CAC5FS,SAAS,MAKfe,MAAMH,EAAKhB,GACLgB,EAAIQ,QACNjB,EAAgBP,EAAQhG,KAAK2G,QAE7Bb,EAAcE,EAAQhG,KAAK2G,kBCxDjBlC,EAAa1D,GAE3B,GAAIf,KAAKyH,QAAS,OAGlB,IAAI5H,EAAUkB,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAASgG,eAC1D,GAAIvF,EAAS,CACX,MAAM5B,EAAW4B,EAAQ4G,aAAc,QAAOzG,KAAKZ,SAASgG,YAI5D,OAHApF,KAAKJ,OAAOC,QAAUA,EACtBG,KAAKiE,OAAOhG,QACZ8C,EAAMK,iBAMR,GADAvB,EAAUkB,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAASiG,aAClDxF,EAAS,CACX,MAAM5B,EAAW4B,EAAQ4G,aAAc,QAAOzG,KAAKZ,SAASiG,UAI5D,OAHArF,KAAKJ,OAAOC,QAAUA,EACtBG,KAAK0H,KAAKzJ,QACV8C,EAAMK,iBAMR,GADAvB,EAAUkB,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAASkG,cAClDzF,EAAJ,CACE,MAAM5B,EAAW4B,EAAQ4G,aAAc,QAAOzG,KAAKZ,SAASkG,WAC5D,GAAIrH,EACF+B,KAAKJ,OAAOC,QAAUA,EACtBG,KAAK2H,MAAM1J,OACN,CACL,MAAMkB,EAAS4B,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAAS8F,eACvD/F,GAAQa,KAAK2H,MAAMxI,GAEzB4B,EAAMK,sBAKJL,EAAM5B,OAAO8F,aAAc,QAAOjF,KAAKZ,SAAS8F,aAClDlF,KAAK2H,MAAM5G,EAAM5B,iBAKLyI,EAAa7G,GAE3B,IAAIf,KAAKyH,SAEY,IAAjB1G,EAAME,QAAe,CACvB,MAAM9B,EAASjB,SAASoB,cACrB,IAAGU,KAAKZ,SAASoG,cAAcxF,KAAKZ,SAAS+D,eAE5ChE,GACFa,KAAK2H,MAAMxI,IC9BjB,SAAgByG,EAAUzG,EAAQC,GAEhC,IAAKA,EAASwG,UACZ,OAAOiC,EAAWzI,GAGpB,MAAMpB,EAAS8J,aAAaC,QAAQ3I,EAASyG,UAC3CmC,KAAKC,MAAMH,aAAaC,QAAQ3I,EAASyG,WAAa,GAgBxD,OAbiB1G,EAAU,CAACA,GAC1BjB,SAASC,iBAAkB,SAAQiB,EAAS8F,gBAGtC9G,QAASC,IACf,GAAIsD,EAAStD,EAAIe,EAASoG,YAAa,OACvC,MAAMO,EAAY1H,EAAGoI,aAAc,QAAOrH,EAAS8F,YACnDlH,EAAM+H,GAAcpE,EAAStD,EAAIe,EAAS+D,aACxC/D,EAAS+D,YAAc/D,EAAS4D,cAIpC8E,aAAaI,QAAQ9I,EAASyG,SAAUmC,KAAKG,UAAUnK,IAChDA,EAGT,SAAgB6J,EAAWzI,GAIzB,OAHI0I,aAAaC,QAAQ3I,EAASyG,WAChCiC,aAAaM,WAAWhJ,EAASyG,UAE5B,SC5CYwC,EACnBtI,YAAYoE,GACVnE,KAAKoE,SAAWA,EAChBpE,KAAKZ,SAAW,IAAKY,KAAKoE,YAAaD,GACvCnE,KAAKyH,SAAU,EACfzH,KAAKJ,OAAS,GACdI,KAAKhC,MAAQ,GACbgC,KAAKwG,UAAY,IAAI1G,EACrBE,KAAKsI,WAAa,IAAI5B,EAAW1G,MACjCA,KAAKwE,eAAiBC,EAAatE,KAAKH,MACxCA,KAAKuI,eAAiBX,EAAazH,KAAKH,MACpCA,KAAKZ,SAASiF,UAAUrE,KAAKI,OAGnCA,KAAK+D,EAAU,MACTA,IAASnE,KAAKZ,SAAW,IAAKY,KAAKZ,YAAa+E,IACpDnE,KAAKwI,WACLxI,KAAKnB,YAAYmB,KAAKZ,SAASP,aAC/BmB,KAAKsI,WAAWlI,OAChBlC,SAASyC,iBAAiB,QAASX,KAAKwE,gBAAgB,GACxDtG,SAASyC,iBAAiB,WAAYX,KAAKwE,gBAAgB,GAC3DtG,SAASyC,iBAAiB,QAASX,KAAKuI,gBAAgB,GAG1D1H,UACEb,KAAKsI,WAAWzH,UAChBb,KAAKJ,OAAS,GACdI,KAAKhC,MAAQ,GACb8J,aAAaM,WAAWpI,KAAKZ,SAASyG,UACtC3H,SAAS4C,oBAAoB,QAASd,KAAKwE,gBAAgB,GAC3DtG,SAAS4C,oBAAoB,WAAYd,KAAKwE,gBAAgB,GAC9DtG,SAAS4C,oBAAoB,QAASd,KAAKuI,gBAAgB,GAO7DtC,UAAUF,GACR,MAAyB,iBAAdA,EAA+BA,EACnC7H,SAASoB,cACb,SAAQU,KAAKZ,SAAS8F,eAAea,OAI1CM,eAAerF,GACb,OAAO6B,QAAQ4F,OACb,IAAIrG,MAAO,kCAAiCpB,OAIhDnC,YAAYb,GAAQ,GAKlBa,EAAYb,EAJc,iBAChBgC,KAAKZ,SAAS8F,4BACdlF,KAAKZ,SAAS+F,qBAS1BqD,WACExI,KAAKhC,eDzEgBoB,GAEvB,IAAKA,EAASwG,UACZ,OAAOiC,EAAWzI,GAGpB,IAAK0I,aAAaC,QAAQ3I,EAASyG,UACjC,OAAOD,EAAU,KAAMxG,GAGzB,MAAMpB,EAAQgK,KAAKC,MAAMH,aAAaC,QAAQ3I,EAASyG,WAUvD,OATA6C,OAAOC,KAAK3K,GAAOI,QAAS4C,IAC1B,MAAMqG,EAAOnJ,SAASoB,cACnB,SAAQF,EAAS8F,eAAelE,OAE9BqG,IACJrJ,EAAMgD,IAAQ5B,EAAS+D,YACtBrE,EAASuI,EAAMjI,EAAS+D,aACxBT,EAAY2E,EAAMjI,EAAS+D,gBAExBnF,ECqDQwK,CAASxI,KAAKZ,UAG7BwG,UAAUzG,EAAS,MACjBa,KAAKhC,MAAQ4H,EAAUzG,EAAQa,KAAKZ,UAGtCyI,aACE7H,KAAKhC,MAAQ6J,EAAW7H,KAAKZ,UAO/BmH,gBAAgBR,GACd,OAAOQ,EAAgBR,EAAW/F,MAGpC8F,cAAcC,GACZ,OAAOD,EAAcC,EAAW/F,MAOlC4I,aAAa7C,GACX,MAAMC,EAAShG,KAAKiG,UAAUF,GAC9B,OAAKC,EACUrE,EAASqE,EAAQhG,KAAKZ,SAAS+D,kBAIhCwE,MAAM3B,QAFN0B,KAAK1B,QAHMK,eAAeN,GAS1C6C,WAAW7C,GACT,MAAMC,EAAShG,KAAKiG,UAAUF,GAC9B,IAAKC,EAAQ,YAAYK,eAAeN,GACxC,GAAKpE,EAASqE,EAAQhG,KAAKZ,SAAS+D,aAoBlC,OADAjE,EAAY8G,EAAQhG,KAAKZ,UAClB4G,EApByC,CAChDhG,KAAKyH,SAAU,EACf,MAAMoB,EAAUlH,EAASqE,EAAQhG,KAAKZ,SAASoG,YAe/C,OAdIqD,GACFpK,GAAkB,EAAMuB,KAAKZ,SAASsG,wBAElC9C,EAAeoD,EAAQhG,KAAKZ,UAClCY,KAAK4F,UAAUI,GACX6C,IACF7I,KAAKwG,UAAUpG,KAAK4F,GACpBjI,GAAS,EAAMiC,KAAKZ,SAASqG,gBAE/BvG,EAAY8G,EAAQhG,KAAKZ,UACzB4G,EAAOE,cAAc,IAAIC,YAAYnG,KAAKZ,SAASuG,kBAAoB,SAAU,CAC/ES,SAAS,KAEXpG,KAAKyH,SAAU,EACRzB,GAOX4C,YAAY7C,GACV,MAAMC,EAAShG,KAAKiG,UAAUF,GAC9B,OAAKC,EACDrE,EAASqE,EAAQhG,KAAKZ,SAAS+D,cACjCnD,KAAKyH,SAAU,EACX9F,EAASqE,EAAQhG,KAAKZ,SAASoG,cACjCzH,GAAS,EAAOiC,KAAKZ,SAASqG,eAC9BhH,GAAkB,EAAOuB,KAAKZ,SAASsG,yBAEnCtC,EAAgB4C,EAAQhG,KAAKZ,UACnCY,KAAK4F,UAAUI,GACftG,EAAaM,MACbA,KAAKwG,UAAU3F,UACfmF,EAAOE,cAAc,IAAIC,YAAYnG,KAAKZ,SAASuG,kBAAoB,SAAU,CAC/ES,SAAS,KAEXpG,KAAKyH,SAAU,EACRzB,GAEAA,OAjBgBK,eAAeN,IC9I5C,MAAe,CACb1B,UAAU,EAGVyE,UAAW,QACX3D,WAAY,eACZE,SAAU,aACVC,UAAW,cACX/F,UAAW,cACXwJ,aAAc,iBAGd5F,YAAa,YACbF,aAAc,aACdI,aAAc,aACdL,YAAa,YAGbyC,cAAe,KACfC,iBAAkB,OAGlBC,kBAAmB,SACnBqD,WAAY,CACV3G,IAAK,KACLJ,KAAM,MAERpD,aAAa,EACbkE,YAAY,kBC5BQ0B,EAAa1D,GAEjC,GAAIf,KAAKyH,QAAS,OAGlB,MAAM5H,EAAUkB,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAASiG,aAC5D,GAAIxF,EAAS,CACXkB,EAAMK,iBACN,MAAM6H,EAAWpJ,EAAQ4G,aAAc,QAAOzG,KAAKZ,SAASiG,UACtD6D,EAAYnI,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAAS0J,cAI9D,OAHKI,IAAWlJ,KAAKJ,OAAOC,QAAUA,cAC3B8H,OAAOuB,QAClBlJ,KAAK0H,KAAKuB,GAKZ,GAAIlI,EAAM5B,OAAOyF,QAAS,SAAQ5E,KAAKZ,SAASkG,cAG9C,OAFAvE,EAAMK,sBACNpB,KAAK2H,SAML5G,EAAM5B,OAAO8F,aAAc,QAAOjF,KAAKZ,SAAS0J,YAC/C/H,EAAM5B,OAAO8F,aAAc,QAAOjF,KAAKZ,SAAS2J,eAEjD/I,KAAK2H,QAKT,SAAgBC,EAAa7G,GAE3B,IAAIf,KAAKyH,UAES,WAAd1G,EAAMC,KAAsC,KAAlBD,EAAME,SAAgB,CAClD,MAAM9B,EAASjB,SAASoB,cACrB,SAAQU,KAAKZ,SAAS0J,cAAc9I,KAAKZ,SAAS+D,eAEjDhE,IAAWA,EAAO8F,aAAc,QAAOjF,KAAKZ,SAAS2J,eACvD/I,KAAK2H,eChCUwB,EACnBpJ,YAAYoE,GACVnE,KAAKoE,SAAWA,EAChBpE,KAAKZ,SAAW,IAAKY,KAAKoE,YAAaD,GACvCnE,KAAKyH,SAAU,EACfzH,KAAKJ,OAAS,GACdI,KAAKwG,UAAY,IAAI1G,EACrBE,KAAKwE,eAAiBC,EAAatE,KAAKH,MACxCA,KAAKuI,eAAiBX,EAAazH,KAAKH,MACpCA,KAAKZ,SAASiF,UAAUrE,KAAKI,OAGnCA,KAAK+D,EAAU,MACTA,IAASnE,KAAKZ,SAAW,IAAKY,KAAKZ,YAAa+E,IACpDnE,KAAKgJ,aACLhJ,KAAKnB,YAAYmB,KAAKZ,SAASP,aAC/BmB,KAAKoJ,kBACLlL,SAASyC,iBAAiB,QAASX,KAAKwE,gBAAgB,GACxDtG,SAASyC,iBAAiB,WAAYX,KAAKwE,gBAAgB,GAC3DtG,SAASyC,iBAAiB,QAASX,KAAKuI,gBAAgB,GAG1D1H,UACEb,KAAKJ,OAAS,GACd1B,SAAS4C,oBAAoB,QAASd,KAAKwE,gBAAgB,GAC3DtG,SAAS4C,oBAAoB,WAAYd,KAAKwE,gBAAgB,GAC9DtG,SAAS4C,oBAAoB,QAASd,KAAKuI,gBAAgB,GAO7Dc,SAASJ,GACP,MAAwB,iBAAbA,EAA8BA,EAClC/K,SAASoB,cACb,SAAQU,KAAKZ,SAAS0J,cAAcG,OAIzCK,cAActI,GACZ,OAAO6B,QAAQ4F,OACb,IAAIrG,MAAO,iCAAgCpB,OAI/CnC,YAAYb,GAAQ,GAKlBa,EAAYb,EAJc,iBAChBgC,KAAKZ,SAAS0J,2BACd9I,KAAKZ,SAAS+F,qBAK1BiE,sBC5D8BzJ,EAAAA,ED6DZK,KC5DH9B,SAASC,iBAAkB,SAAQwB,EAAIP,SAAS0J,cACxD1K,QAASC,IACVA,EAAGW,UAAU+C,SAASpC,EAAIP,SAAS+D,eACrCpF,GAAS,EAAO4B,EAAIP,SAASqG,eAC7BhH,GAAkB,EAAOkB,EAAIP,SAASsG,kBACtChG,EAAaC,GACbA,EAAI6G,UAAU3F,WAEhB6B,EAAYrE,EACVsB,EAAIP,SAAS+D,YACbxD,EAAIP,SAAS6D,aACbtD,EAAIP,SAASiE,cAEfvE,EAAST,EAAIsB,EAAIP,SAAS4D,eDkD5BgG,WAAW/G,EAAOjC,KAAKZ,SAAS4J,WAAW/G,KAAMI,EAAMrC,KAAKZ,SAAS4J,WAAW3G,KAC9E,MAAMkH,EAASrL,SAASC,iBAAkB,SAAQ6B,KAAKZ,SAAS0J,cAC5DS,EAAO/I,QAAQwB,EAAYuH,EAAQtH,EAAMI,GAO/CuG,WAAWK,GACT,MAAMO,EAAQxJ,KAAKqJ,SAASJ,GAC5B,OAAKO,EACD7H,EAAS6H,EAAOxJ,KAAKZ,SAAS4D,cAChChD,KAAKyH,SAAU,EACfhJ,GAAkB,EAAMuB,KAAKZ,SAASsG,wBAChC9C,EAAe4G,EAAOxJ,KAAKZ,UACjCY,KAAKwG,UAAUpG,KAAKoJ,GACpBtK,EAAYsK,EAAOxJ,KAAKZ,UACxBrB,GAAS,EAAMiC,KAAKZ,SAASqG,eAC7B+D,EAAMtD,cAAc,IAAIC,YAAYnG,KAAKZ,SAASuG,kBAAoB,SAAU,CAC9ES,SAAS,KAEXpG,KAAKyH,SAAU,EACR+B,GAEAA,OAdeF,cAAcL,GAkBxCL,YAAYa,GAAc,GACxB,MAAMD,EAAQtL,SAASoB,cACpB,SAAQU,KAAKZ,SAAS0J,cAAc9I,KAAKZ,SAAS+D,eAErD,OAAIqG,GACFxJ,KAAKyH,SAAU,EACf1J,GAAS,EAAOiC,KAAKZ,SAASqG,eAC9BhH,GAAkB,EAAOuB,KAAKZ,SAASsG,wBACjCtC,EAAgBoG,EAAOxJ,KAAKZ,UAC9BqK,GAAa/J,EAAaM,MAC9BA,KAAKwG,UAAU3F,UACf2I,EAAMtD,cAAc,IAAIC,YAAYnG,KAAKZ,SAASuG,kBAAoB,SAAU,CAC9ES,SAAS,KAEXpG,KAAKyH,SAAU,EACR+B,GAEAA"}