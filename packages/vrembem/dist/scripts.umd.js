!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).vrembem={})}(this,function(t){var e=function(t,e){e&&document.querySelectorAll(e).forEach(function(e){t?(e.inert=!0,e.setAttribute("aria-hidden",!0)):(e.inert=null,e.removeAttribute("aria-hidden"))})},s=function(t,e){e&&document.querySelectorAll(e).forEach(function(e){t?e.style.overflow="hidden":e.style.removeProperty("overflow")})},n=function(t,e){e&&document.querySelectorAll(e).forEach(function(e){t?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")})},i=function(t){var e=arguments;(t=t.forEach?t:[t]).forEach(function(t){var s;(s=t.classList).add.apply(s,[].slice.call(e,1))})},r=function(t,e){var s=t.querySelector("[data-"+e.dataFocus+"]");if(s)s.focus();else{var n=t.querySelector('[tabindex="-1"]');n&&n.focus()}},a=function(t){void 0===t&&(t=null),t&&t.memory&&t.memory.trigger&&(t.memory.trigger.focus(),t.memory.trigger=null)},o=function(){function t(){this.target=null,this.__handlerFocusTrap=this.handlerFocusTrap.bind(this)}var e=t.prototype;return e.init=function(t){this.target=t,this.inner=this.target.querySelector('[tabindex="-1"]'),this.focusable=this.getFocusable(),this.focusable.length?(this.focusableFirst=this.focusable[0],this.focusableLast=this.focusable[this.focusable.length-1],this.target.addEventListener("keydown",this.__handlerFocusTrap)):this.target.addEventListener("keydown",this.handlerFocusLock)},e.destroy=function(){this.target&&(this.inner=null,this.focusable=null,this.focusableFirst=null,this.focusableLast=null,this.target.removeEventListener("keydown",this.__handlerFocusTrap),this.target.removeEventListener("keydown",this.handlerFocusLock),this.target=null)},e.handlerFocusTrap=function(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement!==this.focusableFirst&&document.activeElement!==this.inner||(this.focusableLast.focus(),t.preventDefault()):document.activeElement!==this.focusableLast&&document.activeElement!==this.inner||(this.focusableFirst.focus(),t.preventDefault()))},e.handlerFocusLock=function(t){("Tab"===t.key||9===t.keyCode)&&t.preventDefault()},e.getFocusable=function(){var t=[],e=document.activeElement,s=this.inner?this.inner.scrollTop:0;return this.target.querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type="text"]:not([disabled]),input[type="radio"]:not([disabled]),input[type="checkbox"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex="-1"])').forEach(function(e){e.focus(),e===document.activeElement&&t.push(e)}),this.inner&&(this.inner.scrollTop=s),e.focus(),t},t}(),c=function(t,e){return void 0===e&&(e=0),"string"!=typeof t?t:e?document.querySelector(t):document.querySelectorAll(t)},l=function(t){return t=[].slice.call(t=t.forEach?t:[t]),[].slice.call(arguments,1).some(function(e){return t.some(function(t){if(t.classList.contains(e))return!0})})};function d(t,e,s){if(void 0===s&&(s=!1),s){var n=c(t);if(!n.length)throw new Error('Move target element "'+t+'" not found!');var i=c(s,1);if(!i)throw new Error('Move reference element "'+s+'" not found!');n.forEach(function(t){switch(e){case"after":return i.after(t),{ref:i,el:t,type:e};case"before":return i.before(t),{ref:i,el:t,type:e};case"append":return i.append(t),{ref:i,el:t,type:e};case"prepend":return i.prepend(t),{ref:i,el:t,type:e};default:throw new Error('Move type "'+e+'" does not exist!')}})}}var u=function(t){var e=arguments;(t=t.forEach?t:[t]).forEach(function(t){var s;(s=t.classList).remove.apply(s,[].slice.call(e,1))})},h=function(t,e){return new Promise(function(s){e.transition?(t.classList.remove(e.stateClosed),t.classList.add(e.stateOpening),t.addEventListener("transitionend",function n(){t.classList.add(e.stateOpened),t.classList.remove(e.stateOpening),s(t),this.removeEventListener("transitionend",n)})):(t.classList.add(e.stateOpened),t.classList.remove(e.stateClosed),s(t))})},f=function(t,e){return new Promise(function(s){e.transition?(t.classList.add(e.stateClosing),t.classList.remove(e.stateOpened),t.addEventListener("transitionend",function n(){t.classList.remove(e.stateClosing),t.classList.add(e.stateClosed),s(t),this.removeEventListener("transitionend",n)})):(t.classList.add(e.stateClosed),t.classList.remove(e.stateOpened),s(t))})},g={xs:"480px",sm:"620px",md:"760px",lg:"990px",xl:"1380px"},v={__proto__:null,setInert:e,setOverflowHidden:s,setTabindex:n,addClass:i,camelCase:function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},focusTarget:r,focusTrigger:a,FocusTrap:o,getElement:c,hasClass:l,hyphenCase:function(t){return t.replace(/([a-z][A-Z])/g,function(t){return t[0]+"-"+t[1].toLowerCase()})},moveElement:d,removeClass:u,toggleClass:function(t){var e=arguments;(t=t.forEach?t:[t]).forEach(function(t){[].slice.call(e,1).forEach(function(e){t.classList.toggle(e)})})},openTransition:h,closeTransition:f,breakpoints:g};function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t}).apply(this,arguments)}var p=function(){function t(t){this.defaults={autoInit:!1,stateAttr:"aria-checked",stateValue:"mixed"},this.settings=m({},this.defaults,t),this.__handlerClick=this.handlerClick.bind(this),this.settings.autoInit&&this.init()}var e=t.prototype;return e.init=function(t){void 0===t&&(t=null),t&&(this.settings=m({},this.settings,t));var e=document.querySelectorAll("["+this.settings.stateAttr+'="'+this.settings.stateValue+'"]');this.setIndeterminate(e),document.addEventListener("click",this.__handlerClick,!1)},e.destroy=function(){document.removeEventListener("click",this.__handlerClick,!1)},e.handlerClick=function(t){var e=t.target.closest("["+this.settings.stateAttr+'="'+this.settings.stateValue+'"]');e&&(this.removeAriaState(e),this.setIndeterminate(e))},e.setAriaState=function(t,e){var s=this;void 0===e&&(e=this.settings.stateValue),(t=t.forEach?t:[t]).forEach(function(t){t.setAttribute(s.settings.stateAttr,e)})},e.removeAriaState=function(t){var e=this;(t=t.forEach?t:[t]).forEach(function(t){t.removeAttribute(e.settings.stateAttr)})},e.setIndeterminate=function(t){var e=this;(t=t.forEach?t:[t]).forEach(function(t){t.indeterminate=!!t.hasAttribute(e.settings.stateAttr)})},t}(),y={autoInit:!1,dataDrawer:"drawer",dataDialog:"drawer-dialog",dataToggle:"drawer-toggle",dataOpen:"drawer-open",dataClose:"drawer-close",dataBreakpoint:"drawer-breakpoint",dataFocus:"drawer-focus",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",classModal:"drawer_modal",selectorInert:null,selectorOverflow:null,breakpoints:g,customEventPrefix:"drawer:",stateSave:!0,stateKey:"DrawerState",setTabindex:!0,transition:!0},b=function(t,n){try{var r=n.getDrawer(t);return r?l(r,n.settings.classModal)?(e(!1,n.settings.selectorInert),s(!1,n.settings.selectorOverflow),u(r,n.settings.classModal),n.focusTrap.destroy(),t=r.getAttribute("data-"+n.settings.dataDrawer),n.state[t]==n.settings.stateOpened&&(i(r,n.settings.stateOpened),u(r,n.settings.stateClosed)),r.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"toDefault",{bubbles:!0})),Promise.resolve(r)):Promise.resolve():Promise.resolve(n.drawerNotFound(t))}catch(t){return Promise.reject(t)}},w=function(t,e){try{var s=e.getDrawer(t);return s?l(s,e.settings.classModal)?Promise.resolve():(i(s,e.settings.classModal),i(s,e.settings.stateClosed),u(s,e.settings.stateOpened),s.dispatchEvent(new CustomEvent(e.settings.customEventPrefix+"toModal",{bubbles:!0})),Promise.resolve(s)):Promise.resolve(e.drawerNotFound(t))}catch(t){return Promise.reject(t)}},E=function(){function t(t){this.mediaQueryLists=[],this.parent=t,this.__check=this.check.bind(this)}var e=t.prototype;return e.init=function(){var t=this;document.querySelectorAll("[data-"+this.parent.settings.dataBreakpoint+"]").forEach(function(e){var s=e.getAttribute("data-"+t.parent.settings.dataDrawer),n=e.getAttribute("data-"+t.parent.settings.dataBreakpoint),i=window.matchMedia("(min-width:"+(t.parent.settings.breakpoints[n]?t.parent.settings.breakpoints[n]:n)+")");t.match(i,e),i.addListener(t.__check),t.mediaQueryLists.push({mql:i,drawer:s})})},e.destroy=function(){var t=this;this.mediaQueryLists&&this.mediaQueryLists.length&&this.mediaQueryLists.forEach(function(e){e.mql.removeListener(t.__check)}),this.mediaQueryLists=null},e.check=function(t){var e=this;void 0===t&&(t=null),this.mediaQueryLists&&this.mediaQueryLists.length&&(this.mediaQueryLists.forEach(function(s){if(!t||t.media==s.mql.media){var n=document.querySelector("[data-"+e.parent.settings.dataDrawer+'="'+s.drawer+'"]');n&&e.match(s.mql,n)}}),document.dispatchEvent(new CustomEvent(this.parent.settings.customEventPrefix+"breakpoint",{bubbles:!0})))},e.match=function(t,e){t.matches?b(e,this.parent):w(e,this.parent)},t}();function k(t){if(!this.working){var e=t.target.closest("[data-"+this.settings.dataToggle+"]");if(e){var s=e.getAttribute("data-"+this.settings.dataToggle);return this.memory.trigger=e,this.toggle(s),void t.preventDefault()}if(e=t.target.closest("[data-"+this.settings.dataOpen+"]")){var n=e.getAttribute("data-"+this.settings.dataOpen);return this.memory.trigger=e,this.open(n),void t.preventDefault()}if(e=t.target.closest("[data-"+this.settings.dataClose+"]")){var i=e.getAttribute("data-"+this.settings.dataClose);if(i)this.memory.trigger=e,this.close(i);else{var r=t.target.closest("[data-"+this.settings.dataDrawer+"]");r&&this.close(r)}t.preventDefault()}else t.target.hasAttribute("data-"+this.settings.dataDrawer)&&this.close(t.target)}}function L(t){if(!this.working&&27==t.keyCode){var e=document.querySelector("."+this.settings.classModal+"."+this.settings.stateOpened);e&&this.close(e)}}function C(t,e){if(!e.stateSave)return _(e);var s=localStorage.getItem(e.stateKey)?JSON.parse(localStorage.getItem(e.stateKey)):{};return(t?[t]:document.querySelectorAll("[data-"+e.dataDrawer+"]")).forEach(function(t){if(!l(t,e.classModal)){var n=t.getAttribute("data-"+e.dataDrawer);s[n]=l(t,e.stateOpened)?e.stateOpened:e.stateClosed}}),localStorage.setItem(e.stateKey,JSON.stringify(s)),s}function _(t){return localStorage.getItem(t.stateKey)&&localStorage.removeItem(t.stateKey),{}}var O=function(){function t(t){this.defaults=y,this.settings=m({},this.defaults,t),this.working=!1,this.memory={},this.state={},this.focusTrap=new o,this.breakpoint=new E(this),this.__handlerClick=k.bind(this),this.__handlerKeyup=L.bind(this),this.settings.autoInit&&this.init()}var c=t.prototype;return c.init=function(t){void 0===t&&(t=null),t&&(this.settings=m({},this.settings,t)),this.stateSet(),this.setTabindex(this.settings.setTabindex),this.breakpoint.init(),document.addEventListener("click",this.__handlerClick,!1),document.addEventListener("touchend",this.__handlerClick,!1),document.addEventListener("keyup",this.__handlerKeyup,!1)},c.destroy=function(){this.breakpoint.destroy(),this.memory={},this.state={},localStorage.removeItem(this.settings.stateKey),document.removeEventListener("click",this.__handlerClick,!1),document.removeEventListener("touchend",this.__handlerClick,!1),document.removeEventListener("keyup",this.__handlerKeyup,!1)},c.getDrawer=function(t){return"string"!=typeof t?t:document.querySelector("[data-"+this.settings.dataDrawer+'="'+t+'"]')},c.drawerNotFound=function(t){return Promise.reject(new Error('Did not find drawer with key: "'+t+'"'))},c.setTabindex=function(t){void 0===t&&(t=!0),n(t,"\n      [data-"+this.settings.dataDrawer+"]\n      [data-"+this.settings.dataDialog+"]\n    ")},c.stateSet=function(){this.state=function(t){if(!t.stateSave)return _(t);if(!localStorage.getItem(t.stateKey))return C(null,t);var e=JSON.parse(localStorage.getItem(t.stateKey));return Object.keys(e).forEach(function(s){var n=document.querySelector("[data-"+t.dataDrawer+'="'+s+'"]');n&&(e[s]==t.stateOpened?i(n,t.stateOpened):u(n,t.stateOpened))}),e}(this.settings)},c.stateSave=function(t){void 0===t&&(t=null),this.state=C(t,this.settings)},c.stateClear=function(){this.state=_(this.settings)},c.switchToDefault=function(t){return b(t,this)},c.switchToModal=function(t){return w(t,this)},c.toggle=function(t){try{var e=this.getDrawer(t);if(!e)return Promise.resolve(this.drawerNotFound(t));var s=l(e,this.settings.stateOpened);return Promise.resolve(s?this.close(e):this.open(e))}catch(t){return Promise.reject(t)}},c.open=function(t){try{var n=this,i=n.getDrawer(t);if(!i)return Promise.resolve(n.drawerNotFound(t));if(l(i,n.settings.stateOpened))return r(i,n.settings),Promise.resolve(i);n.working=!0;var a=l(i,n.settings.classModal);return a&&s(!0,n.settings.selectorOverflow),Promise.resolve(h(i,n.settings)).then(function(){return n.stateSave(i),a&&(n.focusTrap.init(i),e(!0,n.settings.selectorInert)),r(i,n.settings),i.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"opened",{bubbles:!0})),n.working=!1,i})}catch(t){return Promise.reject(t)}},c.close=function(t){try{var n=this,i=n.getDrawer(t);return i?l(i,n.settings.stateOpened)?(n.working=!0,l(i,n.settings.classModal)&&(e(!1,n.settings.selectorInert),s(!1,n.settings.selectorOverflow)),Promise.resolve(f(i,n.settings)).then(function(){return n.stateSave(i),a(n),n.focusTrap.destroy(),i.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"closed",{bubbles:!0})),n.working=!1,i})):Promise.resolve(i):Promise.resolve(n.drawerNotFound(t))}catch(t){return Promise.reject(t)}},t}(),S={autoInit:!1,dataModal:"modal",dataDialog:"modal-dialog",dataOpen:"modal-open",dataClose:"modal-close",dataFocus:"modal-focus",dataRequired:"modal-required",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",selectorInert:null,selectorOverflow:"body",customEventPrefix:"modal:",moveModals:{ref:null,type:null},setTabindex:!0,transition:!0},P=function(t){try{var e,s=function(s){return e?s:t.target.closest("[data-"+n.settings.dataClose+"]")?(t.preventDefault(),void n.close()):void(t.target.hasAttribute("data-"+n.settings.dataModal)&&!t.target.hasAttribute("data-"+n.settings.dataRequired)&&n.close())},n=this;if(n.working)return Promise.resolve();var i=t.target.closest("[data-"+n.settings.dataOpen+"]"),r=function(){if(i){t.preventDefault();var s=i.getAttribute("data-"+n.settings.dataOpen),r=t.target.closest("[data-"+n.settings.dataModal+"]");return r||(n.memory.trigger=i),Promise.resolve(n.close(!r)).then(function(){n.open(s),e=1})}}();return Promise.resolve(r&&r.then?r.then(s):s(r))}catch(t){return Promise.reject(t)}};function x(t){if(!this.working&&("Escape"===t.key||27===t.keyCode)){var e=document.querySelector("[data-"+this.settings.dataModal+"]."+this.settings.stateOpened);e&&!e.hasAttribute("data-"+this.settings.dataRequired)&&this.close()}}var A=function(){function t(t){this.defaults=S,this.settings=m({},this.defaults,t),this.working=!1,this.memory={},this.focusTrap=new o,this.__handlerClick=P.bind(this),this.__handlerKeyup=x.bind(this),this.settings.autoInit&&this.init()}var c=t.prototype;return c.init=function(t){void 0===t&&(t=null),t&&(this.settings=m({},this.settings,t)),this.moveModals(),this.setTabindex(this.settings.setTabindex),this.setInitialState(),document.addEventListener("click",this.__handlerClick,!1),document.addEventListener("touchend",this.__handlerClick,!1),document.addEventListener("keyup",this.__handlerKeyup,!1)},c.destroy=function(){this.memory={},document.removeEventListener("click",this.__handlerClick,!1),document.removeEventListener("touchend",this.__handlerClick,!1),document.removeEventListener("keyup",this.__handlerKeyup,!1)},c.getModal=function(t){return"string"!=typeof t?t:document.querySelector("[data-"+this.settings.dataModal+'="'+t+'"]')},c.modalNotFound=function(t){return Promise.reject(new Error('Did not find modal with key: "'+t+'"'))},c.setTabindex=function(t){void 0===t&&(t=!0),n(t,"\n      [data-"+this.settings.dataModal+"]\n      [data-"+this.settings.dataDialog+"]\n    ")},c.setInitialState=function(){var t;t=this,document.querySelectorAll("[data-"+t.settings.dataModal+"]").forEach(function(n){n.classList.contains(t.settings.stateOpened)&&(e(!1,t.settings.selectorInert),s(!1,t.settings.selectorOverflow),a(t),t.focusTrap.destroy()),u(n,t.settings.stateOpened,t.settings.stateOpening,t.settings.stateClosing),i(n,t.settings.stateClosed)})},c.moveModals=function(t,e){void 0===t&&(t=this.settings.moveModals.type),void 0===e&&(e=this.settings.moveModals.ref);var s=document.querySelectorAll("[data-"+this.settings.dataModal+"]");s.length&&d(s,t,e)},c.open=function(t){try{var n=this,i=n.getModal(t);return i?l(i,n.settings.stateClosed)?(n.working=!0,s(!0,n.settings.selectorOverflow),Promise.resolve(h(i,n.settings)).then(function(){return n.focusTrap.init(i),r(i,n.settings),e(!0,n.settings.selectorInert),i.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"opened",{bubbles:!0})),n.working=!1,i})):Promise.resolve(i):Promise.resolve(n.modalNotFound(t))}catch(t){return Promise.reject(t)}},c.close=function(t){void 0===t&&(t=!0);try{var n=this,i=document.querySelector("[data-"+n.settings.dataModal+"]."+n.settings.stateOpened);return i?(n.working=!0,e(!1,n.settings.selectorInert),s(!1,n.settings.selectorOverflow),Promise.resolve(f(i,n.settings)).then(function(){return t&&a(n),n.focusTrap.destroy(),i.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"closed",{bubbles:!0})),n.working=!1,i})):Promise.resolve(i)}catch(t){return Promise.reject(t)}},t}();t.Checkbox=p,t.Drawer=O,t.Modal=A,t.core=v});
//# sourceMappingURL=scripts.umd.js.map
