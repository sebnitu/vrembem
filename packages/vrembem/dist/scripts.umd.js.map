{"version":3,"file":"scripts.umd.js","sources":["../../core/src/js/accessibility.js","../../core/src/js/addClass.js","../../core/src/js/camelCase.js","../../core/src/js/focus.js","../../core/src/js/getElement.js","../../core/src/js/hasClass.js","../../core/src/js/hyphenCase.js","../../core/src/js/moveElement.js","../../core/src/js/removeClass.js","../../core/src/js/toggleClass.js","../../core/src/js/transition.js","../../core/src/js/variables.js","../../checkbox/index.js","../../drawer/src/js/defaults.js","../../drawer/src/js/switchTo.js","../../drawer/src/js/breakpoint.js","../../drawer/src/js/handlers.js","../../drawer/src/js/state.js","../../drawer/index.js","../../core/dist/scripts.esm.js","../../modal/src/js/defaults.js","../../modal/src/js/handlers.js","../../modal/src/js/initialState.js","../../modal/index.js"],"sourcesContent":["export const setInert = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\n\nexport const setOverflowHidden = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\n\nexport const setTabindex = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n","/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\n\nexport const addClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.add(...cl);\n  });\n};\n","/**\n * Takes a hyphen cased string and converts it to camel case\n * ---\n * @param {String } str - the string to convert to camel case\n * @returns {Boolean} - returns a camel cased string\n */\n\nexport const camelCase = (str) => {\n  return str.replace(/-([a-z])/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\n","export const focusTarget = (target, settings) => {\n  const innerFocus = target.querySelector(\n    `[data-${settings.dataFocus}]`\n  );\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    const innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\n\nexport const focusTrigger = (obj = null) => {\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\n\nexport class FocusTrap {\n  constructor() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  }\n\n  destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  }\n\n  handlerFocusTrap(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (!isTab) return;\n    if (event.shiftKey) {\n      if (\n        document.activeElement === this.focusableFirst ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (\n        document.activeElement === this.focusableLast ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  handlerFocusLock(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (isTab) event.preventDefault();\n  }\n\n  getFocusable() {\n    const focusable = [];\n    const initFocus = document.activeElement;\n    const initScrollTop = (this.inner) ? this.inner.scrollTop : 0;\n\n    this.target.querySelectorAll(`\n      a[href]:not([disabled]),\n      button:not([disabled]),\n      textarea:not([disabled]),\n      input[type=\"text\"]:not([disabled]),\n      input[type=\"radio\"]:not([disabled]),\n      input[type=\"checkbox\"]:not([disabled]),\n      select:not([disabled]),\n      [tabindex]:not([tabindex=\"-1\"])\n    `).forEach((el) => {\n      el.focus();\n      if (el === document.activeElement) {\n        focusable.push(el);\n      }\n    });\n\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  }\n}\n","/**\n * Get an element(s) from a selector or return value if not a string\n * ---\n * @param {String} selector - Selector to query\n * @param {Boolean} single - Whether to return a single or all matches\n */\n\nexport const getElement = function (selector, single = 0) {\n  if (typeof selector != 'string') return selector;\n  return (single) ?\n    document.querySelector(selector) :\n    document.querySelectorAll(selector);\n};\n","/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\n\nexport const hasClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el = [].slice.call(el);\n\n  return cl.some((cl) => {\n    return el.some((el) => {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n","/**\n * Takes a camel cased string and converts it to hyphen case\n * ---\n * @param {String } str - the string to convert to hyphen case\n * @returns {Boolean} - returns a hyphen cased string\n */\n\nexport const hyphenCase = (str) => {\n  return str.replace(/([a-z][A-Z])/g, function (g) {\n    return g[0] + '-' + g[1].toLowerCase();\n  });\n};\n","import { getElement } from './getElement';\n\n/**\n * Moves element(s) in the DOM based on a reference and move type\n * ---\n * @param {String} target - The element(s) to move\n * @param {String} type - Move type can be 'after', 'before', 'append' or 'prepend'\n * @param {String} reference - The reference element the move is relative to\n */\n\nexport function moveElement(target, type, reference = false) {\n  if (reference) {\n    const els = getElement(target);\n    if (!els.length) throw new Error(`Move target element \"${target}\" not found!`);\n    const ref = getElement(reference, 1);\n    if (!ref) throw new Error(`Move reference element \"${reference}\" not found!`);\n    els.forEach((el) => {\n      switch (type) {\n        case 'after':\n          ref.after(el);\n          return { ref, el, type };\n        case 'before':\n          ref.before(el);\n          return { ref, el, type };\n        case 'append':\n          ref.append(el);\n          return { ref, el, type };\n        case 'prepend':\n          ref.prepend(el);\n          return { ref, el, type };\n        default:\n          throw new Error(`Move type \"${type}\" does not exist!`);\n      }\n    });\n  }\n}\n","/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\n\nexport const removeClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.remove(...cl);\n  });\n};\n","/**\n * Toggle a class or classes on an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to toggle class(es) on\n * @param {String || Array} cl - Class(es) to toggle\n */\n\nexport const toggleClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    cl.forEach((cl) => {\n      el.classList.toggle(cl);\n    });\n  });\n};\n","export const openTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\n\nexport const closeTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n","export const breakpoints = {\n  xs: '480px',\n  sm: '620px',\n  md: '760px',\n  lg: '990px',\n  xl: '1380px'\n};\n","export default class Checkbox {\n  constructor(options) {\n    this.defaults = {\n      autoInit: false,\n      stateAttr: 'aria-checked',\n      stateValue: 'mixed'\n    };\n    this.settings = { ...this.defaults, ...options };\n    this.__handlerClick = this.handlerClick.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    const selector = `[${this.settings.stateAttr}=\"${this.settings.stateValue}\"]`;\n    const mixed = document.querySelectorAll(selector);\n    this.setIndeterminate(mixed);\n    document.addEventListener('click', this.__handlerClick, false);\n  }\n\n  destroy() {\n    document.removeEventListener('click', this.__handlerClick, false);\n  }\n\n  handlerClick(event) {\n    const selector = `[${this.settings.stateAttr}=\"${this.settings.stateValue}\"]`;\n    const el = event.target.closest(selector);\n    if (!el) return;\n    this.removeAriaState(el);\n    this.setIndeterminate(el);\n  }\n\n  setAriaState(el, value = this.settings.stateValue) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      el.setAttribute(this.settings.stateAttr, value);\n    });\n  }\n\n  removeAriaState(el) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      el.removeAttribute(this.settings.stateAttr);\n    });\n  }\n\n  setIndeterminate(el) {\n    el = (el.forEach) ? el : [el];\n    el.forEach((el) => {\n      if (el.hasAttribute(this.settings.stateAttr)) {\n        el.indeterminate = true;\n      } else {\n        el.indeterminate = false;\n      }\n    });\n  }\n}\n","import { breakpoints } from '@vrembem/core/index';\n\nexport default {\n  autoInit: false,\n\n  // Data attributes\n  dataDrawer: 'drawer',\n  dataDialog: 'drawer-dialog',\n  dataToggle: 'drawer-toggle',\n  dataOpen: 'drawer-open',\n  dataClose: 'drawer-close',\n  dataBreakpoint: 'drawer-breakpoint',\n  dataFocus: 'drawer-focus',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Classes\n  classModal: 'drawer_modal',\n\n  // Selectors\n  selectorInert: null,\n  selectorOverflow: null,\n\n  // Feature toggles\n  breakpoints: breakpoints,\n  customEventPrefix: 'drawer:',\n  stateSave: true,\n  stateKey: 'DrawerState',\n  setTabindex: true,\n  transition: true\n};\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\n\nexport async function switchToModal(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (hasClass(drawer, obj.settings.classModal)) return;\n\n  // Enable modal state\n  addClass(drawer, obj.settings.classModal);\n  addClass(drawer, obj.settings.stateClosed);\n  removeClass(drawer, obj.settings.stateOpened);\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toModal', {\n    bubbles: true\n  }));\n  return drawer;\n}\n\nexport async function switchToDefault(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (!hasClass(drawer, obj.settings.classModal)) return;\n\n  // Tear down modal state\n  setInert(false, obj.settings.selectorInert);\n  setOverflowHidden(false, obj.settings.selectorOverflow);\n  removeClass(drawer, obj.settings.classModal);\n  obj.focusTrap.destroy();\n\n  // Restore drawers saved state\n  drawerKey = drawer.getAttribute(`data-${obj.settings.dataDrawer}`);\n  const drawerState = obj.state[drawerKey];\n  if (drawerState == obj.settings.stateOpened) {\n    addClass(drawer, obj.settings.stateOpened);\n    removeClass(drawer, obj.settings.stateClosed);\n  }\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toDefault', {\n    bubbles: true\n  }));\n  return drawer;\n}\n","import { switchToDefault, switchToModal } from './switchTo';\n\nexport class Breakpoint {\n  constructor(parent) {\n    this.mediaQueryLists = [];\n    this.parent = parent;\n    this.__check = this.check.bind(this);\n  }\n\n  init() {\n    const drawers = document.querySelectorAll(`[data-${this.parent.settings.dataBreakpoint}]`);\n    drawers.forEach((drawer) => {\n      const id = drawer.getAttribute(`data-${this.parent.settings.dataDrawer}`);\n      const key = drawer.getAttribute(`data-${this.parent.settings.dataBreakpoint}`);\n      const bp = this.parent.settings.breakpoints[key] ? this.parent.settings.breakpoints[key] : key;\n      const mql = window.matchMedia('(min-width:' + bp + ')');\n      this.match(mql, drawer);\n      mql.addListener(this.__check);\n      this.mediaQueryLists.push({\n        'mql': mql,\n        'drawer': id\n      });\n    });\n  }\n\n  destroy() {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        item.mql.removeListener(this.__check);\n      });\n    }\n    this.mediaQueryLists = null;\n  }\n\n  check(event = null) {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        // If an event is passed, filter out drawers that don't match the query\n        // If event is null, run all drawers through match\n        let filter = (event) ? event.media == item.mql.media : true;\n        if (!filter) return;\n        const drawer = document.querySelector(\n          `[data-${this.parent.settings.dataDrawer}=\"${item.drawer}\"]`\n        );\n        if (drawer) this.match(item.mql, drawer);\n      });\n      document.dispatchEvent(new CustomEvent(this.parent.settings.customEventPrefix + 'breakpoint', {\n        bubbles: true\n      }));\n    }\n  }\n\n  match(mql, drawer) {\n    if (mql.matches) {\n      switchToDefault(drawer, this.parent);\n    } else {\n      switchToModal(drawer, this.parent);\n    }\n  }\n}\n","export function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Toggle data trigger\n  let trigger = event.target.closest(`[data-${this.settings.dataToggle}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataToggle}`);\n    this.memory.trigger = trigger;\n    this.toggle(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Open data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    this.memory.trigger = trigger;\n    this.open(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Close data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataClose}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataClose}`);\n    if (selector) {\n      this.memory.trigger = trigger;\n      this.close(selector);\n    } else {\n      const target = event.target.closest(`[data-${this.settings.dataDrawer}]`);\n      if (target) this.close(target);\n    }\n    event.preventDefault();\n    return;\n  }\n\n  // Screen modal trigger\n  if (event.target.hasAttribute(`data-${this.settings.dataDrawer}`)) {\n    this.close(event.target);\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.keyCode == 27) {\n    const target = document.querySelector(\n      `.${this.settings.classModal}.${this.settings.stateOpened}`\n    );\n    if (target) {\n      this.close(target);\n    }\n  }\n}\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\n\nexport function stateSet(settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // If there isn't an existing state to set\n  if (!localStorage.getItem(settings.stateKey))\n    return stateSave(null, settings);\n\n  // Set the existing state\n  const state = JSON.parse(localStorage.getItem(settings.stateKey));\n  Object.keys(state).forEach((key) => {\n    const item = document.querySelector(\n      `[data-${settings.dataDrawer}=\"${key}\"]`\n    );\n    if (!item) return;\n    (state[key] == settings.stateOpened) ?\n      addClass(item, settings.stateOpened) :\n      removeClass(item, settings.stateOpened);\n  });\n  return state;\n}\n\nexport function stateSave(target, settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // Get the currently saved object if it exists\n  const state = (localStorage.getItem(settings.stateKey)) ?\n    JSON.parse(localStorage.getItem(settings.stateKey)) : {};\n\n  // Are we saving a single target or the entire suite?\n  const drawers = (target) ? [target] :\n    document.querySelectorAll(`[data-${settings.dataDrawer}]`);\n\n  // Loop through drawers and save their states\n  drawers.forEach((el) => {\n    if (hasClass(el, settings.classModal)) return;\n    const drawerKey = el.getAttribute(`data-${settings.dataDrawer}`);\n    state[drawerKey] = (hasClass(el, settings.stateOpened)) ?\n      settings.stateOpened : settings.stateClosed;\n  });\n\n  // Save to localStorage and return the state\n  localStorage.setItem(settings.stateKey, JSON.stringify(state));\n  return state;\n}\n\nexport function stateClear(settings) {\n  if (localStorage.getItem(settings.stateKey)) {\n    localStorage.removeItem(settings.stateKey);\n  }\n  return {};\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { Breakpoint } from './src/js/breakpoint';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { stateClear, stateSave, stateSet } from './src/js/state';\nimport { switchToDefault, switchToModal } from './src/js/switchTo';\n\nexport default class Drawer {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.state = {};\n    this.focusTrap = new FocusTrap();\n    this.breakpoint = new Breakpoint(this);\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.stateSet();\n    this.setTabindex(this.settings.setTabindex);\n    this.breakpoint.init();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.breakpoint.destroy();\n    this.memory = {};\n    this.state = {};\n    localStorage.removeItem(this.settings.stateKey);\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getDrawer(drawerKey) {\n    if (typeof drawerKey !== 'string') return drawerKey;\n    return document.querySelector(\n      `[data-${this.settings.dataDrawer}=\"${drawerKey}\"]`\n    );\n  }\n\n  drawerNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find drawer with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataDrawer}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  /**\n   * Save state functionality\n   */\n\n  stateSet() {\n    this.state = stateSet(this.settings);\n  }\n\n  stateSave(target = null) {\n    this.state = stateSave(target, this.settings);\n  }\n\n  stateClear() {\n    this.state = stateClear(this.settings);\n  }\n\n  /**\n   * SwitchTo functionality\n   */\n\n  switchToDefault(drawerKey) {\n    return switchToDefault(drawerKey, this);\n  }\n\n  switchToModal(drawerKey) {\n    return switchToModal(drawerKey, this);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async toggle(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    const isOpen = hasClass(drawer, this.settings.stateOpened);\n    if (!isOpen) {\n      return this.open(drawer);\n    } else {\n      return this.close(drawer);\n    }\n  }\n\n  async open(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (!hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      const isModal = hasClass(drawer, this.settings.classModal);\n      if (isModal) {\n        setOverflowHidden(true, this.settings.selectorOverflow);\n      }\n      await openTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      if (isModal) {\n        this.focusTrap.init(drawer);\n        setInert(true, this.settings.selectorInert);\n      }\n      focusTarget(drawer, this.settings);\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      focusTarget(drawer, this.settings);\n      return drawer;\n    }\n  }\n\n  async close(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      if (hasClass(drawer, this.settings.classModal)) {\n        setInert(false, this.settings.selectorInert);\n        setOverflowHidden(false, this.settings.selectorOverflow);\n      }\n      await closeTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      focusTrigger(this);\n      this.focusTrap.destroy();\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      return drawer;\n    }\n  }\n}\n","var setInert = function setInert(state, selector) {\n  if (selector) {\n    var els = document.querySelectorAll(selector);\n    els.forEach(function (el) {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\nvar setOverflowHidden = function setOverflowHidden(state, selector) {\n  if (selector) {\n    var els = document.querySelectorAll(selector);\n    els.forEach(function (el) {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\nvar setTabindex = function setTabindex(state, selector) {\n  if (selector) {\n    var els = document.querySelectorAll(selector);\n    els.forEach(function (el) {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n\n/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\nvar addClass = function addClass(el) {\n  var _arguments = arguments;\n  el = el.forEach ? el : [el];\n  el.forEach(function (el) {\n    var _el$classList;\n\n    (_el$classList = el.classList).add.apply(_el$classList, [].slice.call(_arguments, 1));\n  });\n};\n\n/**\n * Takes a hyphen cased string and converts it to camel case\n * ---\n * @param {String } str - the string to convert to camel case\n * @returns {Boolean} - returns a camel cased string\n */\nvar camelCase = function camelCase(str) {\n  return str.replace(/-([a-z])/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\n\nvar focusTarget = function focusTarget(target, settings) {\n  var innerFocus = target.querySelector(\"[data-\" + settings.dataFocus + \"]\");\n\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    var innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\nvar focusTrigger = function focusTrigger(obj) {\n  if (obj === void 0) {\n    obj = null;\n  }\n\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\nvar FocusTrap = /*#__PURE__*/function () {\n  function FocusTrap() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  var _proto = FocusTrap.prototype;\n\n  _proto.init = function init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  };\n\n  _proto.handlerFocusTrap = function handlerFocusTrap(event) {\n    var isTab = event.key === 'Tab' || event.keyCode === 9;\n    if (!isTab) return;\n\n    if (event.shiftKey) {\n      if (document.activeElement === this.focusableFirst || document.activeElement === this.inner) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (document.activeElement === this.focusableLast || document.activeElement === this.inner) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  };\n\n  _proto.handlerFocusLock = function handlerFocusLock(event) {\n    var isTab = event.key === 'Tab' || event.keyCode === 9;\n    if (isTab) event.preventDefault();\n  };\n\n  _proto.getFocusable = function getFocusable() {\n    var focusable = [];\n    var initFocus = document.activeElement;\n    var initScrollTop = this.inner ? this.inner.scrollTop : 0;\n    this.target.querySelectorAll(\"\\n      a[href]:not([disabled]),\\n      button:not([disabled]),\\n      textarea:not([disabled]),\\n      input[type=\\\"text\\\"]:not([disabled]),\\n      input[type=\\\"radio\\\"]:not([disabled]),\\n      input[type=\\\"checkbox\\\"]:not([disabled]),\\n      select:not([disabled]),\\n      [tabindex]:not([tabindex=\\\"-1\\\"])\\n    \").forEach(function (el) {\n      el.focus();\n\n      if (el === document.activeElement) {\n        focusable.push(el);\n      }\n    });\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  };\n\n  return FocusTrap;\n}();\n\n/**\n * Get an element(s) from a selector or return value if not a string\n * ---\n * @param {String} selector - Selector to query\n * @param {Boolean} single - Whether to return a single or all matches\n */\nvar getElement = function getElement(selector, single) {\n  if (single === void 0) {\n    single = 0;\n  }\n\n  if (typeof selector != 'string') return selector;\n  return single ? document.querySelector(selector) : document.querySelectorAll(selector);\n};\n\n/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\nvar hasClass = function hasClass(el) {\n  el = el.forEach ? el : [el];\n  el = [].slice.call(el);\n  return [].slice.call(arguments, 1).some(function (cl) {\n    return el.some(function (el) {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n\n/**\n * Takes a camel cased string and converts it to hyphen case\n * ---\n * @param {String } str - the string to convert to hyphen case\n * @returns {Boolean} - returns a hyphen cased string\n */\nvar hyphenCase = function hyphenCase(str) {\n  return str.replace(/([a-z][A-Z])/g, function (g) {\n    return g[0] + '-' + g[1].toLowerCase();\n  });\n};\n\n/**\n * Moves element(s) in the DOM based on a reference and move type\n * ---\n * @param {String} target - The element(s) to move\n * @param {String} type - Move type can be 'after', 'before', 'append' or 'prepend'\n * @param {String} reference - The reference element the move is relative to\n */\n\nfunction moveElement(target, type, reference) {\n  if (reference === void 0) {\n    reference = false;\n  }\n\n  if (reference) {\n    var els = getElement(target);\n    if (!els.length) throw new Error(\"Move target element \\\"\" + target + \"\\\" not found!\");\n    var ref = getElement(reference, 1);\n    if (!ref) throw new Error(\"Move reference element \\\"\" + reference + \"\\\" not found!\");\n    els.forEach(function (el) {\n      switch (type) {\n        case 'after':\n          ref.after(el);\n          return {\n            ref: ref,\n            el: el,\n            type: type\n          };\n\n        case 'before':\n          ref.before(el);\n          return {\n            ref: ref,\n            el: el,\n            type: type\n          };\n\n        case 'append':\n          ref.append(el);\n          return {\n            ref: ref,\n            el: el,\n            type: type\n          };\n\n        case 'prepend':\n          ref.prepend(el);\n          return {\n            ref: ref,\n            el: el,\n            type: type\n          };\n\n        default:\n          throw new Error(\"Move type \\\"\" + type + \"\\\" does not exist!\");\n      }\n    });\n  }\n}\n\n/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\nvar removeClass = function removeClass(el) {\n  var _arguments = arguments;\n  el = el.forEach ? el : [el];\n  el.forEach(function (el) {\n    var _el$classList;\n\n    (_el$classList = el.classList).remove.apply(_el$classList, [].slice.call(_arguments, 1));\n  });\n};\n\n/**\n * Toggle a class or classes on an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to toggle class(es) on\n * @param {String || Array} cl - Class(es) to toggle\n */\nvar toggleClass = function toggleClass(el) {\n  var _arguments = arguments;\n  el = el.forEach ? el : [el];\n  el.forEach(function (el) {\n    [].slice.call(_arguments, 1).forEach(function (cl) {\n      el.classList.toggle(cl);\n    });\n  });\n};\n\nvar openTransition = function openTransition(el, settings) {\n  return new Promise(function (resolve) {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\nvar closeTransition = function closeTransition(el, settings) {\n  return new Promise(function (resolve) {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n\nvar breakpoints = {\n  xs: '480px',\n  sm: '620px',\n  md: '760px',\n  lg: '990px',\n  xl: '1380px'\n};\n\nexport { FocusTrap, addClass, breakpoints, camelCase, closeTransition, focusTarget, focusTrigger, getElement, hasClass, hyphenCase, moveElement, openTransition, removeClass, setInert, setOverflowHidden, setTabindex, toggleClass };\n//# sourceMappingURL=scripts.esm.js.map\n","export default {\n  autoInit: false,\n\n  // Data attributes\n  dataModal: 'modal',\n  dataDialog: 'modal-dialog',\n  dataOpen: 'modal-open',\n  dataClose: 'modal-close',\n  dataFocus: 'modal-focus',\n  dataRequired: 'modal-required',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Selector\n  selectorInert: null,\n  selectorOverflow: 'body',\n\n  // Feature toggles\n  customEventPrefix: 'modal:',\n  moveModals: {\n    ref: null,\n    type: null\n  },\n  setTabindex: true,\n  transition: true\n};\n","export async function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Trigger click\n  const trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    event.preventDefault();\n    const modalKey = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    const fromModal = event.target.closest(`[data-${this.settings.dataModal}]`);\n    if (!fromModal) this.memory.trigger = trigger;\n    await this.close(!fromModal);\n    this.open(modalKey);\n    return;\n  }\n\n  // Close click\n  if (event.target.closest(`[data-${this.settings.dataClose}]`)) {\n    event.preventDefault();\n    this.close();\n    return;\n  }\n\n  // Root click\n  if (\n    event.target.hasAttribute(`data-${this.settings.dataModal}`) &&\n    !event.target.hasAttribute(`data-${this.settings.dataRequired}`)\n  ) {\n    this.close();\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.key === 'Escape' || event.keyCode === 27) {\n    const target = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (target && !target.hasAttribute(`data-${this.settings.dataRequired}`)) {\n      this.close();\n    }\n  }\n}\n","import { addClass, removeClass } from '@vrembem/core';\nimport { setInert, setOverflowHidden } from '@vrembem/core';\nimport { focusTrigger } from '@vrembem/core';\n\nexport function setInitialState(obj) {\n  const modals = document.querySelectorAll(`[data-${obj.settings.dataModal}]`);\n  modals.forEach((el) => {\n    if (el.classList.contains(obj.settings.stateOpened)) {\n      setInert(false, obj.settings.selectorInert);\n      setOverflowHidden(false, obj.settings.selectorOverflow);\n      focusTrigger(obj);\n      obj.focusTrap.destroy();\n    }\n    removeClass(el,\n      obj.settings.stateOpened,\n      obj.settings.stateOpening,\n      obj.settings.stateClosing\n    );\n    addClass(el, obj.settings.stateClosed);\n  });\n}\n","import { hasClass } from '@vrembem/core';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core';\nimport { openTransition, closeTransition } from '@vrembem/core';\nimport { moveElement } from '@vrembem/core';\n\nimport defaults from './src/js/defaults';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { setInitialState } from './src/js/initialState';\n\nexport default class Modal {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.focusTrap = new FocusTrap();\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.moveModals();\n    this.setTabindex(this.settings.setTabindex);\n    this.setInitialState();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.memory = {};\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getModal(modalKey) {\n    if (typeof modalKey !== 'string') return modalKey;\n    return document.querySelector(\n      `[data-${this.settings.dataModal}=\"${modalKey}\"]`\n    );\n  }\n\n  modalNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find modal with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataModal}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  setInitialState() {\n    setInitialState(this);\n  }\n\n  moveModals(type = this.settings.moveModals.type, ref = this.settings.moveModals.ref) {\n    const modals = document.querySelectorAll(`[data-${this.settings.dataModal}]`);\n    if (modals.length) moveElement(modals, type, ref);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async open(modalKey) {\n    const modal = this.getModal(modalKey);\n    if (!modal) return this.modalNotFound(modalKey);\n    if (hasClass(modal, this.settings.stateClosed)) {\n      this.working = true;\n      setOverflowHidden(true, this.settings.selectorOverflow);\n      await openTransition(modal, this.settings);\n      this.focusTrap.init(modal);\n      focusTarget(modal, this.settings);\n      setInert(true, this.settings.selectorInert);\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n\n  async close(returnFocus = true) {\n    const modal = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (modal) {\n      this.working = true;\n      setInert(false, this.settings.selectorInert);\n      setOverflowHidden(false, this.settings.selectorOverflow);\n      await closeTransition(modal, this.settings);\n      if (returnFocus) focusTrigger(this);\n      this.focusTrap.destroy();\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n}\n"],"names":["setInert","state","selector","els","document","querySelectorAll","forEach","el","inert","setAttribute","removeAttribute","setOverflowHidden","style","overflow","removeProperty","setTabindex","addClass","classList","add","camelCase","str","replace","g","toUpperCase","focusTarget","target","settings","innerFocus","querySelector","dataFocus","focus","innerElement","focusTrigger","obj","memory","trigger","FocusTrap","__handlerFocusTrap","handlerFocusTrap","bind","init","inner","focusable","getFocusable","length","focusableFirst","focusableLast","addEventListener","handlerFocusLock","destroy","removeEventListener","event","isTab","key","keyCode","shiftKey","activeElement","preventDefault","initFocus","initScrollTop","scrollTop","push","getElement","single","hasClass","slice","call","some","cl","contains","hyphenCase","toLowerCase","moveElement","type","reference","Error","ref","after","before","append","prepend","removeClass","remove","toggleClass","toggle","openTransition","Promise","resolve","transition","stateClosed","stateOpening","_f","stateOpened","closeTransition","stateClosing","breakpoints","xs","sm","md","lg","xl","Checkbox","options","defaults","autoInit","stateAttr","stateValue","__handlerClick","handlerClick","mixed","setIndeterminate","closest","removeAriaState","setAriaState","value","hasAttribute","indeterminate","dataDrawer","dataDialog","dataToggle","dataOpen","dataClose","dataBreakpoint","classModal","selectorInert","selectorOverflow","customEventPrefix","stateSave","stateKey","switchToDefault","drawerKey","drawer","getDrawer","drawerNotFound","focusTrap","getAttribute","drawerState","dispatchEvent","CustomEvent","bubbles","switchToModal","Breakpoint","parent","mediaQueryLists","__check","check","drawers","id","bp","mql","window","matchMedia","match","addListener","item","removeListener","filter","media","matches","working","open","close","handlerKeyup","stateSet","stateClear","localStorage","getItem","JSON","parse","Object","keys","setItem","stringify","removeItem","Drawer","breakpoint","__handlerKeyup","reject","selectorTabindex","isOpen","isModal","dataModal","dataRequired","moveModals","modalKey","fromModal","setInitialState","modals","Modal","getModal","modalNotFound","modal","returnFocus"],"mappings":"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"}