const t=(t,e)=>{e&&document.querySelectorAll(e).forEach(e=>{t?(e.inert=!0,e.setAttribute("aria-hidden",!0)):(e.inert=null,e.removeAttribute("aria-hidden"))})},e=(t,e)=>{e&&document.querySelectorAll(e).forEach(e=>{t?e.style.overflow="hidden":e.style.removeProperty("overflow")})},s=(t,e)=>{e&&document.querySelectorAll(e).forEach(e=>{t?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")})},i=(t,...e)=>{(t=t.forEach?t:[t]).forEach(t=>{t.classList.add(...e)})},a=(t,e)=>{const s=t.querySelector(`[data-${e.dataFocus}]`);if(s)s.focus();else{const e=t.querySelector('[tabindex="-1"]');e&&e.focus()}},n=(t=null)=>{t&&t.memory&&t.memory.trigger&&(t.memory.trigger.focus(),t.memory.trigger=null)};class r{constructor(){this.target=null,this.__handlerFocusTrap=this.handlerFocusTrap.bind(this)}init(t){this.target=t,this.inner=this.target.querySelector('[tabindex="-1"]'),this.focusable=this.getFocusable(),this.focusable.length?(this.focusableFirst=this.focusable[0],this.focusableLast=this.focusable[this.focusable.length-1],this.target.addEventListener("keydown",this.__handlerFocusTrap)):this.target.addEventListener("keydown",this.handlerFocusLock)}destroy(){this.target&&(this.inner=null,this.focusable=null,this.focusableFirst=null,this.focusableLast=null,this.target.removeEventListener("keydown",this.__handlerFocusTrap),this.target.removeEventListener("keydown",this.handlerFocusLock),this.target=null)}handlerFocusTrap(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement!==this.focusableFirst&&document.activeElement!==this.inner||(this.focusableLast.focus(),t.preventDefault()):document.activeElement!==this.focusableLast&&document.activeElement!==this.inner||(this.focusableFirst.focus(),t.preventDefault()))}handlerFocusLock(t){("Tab"===t.key||9===t.keyCode)&&t.preventDefault()}getFocusable(){const t=[],e=document.activeElement,s=this.inner?this.inner.scrollTop:0;return this.target.querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type="text"]:not([disabled]),input[type="radio"]:not([disabled]),input[type="checkbox"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex="-1"])').forEach(e=>{e.focus(),e===document.activeElement&&t.push(e)}),this.inner&&(this.inner.scrollTop=s),e.focus(),t}}const o=function(t,e=0){return"string"!=typeof t?t:e?document.querySelector(t):document.querySelectorAll(t)},d=(t,...e)=>(t=[].slice.call(t=t.forEach?t:[t]),e.some(e=>t.some(t=>{if(t.classList.contains(e))return!0})));function l(t,e,s=!1){if(s){const i=o(t);if(!i.length)throw new Error(`Move target element "${t}" not found!`);const a=o(s,1);if(!a)throw new Error(`Move reference element "${s}" not found!`);i.forEach(t=>{switch(e){case"after":return a.after(t),{ref:a,el:t,type:e};case"before":return a.before(t),{ref:a,el:t,type:e};case"append":return a.append(t),{ref:a,el:t,type:e};case"prepend":return a.prepend(t),{ref:a,el:t,type:e};default:throw new Error(`Move type "${e}" does not exist!`)}})}}const c=(t,...e)=>{(t=t.forEach?t:[t]).forEach(t=>{t.classList.remove(...e)})},h=(t,e)=>new Promise(s=>{e.transition?(t.classList.remove(e.stateClosed),t.classList.add(e.stateOpening),t.addEventListener("transitionend",function i(){t.classList.add(e.stateOpened),t.classList.remove(e.stateOpening),s(t),this.removeEventListener("transitionend",i)})):(t.classList.add(e.stateOpened),t.classList.remove(e.stateClosed),s(t))}),u=(t,e)=>new Promise(s=>{e.transition?(t.classList.add(e.stateClosing),t.classList.remove(e.stateOpened),t.addEventListener("transitionend",function i(){t.classList.remove(e.stateClosing),t.classList.add(e.stateClosed),s(t),this.removeEventListener("transitionend",i)})):(t.classList.add(e.stateClosed),t.classList.remove(e.stateOpened),s(t))}),g={xs:"480px",sm:"620px",md:"760px",lg:"990px",xl:"1380px"};var m={__proto__:null,setInert:t,setOverflowHidden:e,setTabindex:s,addClass:i,camelCase:t=>t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}),focusTarget:a,focusTrigger:n,FocusTrap:r,getElement:o,hasClass:d,hyphenCase:t=>t.replace(/([a-z][A-Z])/g,function(t){return t[0]+"-"+t[1].toLowerCase()}),moveElement:l,removeClass:c,toggleClass:(t,...e)=>{(t=t.forEach?t:[t]).forEach(t=>{e.forEach(e=>{t.classList.toggle(e)})})},openTransition:h,closeTransition:u,breakpoints:g};class f{constructor(t){this.defaults={autoInit:!1,stateAttr:"aria-checked",stateValue:"mixed"},this.settings={...this.defaults,...t},this.__handlerClick=this.handlerClick.bind(this),this.settings.autoInit&&this.init()}init(t=null){t&&(this.settings={...this.settings,...t});const e=document.querySelectorAll(`[${this.settings.stateAttr}="${this.settings.stateValue}"]`);this.setIndeterminate(e),document.addEventListener("click",this.__handlerClick,!1)}destroy(){document.removeEventListener("click",this.__handlerClick,!1)}handlerClick(t){const e=t.target.closest(`[${this.settings.stateAttr}="${this.settings.stateValue}"]`);e&&(this.removeAriaState(e),this.setIndeterminate(e))}setAriaState(t,e=this.settings.stateValue){(t=t.forEach?t:[t]).forEach(t=>{t.setAttribute(this.settings.stateAttr,e)})}removeAriaState(t){(t=t.forEach?t:[t]).forEach(t=>{t.removeAttribute(this.settings.stateAttr)})}setIndeterminate(t){(t=t.forEach?t:[t]).forEach(t=>{t.indeterminate=!!t.hasAttribute(this.settings.stateAttr)})}}var p={autoInit:!1,dataDrawer:"drawer",dataDialog:"drawer-dialog",dataToggle:"drawer-toggle",dataOpen:"drawer-open",dataClose:"drawer-close",dataBreakpoint:"drawer-breakpoint",dataFocus:"drawer-focus",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",classModal:"drawer_modal",selectorInert:null,selectorOverflow:null,breakpoints:g,customEventPrefix:"drawer:",stateSave:!0,stateKey:"DrawerState",setTabindex:!0,transition:!0};async function v(t,e){const s=e.getDrawer(t);return s?d(s,e.settings.classModal)?void 0:(i(s,e.settings.classModal),i(s,e.settings.stateClosed),c(s,e.settings.stateOpened),s.dispatchEvent(new CustomEvent(e.settings.customEventPrefix+"toModal",{bubbles:!0})),s):e.drawerNotFound(t)}async function y(s,a){const n=a.getDrawer(s);return n?d(n,a.settings.classModal)?(t(!1,a.settings.selectorInert),e(!1,a.settings.selectorOverflow),c(n,a.settings.classModal),a.focusTrap.destroy(),s=n.getAttribute("data-"+a.settings.dataDrawer),a.state[s]==a.settings.stateOpened&&(i(n,a.settings.stateOpened),c(n,a.settings.stateClosed)),n.dispatchEvent(new CustomEvent(a.settings.customEventPrefix+"toDefault",{bubbles:!0})),n):void 0:a.drawerNotFound(s)}class b{constructor(t){this.mediaQueryLists=[],this.parent=t,this.__check=this.check.bind(this)}init(){document.querySelectorAll(`[data-${this.parent.settings.dataBreakpoint}]`).forEach(t=>{const e=t.getAttribute("data-"+this.parent.settings.dataDrawer),s=t.getAttribute("data-"+this.parent.settings.dataBreakpoint),i=window.matchMedia("(min-width:"+(this.parent.settings.breakpoints[s]?this.parent.settings.breakpoints[s]:s)+")");this.match(i,t),i.addListener(this.__check),this.mediaQueryLists.push({mql:i,drawer:e})})}destroy(){this.mediaQueryLists&&this.mediaQueryLists.length&&this.mediaQueryLists.forEach(t=>{t.mql.removeListener(this.__check)}),this.mediaQueryLists=null}check(t=null){this.mediaQueryLists&&this.mediaQueryLists.length&&(this.mediaQueryLists.forEach(e=>{if(t&&t.media!=e.mql.media)return;const s=document.querySelector(`[data-${this.parent.settings.dataDrawer}="${e.drawer}"]`);s&&this.match(e.mql,s)}),document.dispatchEvent(new CustomEvent(this.parent.settings.customEventPrefix+"breakpoint",{bubbles:!0})))}match(t,e){t.matches?y(e,this.parent):v(e,this.parent)}}function w(t){if(this.working)return;let e=t.target.closest(`[data-${this.settings.dataToggle}]`);if(e){const s=e.getAttribute("data-"+this.settings.dataToggle);return this.memory.trigger=e,this.toggle(s),void t.preventDefault()}if(e=t.target.closest(`[data-${this.settings.dataOpen}]`),e){const s=e.getAttribute("data-"+this.settings.dataOpen);return this.memory.trigger=e,this.open(s),void t.preventDefault()}if(e=t.target.closest(`[data-${this.settings.dataClose}]`),e){const s=e.getAttribute("data-"+this.settings.dataClose);if(s)this.memory.trigger=e,this.close(s);else{const e=t.target.closest(`[data-${this.settings.dataDrawer}]`);e&&this.close(e)}t.preventDefault()}else t.target.hasAttribute("data-"+this.settings.dataDrawer)&&this.close(t.target)}function E(t){if(!this.working&&27==t.keyCode){const t=document.querySelector(`.${this.settings.classModal}.${this.settings.stateOpened}`);t&&this.close(t)}}function k(t,e){if(!e.stateSave)return L(e);const s=localStorage.getItem(e.stateKey)?JSON.parse(localStorage.getItem(e.stateKey)):{};return(t?[t]:document.querySelectorAll(`[data-${e.dataDrawer}]`)).forEach(t=>{if(d(t,e.classModal))return;const i=t.getAttribute("data-"+e.dataDrawer);s[i]=d(t,e.stateOpened)?e.stateOpened:e.stateClosed}),localStorage.setItem(e.stateKey,JSON.stringify(s)),s}function L(t){return localStorage.getItem(t.stateKey)&&localStorage.removeItem(t.stateKey),{}}class C{constructor(t){this.defaults=p,this.settings={...this.defaults,...t},this.working=!1,this.memory={},this.state={},this.focusTrap=new r,this.breakpoint=new b(this),this.__handlerClick=w.bind(this),this.__handlerKeyup=E.bind(this),this.settings.autoInit&&this.init()}init(t=null){t&&(this.settings={...this.settings,...t}),this.stateSet(),this.setTabindex(this.settings.setTabindex),this.breakpoint.init(),document.addEventListener("click",this.__handlerClick,!1),document.addEventListener("touchend",this.__handlerClick,!1),document.addEventListener("keyup",this.__handlerKeyup,!1)}destroy(){this.breakpoint.destroy(),this.memory={},this.state={},localStorage.removeItem(this.settings.stateKey),document.removeEventListener("click",this.__handlerClick,!1),document.removeEventListener("touchend",this.__handlerClick,!1),document.removeEventListener("keyup",this.__handlerKeyup,!1)}getDrawer(t){return"string"!=typeof t?t:document.querySelector(`[data-${this.settings.dataDrawer}="${t}"]`)}drawerNotFound(t){return Promise.reject(new Error(`Did not find drawer with key: "${t}"`))}setTabindex(t=!0){s(t,`\n      [data-${this.settings.dataDrawer}]\n      [data-${this.settings.dataDialog}]\n    `)}stateSet(){this.state=function(t){if(!t.stateSave)return L(t);if(!localStorage.getItem(t.stateKey))return k(null,t);const e=JSON.parse(localStorage.getItem(t.stateKey));return Object.keys(e).forEach(s=>{const a=document.querySelector(`[data-${t.dataDrawer}="${s}"]`);a&&(e[s]==t.stateOpened?i(a,t.stateOpened):c(a,t.stateOpened))}),e}(this.settings)}stateSave(t=null){this.state=k(t,this.settings)}stateClear(){this.state=L(this.settings)}switchToDefault(t){return y(t,this)}switchToModal(t){return v(t,this)}async toggle(t){const e=this.getDrawer(t);return e?d(e,this.settings.stateOpened)?this.close(e):this.open(e):this.drawerNotFound(t)}async open(s){const i=this.getDrawer(s);if(!i)return this.drawerNotFound(s);if(d(i,this.settings.stateOpened))return a(i,this.settings),i;{this.working=!0;const s=d(i,this.settings.classModal);return s&&e(!0,this.settings.selectorOverflow),await h(i,this.settings),this.stateSave(i),s&&(this.focusTrap.init(i),t(!0,this.settings.selectorInert)),a(i,this.settings),i.dispatchEvent(new CustomEvent(this.settings.customEventPrefix+"opened",{bubbles:!0})),this.working=!1,i}}async close(s){const i=this.getDrawer(s);return i?d(i,this.settings.stateOpened)?(this.working=!0,d(i,this.settings.classModal)&&(t(!1,this.settings.selectorInert),e(!1,this.settings.selectorOverflow)),await u(i,this.settings),this.stateSave(i),n(this),this.focusTrap.destroy(),i.dispatchEvent(new CustomEvent(this.settings.customEventPrefix+"closed",{bubbles:!0})),this.working=!1,i):i:this.drawerNotFound(s)}}var _={autoInit:!1,dataModal:"modal",dataDialog:"modal-dialog",dataOpen:"modal-open",dataClose:"modal-close",dataFocus:"modal-focus",dataRequired:"modal-required",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",selectorInert:null,selectorOverflow:"body",customEventPrefix:"modal:",moveModals:{ref:null,type:null},setTabindex:!0,transition:!0};async function O(t){if(this.working)return;const e=t.target.closest(`[data-${this.settings.dataOpen}]`);if(e){t.preventDefault();const s=e.getAttribute("data-"+this.settings.dataOpen),i=t.target.closest(`[data-${this.settings.dataModal}]`);return i||(this.memory.trigger=e),await this.close(!i),void this.open(s)}if(t.target.closest(`[data-${this.settings.dataClose}]`))return t.preventDefault(),void this.close();!t.target.hasAttribute("data-"+this.settings.dataModal)||t.target.hasAttribute("data-"+this.settings.dataRequired)||this.close()}function S(t){if(!this.working&&("Escape"===t.key||27===t.keyCode)){const t=document.querySelector(`[data-${this.settings.dataModal}].${this.settings.stateOpened}`);t&&!t.hasAttribute("data-"+this.settings.dataRequired)&&this.close()}}class A{constructor(t){this.defaults=_,this.settings={...this.defaults,...t},this.working=!1,this.memory={},this.focusTrap=new r,this.__handlerClick=O.bind(this),this.__handlerKeyup=S.bind(this),this.settings.autoInit&&this.init()}init(t=null){t&&(this.settings={...this.settings,...t}),this.moveModals(),this.setTabindex(this.settings.setTabindex),this.setInitialState(),document.addEventListener("click",this.__handlerClick,!1),document.addEventListener("touchend",this.__handlerClick,!1),document.addEventListener("keyup",this.__handlerKeyup,!1)}destroy(){this.memory={},document.removeEventListener("click",this.__handlerClick,!1),document.removeEventListener("touchend",this.__handlerClick,!1),document.removeEventListener("keyup",this.__handlerKeyup,!1)}getModal(t){return"string"!=typeof t?t:document.querySelector(`[data-${this.settings.dataModal}="${t}"]`)}modalNotFound(t){return Promise.reject(new Error(`Did not find modal with key: "${t}"`))}setTabindex(t=!0){s(t,`\n      [data-${this.settings.dataModal}]\n      [data-${this.settings.dataDialog}]\n    `)}setInitialState(){var s;s=this,document.querySelectorAll(`[data-${s.settings.dataModal}]`).forEach(a=>{a.classList.contains(s.settings.stateOpened)&&(t(!1,s.settings.selectorInert),e(!1,s.settings.selectorOverflow),n(s),s.focusTrap.destroy()),c(a,s.settings.stateOpened,s.settings.stateOpening,s.settings.stateClosing),i(a,s.settings.stateClosed)})}moveModals(t=this.settings.moveModals.type,e=this.settings.moveModals.ref){const s=document.querySelectorAll(`[data-${this.settings.dataModal}]`);s.length&&l(s,t,e)}async open(s){const i=this.getModal(s);return i?d(i,this.settings.stateClosed)?(this.working=!0,e(!0,this.settings.selectorOverflow),await h(i,this.settings),this.focusTrap.init(i),a(i,this.settings),t(!0,this.settings.selectorInert),i.dispatchEvent(new CustomEvent(this.settings.customEventPrefix+"opened",{bubbles:!0})),this.working=!1,i):i:this.modalNotFound(s)}async close(s=!0){const i=document.querySelector(`[data-${this.settings.dataModal}].${this.settings.stateOpened}`);return i?(this.working=!0,t(!1,this.settings.selectorInert),e(!1,this.settings.selectorOverflow),await u(i,this.settings),s&&n(this),this.focusTrap.destroy(),i.dispatchEvent(new CustomEvent(this.settings.customEventPrefix+"closed",{bubbles:!0})),this.working=!1,i):i}}export{f as Checkbox,C as Drawer,A as Modal,m as core};
//# sourceMappingURL=scripts.modern.js.map
