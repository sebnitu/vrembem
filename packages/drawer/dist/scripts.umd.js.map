{"version":3,"file":"scripts.umd.js","sources":["../../core/src/js/accessibility.js","../../core/src/js/addClass.js","../../core/src/js/focus.js","../../core/src/js/hasClass.js","../../core/src/js/removeClass.js","../src/js/defaults.js","../../core/src/js/variables.js","../src/js/switchTo.js","../src/js/breakpoint.js","../src/js/handlers.js","../src/js/state.js","../index.js","../../core/src/js/transition.js"],"sourcesContent":["export const setInert = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\n\nexport const setOverflowHidden = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\n\nexport const setTabindex = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n","/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\n\nexport const addClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.add(...cl);\n  });\n};\n","export const focusTarget = (target, settings) => {\n  const innerFocus = target.querySelector(\n    `[data-${settings.dataFocus}]`\n  );\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    const innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\n\nexport const focusTrigger = (obj = null) => {\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\n\nexport class FocusTrap {\n  constructor() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  }\n\n  destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  }\n\n  handlerFocusTrap(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (!isTab) return;\n    if (event.shiftKey) {\n      if (\n        document.activeElement === this.focusableFirst ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (\n        document.activeElement === this.focusableLast ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  handlerFocusLock(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (isTab) event.preventDefault();\n  }\n\n  getFocusable() {\n    const focusable = [];\n    const initFocus = document.activeElement;\n    const initScrollTop = (this.inner) ? this.inner.scrollTop : 0;\n\n    this.target\n      .querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type=\"text\"]:not([disabled]),input[type=\"radio\"]:not([disabled]),input[type=\"checkbox\"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex=\"-1\"])')\n      .forEach((el) => {\n        el.focus();\n        if (el === document.activeElement) {\n          focusable.push(el);\n        }\n      });\n\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  }\n}\n","/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\n\nexport const hasClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el = [].slice.call(el);\n\n  return cl.some((cl) => {\n    return el.some((el) => {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n","/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\n\nexport const removeClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.remove(...cl);\n  });\n};\n","import { breakpoints } from '@vrembem/core/index';\n\nexport default {\n  autoInit: false,\n\n  // Data attributes\n  dataDrawer: 'drawer',\n  dataDialog: 'drawer-dialog',\n  dataToggle: 'drawer-toggle',\n  dataOpen: 'drawer-open',\n  dataClose: 'drawer-close',\n  dataBreakpoint: 'drawer-breakpoint',\n  dataFocus: 'drawer-focus',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Classes\n  classModal: 'drawer_modal',\n\n  // Selectors\n  selectorInert: null,\n  selectorOverflow: null,\n\n  // Feature toggles\n  breakpoints: breakpoints,\n  customEventPrefix: 'drawer:',\n  stateSave: true,\n  stateKey: 'DrawerState',\n  setTabindex: true,\n  transition: true\n};\n","export const breakpoints = {\n  xs: '480px',\n  sm: '620px',\n  md: '760px',\n  lg: '990px',\n  xl: '1380px'\n};\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\n\nexport async function switchToModal(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (hasClass(drawer, obj.settings.classModal)) return;\n\n  // Enable modal state\n  addClass(drawer, obj.settings.classModal);\n  addClass(drawer, obj.settings.stateClosed);\n  removeClass(drawer, obj.settings.stateOpened);\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toModal', {\n    bubbles: true\n  }));\n  return drawer;\n}\n\nexport async function switchToDefault(drawerKey, obj) {\n  // Initial guards\n  const drawer = obj.getDrawer(drawerKey);\n  if (!drawer) return obj.drawerNotFound(drawerKey);\n  if (!hasClass(drawer, obj.settings.classModal)) return;\n\n  // Tear down modal state\n  setInert(false, obj.settings.selectorInert);\n  setOverflowHidden(false, obj.settings.selectorOverflow);\n  removeClass(drawer, obj.settings.classModal);\n  obj.focusTrap.destroy();\n\n  // Restore drawers saved state\n  drawerKey = drawer.getAttribute(`data-${obj.settings.dataDrawer}`);\n  const drawerState = obj.state[drawerKey];\n  if (drawerState == obj.settings.stateOpened) {\n    addClass(drawer, obj.settings.stateOpened);\n    removeClass(drawer, obj.settings.stateClosed);\n  }\n\n  // Dispatch custom event\n  drawer.dispatchEvent(new CustomEvent(obj.settings.customEventPrefix + 'toDefault', {\n    bubbles: true\n  }));\n  return drawer;\n}\n","import { switchToDefault, switchToModal } from './switchTo';\n\nexport class Breakpoint {\n  constructor(parent) {\n    this.mediaQueryLists = [];\n    this.parent = parent;\n    this.__check = this.check.bind(this);\n  }\n\n  init() {\n    const drawers = document.querySelectorAll(`[data-${this.parent.settings.dataBreakpoint}]`);\n    drawers.forEach((drawer) => {\n      const id = drawer.getAttribute(`data-${this.parent.settings.dataDrawer}`);\n      const key = drawer.getAttribute(`data-${this.parent.settings.dataBreakpoint}`);\n      const bp = this.parent.settings.breakpoints[key] ? this.parent.settings.breakpoints[key] : key;\n      const mql = window.matchMedia('(min-width:' + bp + ')');\n      this.match(mql, drawer);\n      mql.addListener(this.__check);\n      this.mediaQueryLists.push({\n        'mql': mql,\n        'drawer': id\n      });\n    });\n  }\n\n  destroy() {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        item.mql.removeListener(this.__check);\n      });\n    }\n    this.mediaQueryLists = null;\n  }\n\n  check(event = null) {\n    if (this.mediaQueryLists && this.mediaQueryLists.length) {\n      this.mediaQueryLists.forEach((item) => {\n        // If an event is passed, filter out drawers that don't match the query\n        // If event is null, run all drawers through match\n        let filter = (event) ? event.media == item.mql.media : true;\n        if (!filter) return;\n        const drawer = document.querySelector(\n          `[data-${this.parent.settings.dataDrawer}=\"${item.drawer}\"]`\n        );\n        if (drawer) this.match(item.mql, drawer);\n      });\n      document.dispatchEvent(new CustomEvent(this.parent.settings.customEventPrefix + 'breakpoint', {\n        bubbles: true\n      }));\n    }\n  }\n\n  match(mql, drawer) {\n    if (mql.matches) {\n      switchToDefault(drawer, this.parent);\n    } else {\n      switchToModal(drawer, this.parent);\n    }\n  }\n}\n","export function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Toggle data trigger\n  let trigger = event.target.closest(`[data-${this.settings.dataToggle}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataToggle}`);\n    this.memory.trigger = trigger;\n    this.toggle(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Open data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    this.memory.trigger = trigger;\n    this.open(selector);\n    event.preventDefault();\n    return;\n  }\n\n  // Close data trigger\n  trigger = event.target.closest(`[data-${this.settings.dataClose}]`);\n  if (trigger) {\n    const selector = trigger.getAttribute(`data-${this.settings.dataClose}`);\n    if (selector) {\n      this.memory.trigger = trigger;\n      this.close(selector);\n    } else {\n      const target = event.target.closest(`[data-${this.settings.dataDrawer}]`);\n      if (target) this.close(target);\n    }\n    event.preventDefault();\n    return;\n  }\n\n  // Screen modal trigger\n  if (event.target.hasAttribute(`data-${this.settings.dataDrawer}`)) {\n    this.close(event.target);\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.keyCode == 27) {\n    const target = document.querySelector(\n      `.${this.settings.classModal}.${this.settings.stateOpened}`\n    );\n    if (target) {\n      this.close(target);\n    }\n  }\n}\n","import { addClass, hasClass, removeClass } from '@vrembem/core/index';\n\nexport function stateSet(settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // If there isn't an existing state to set\n  if (!localStorage.getItem(settings.stateKey))\n    return stateSave(null, settings);\n\n  // Set the existing state\n  const state = JSON.parse(localStorage.getItem(settings.stateKey));\n  Object.keys(state).forEach((key) => {\n    const item = document.querySelector(\n      `[data-${settings.dataDrawer}=\"${key}\"]`\n    );\n    if (!item) return;\n    (state[key] == settings.stateOpened) ?\n      addClass(item, settings.stateOpened) :\n      removeClass(item, settings.stateOpened);\n  });\n  return state;\n}\n\nexport function stateSave(target, settings) {\n  // If save state is disabled\n  if (!settings.stateSave)\n    return stateClear(settings);\n\n  // Get the currently saved object if it exists\n  const state = (localStorage.getItem(settings.stateKey)) ?\n    JSON.parse(localStorage.getItem(settings.stateKey)) : {};\n\n  // Are we saving a single target or the entire suite?\n  const drawers = (target) ? [target] :\n    document.querySelectorAll(`[data-${settings.dataDrawer}]`);\n\n  // Loop through drawers and save their states\n  drawers.forEach((el) => {\n    if (hasClass(el, settings.classModal)) return;\n    const drawerKey = el.getAttribute(`data-${settings.dataDrawer}`);\n    state[drawerKey] = (hasClass(el, settings.stateOpened)) ?\n      settings.stateOpened : settings.stateClosed;\n  });\n\n  // Save to localStorage and return the state\n  localStorage.setItem(settings.stateKey, JSON.stringify(state));\n  return state;\n}\n\nexport function stateClear(settings) {\n  if (localStorage.getItem(settings.stateKey)) {\n    localStorage.removeItem(settings.stateKey);\n  }\n  return {};\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { Breakpoint } from './src/js/breakpoint';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { stateClear, stateSave, stateSet } from './src/js/state';\nimport { switchToDefault, switchToModal } from './src/js/switchTo';\n\nexport default class Drawer {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.state = {};\n    this.focusTrap = new FocusTrap();\n    this.breakpoint = new Breakpoint(this);\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.stateSet();\n    this.setTabindex(this.settings.setTabindex);\n    this.breakpoint.init();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.breakpoint.destroy();\n    this.memory = {};\n    this.state = {};\n    localStorage.removeItem(this.settings.stateKey);\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getDrawer(drawerKey) {\n    if (typeof drawerKey !== 'string') return drawerKey;\n    return document.querySelector(\n      `[data-${this.settings.dataDrawer}=\"${drawerKey}\"]`\n    );\n  }\n\n  drawerNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find drawer with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataDrawer}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  /**\n   * Save state functionality\n   */\n\n  stateSet() {\n    this.state = stateSet(this.settings);\n  }\n\n  stateSave(target = null) {\n    this.state = stateSave(target, this.settings);\n  }\n\n  stateClear() {\n    this.state = stateClear(this.settings);\n  }\n\n  /**\n   * SwitchTo functionality\n   */\n\n  switchToDefault(drawerKey) {\n    return switchToDefault(drawerKey, this);\n  }\n\n  switchToModal(drawerKey) {\n    return switchToModal(drawerKey, this);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async toggle(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    const isOpen = hasClass(drawer, this.settings.stateOpened);\n    if (!isOpen) {\n      return this.open(drawer);\n    } else {\n      return this.close(drawer);\n    }\n  }\n\n  async open(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (!hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      const isModal = hasClass(drawer, this.settings.classModal);\n      if (isModal) {\n        setOverflowHidden(true, this.settings.selectorOverflow);\n      }\n      await openTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      if (isModal) {\n        this.focusTrap.init(drawer);\n        setInert(true, this.settings.selectorInert);\n      }\n      focusTarget(drawer, this.settings);\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      focusTarget(drawer, this.settings);\n      return drawer;\n    }\n  }\n\n  async close(drawerKey) {\n    const drawer = this.getDrawer(drawerKey);\n    if (!drawer) return this.drawerNotFound(drawerKey);\n    if (hasClass(drawer, this.settings.stateOpened)) {\n      this.working = true;\n      if (hasClass(drawer, this.settings.classModal)) {\n        setInert(false, this.settings.selectorInert);\n        setOverflowHidden(false, this.settings.selectorOverflow);\n      }\n      await closeTransition(drawer, this.settings);\n      this.stateSave(drawer);\n      focusTrigger(this);\n      this.focusTrap.destroy();\n      drawer.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return drawer;\n    } else {\n      return drawer;\n    }\n  }\n}\n","export const openTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\n\nexport const closeTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n"],"names":["setInert","state","selector","document","querySelectorAll","forEach","el","inert","setAttribute","removeAttribute","setOverflowHidden","style","overflow","removeProperty","addClass","classList","add","focusTarget","target","settings","innerFocus","querySelector","dataFocus","focus","innerElement","FocusTrap","this","__handlerFocusTrap","handlerFocusTrap","bind","init","inner","focusable","getFocusable","length","focusableFirst","focusableLast","addEventListener","handlerFocusLock","destroy","removeEventListener","event","key","keyCode","shiftKey","activeElement","preventDefault","initFocus","initScrollTop","scrollTop","push","hasClass","slice","call","some","cl","contains","removeClass","remove","autoInit","dataDrawer","dataDialog","dataToggle","dataOpen","dataClose","dataBreakpoint","stateOpened","stateOpening","stateClosing","stateClosed","classModal","selectorInert","selectorOverflow","breakpoints","xs","sm","md","lg","xl","customEventPrefix","stateSave","stateKey","setTabindex","transition","switchToDefault","drawerKey","obj","drawer","getDrawer","focusTrap","getAttribute","dispatchEvent","CustomEvent","bubbles","drawerNotFound","switchToModal","Breakpoint","parent","mediaQueryLists","__check","check","id","_this","mql","window","matchMedia","match","addListener","item","removeListener","_this2","media","_this3","matches","handlerClick","working","trigger","closest","memory","toggle","open","close","hasAttribute","handlerKeyup","stateClear","localStorage","getItem","JSON","parse","setItem","stringify","removeItem","options","defaults","breakpoint","__handlerClick","__handlerKeyup","stateSet","Promise","reject","Error","Object","keys","isOpen","_this4","isModal","resolve","_f","_this6"],"mappings":"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"}