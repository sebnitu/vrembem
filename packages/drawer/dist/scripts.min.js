this.vrembem=this.vrembem||{},this.vrembem.drawer=function(){'use strict';var a={breakpoints:{xs:"480px",sm:"620px",md:"760px",lg:"990px",xl:"1380px"}},b=function(a){var b=[];return Array.isArray(a)?b=a:b.push(a),b},c=function(a,d){a=a.forEach?a:b(a),d=b(d),a.forEach(function(a){d.forEach(function(b){a.classList.add(b)})})},d=function(a,d){return a=a.forEach?a:b(a),d=b(d),d.some(function(b){var c=!1;return a.forEach(function(a){a.classList.contains(b)&&(c=!0)}),c})},e=function a(){var b={},c=!1,d=0,e=arguments.length;"[object Boolean]"===Object.prototype.toString.call(0>=arguments.length?void 0:arguments[0])&&(c=0>=arguments.length?void 0:arguments[0],d++);for(var f=function(d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=c&&"[object Object]"===Object.prototype.toString.call(d[e])?a(!0,b[e],d[e]):d[e])};d<e;d++){var g=0>d||arguments.length<=d?void 0:arguments[d];f(g)}return b},f=function(b){return a.breakpoints[b]},g=function(a,d){a=a.forEach?a:b(a),d=b(d),a.forEach(function(a){d.forEach(function(b){a.classList.remove(b)})})},h=function(a,d){a=a.forEach?a:b(a),d=b(d),a.forEach(function(a){d.forEach(function(b){a.classList.toggle(b)})})};return function(a){var i,j,k={},l={classTarget:"drawer__item",classTrigger:"drawer__trigger",classInner:"drawer__dialog",classTargetSwitch:"modal",classTriggerSwitch:"modal__trigger",classInnerSwitch:"modal__dialog",classActive:"is-active",classTransitionNone:"transition_none",saveState:!0,switch:"[data-drawer-switch]",switchBreakpoint:"lg",transitionDuration:500},m=[],n={},o=[];k.init=function(a){i=e(l,a||{}),document.querySelectorAll("."+i.classTarget).forEach(function(a){m.push({drawer:a,defaultState:d(a,i.classActive)})});var b=new Promise(function(a){i.saveState?r(a):a()});b.then(function(){i["switch"]&&u()}),document.addEventListener("click",q,!1)},k.destroy=function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];v(),t(),a&&m.forEach(function(a){a.defaultState?c(a.drawer,i.classActive):g(a.drawer,i.classActive)}),i=null,m=[],document.removeEventListener("click",q,!1)},k.open=function(a){a=a?a:"."+i.classTarget,p(document.querySelectorAll(a),"open")},k.close=function(a){a=a?a:"."+i.classTarget,p(document.querySelectorAll(a),"close")},k.toggle=function(a){a=a?a:"."+i.classTarget,p(document.querySelectorAll(a))},k.switchToDrawer=function(a){a=a?a:i["switch"];var c=document.querySelectorAll(a);c=c.forEach?c:b(c),c.forEach(function(a){x(a)})},k.switchToModal=function(a){a=a?a:i["switch"];var c=document.querySelectorAll(a);c=c.forEach?c:b(c),c.forEach(function(a){y(a)})},k.stateSave=function(){s()},k.stateClear=function(){t()};var p=function(a,b,d){"open"===b?c(a,i.classActive):"close"===b?g(a,i.classActive):h(a,i.classActive),i.saveState&&s(a),"function"==typeof d&&d()},q=function a(){var a=event.target.closest("."+i.classTrigger);if(a){var b=a.dataset.target;if(b){var c=document.querySelectorAll(b);c.length&&p(c)}}},r=function(a){localStorage.getItem("drawerState")&&(n=JSON.parse(localStorage.getItem("drawerState"))),m.forEach(function(a){var b=a.drawer;!1==b.id in n&&s(b);var d=b.querySelector("."+i.classInner),e=function(){d&&(c(d,i.classTransitionNone),setTimeout(function(){g(d,i.classTransitionNone)},i.transitionDuration))};!1===n[b.id]?p(b,"close",e):n[b.id]&&p(b,"open",e)}),"function"==typeof a&&a(n)},s=function(a){a=a?a:m,a=a.forEach?a:b(a),a.forEach(function(a){a.drawer&&(a=a.drawer),a.id&&(n[a.id]=d(a,i.classActive),localStorage.setItem("drawerState",JSON.stringify(n)))})},t=function(){n={},localStorage.removeItem("drawerState")},u=function(){j=document.querySelectorAll(i["switch"]),j.forEach(function(a){var b=i["switch"].replace("[","").replace("]","").replace("data-","");b=b.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()});var c=a.dataset[b];c?(c=f(c),!c&&(c=a.dataset[b])):(c=f(i.switchBreakpoint),!c&&(c=i.switchBreakpoint));var d=window.matchMedia("(min-width:"+c+")");d.matches||y(a),d.addListener(w),o.push({drawer:a,mql:d})})},v=function(){j.forEach(function(a){x(a)}),o.forEach(function(a){a.mql.removeListener(w)}),j=null,o=[]},w=function(){o.forEach(function(a){a.mql.matches?x(a.drawer):y(a.drawer)})},x=function(a){var b=a.querySelector(".dialog"),c=document.querySelectorAll("[data-target=\"#"+a.id+"\"]");a.className=a.className.replace(new RegExp(i.classTargetSwitch,"gi"),i.classTarget),b.className=b.className.replace(new RegExp(i.classInnerSwitch,"gi"),i.classInner),c.forEach(function(a){a.className=a.className.replace(new RegExp(i.classTriggerSwitch,"gi"),i.classTrigger)}),i.saveState&&(!1===n[a.id]?p(a,"close"):p(a,"open"))},y=function(a){var b=a.querySelector(".dialog"),c=document.querySelectorAll("[data-target=\"#"+a.id+"\"]");a.className=a.className.replace(new RegExp(i.classTarget,"gi"),i.classTargetSwitch),b.className=b.className.replace(new RegExp(i.classInner,"gi"),i.classInnerSwitch),c.forEach(function(a){a.className=a.className.replace(new RegExp(i.classTrigger,"gi"),i.classTriggerSwitch)}),g(a,i.classActive)};return k.init(a),k}}();
