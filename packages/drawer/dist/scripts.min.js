this.vrembem=this.vrembem||{},this.vrembem.drawer=function(a){'use strict';var b={breakpoints:{xs:"480px",sm:"620px",md:"760px",lg:"990px",xl:"1380px"}},d=function(a){var b=[];return Array.isArray(a)?b=a:b.push(a),b},e=function(a,b){a=a.forEach?a:d(a),b=d(b),a.forEach(function(a){b.forEach(function(b){a.classList.add(b)})})},f=function(a,b){return a=a.forEach?a:d(a),b=d(b),b.some(function(b){var c=!1;return a.forEach(function(a){a.classList.contains(b)&&(c=!0)}),c})},g=function a(){var b={},c=!1,d=0,e=arguments.length;"[object Boolean]"===Object.prototype.toString.call(0>=arguments.length?void 0:arguments[0])&&(c=0>=arguments.length?void 0:arguments[0],d++);for(var f,g=function(d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=c&&"[object Object]"===Object.prototype.toString.call(d[e])?a(!0,b[e],d[e]):d[e])};d<e;d++)f=0>d||arguments.length<=d?void 0:arguments[d],g(f);return b},h=function(a){return b.breakpoints[a]},i=function(a,b){a=a.forEach?a:d(a),b=d(b),a.forEach(function(a){b.forEach(function(b){a.classList.remove(b)})})},j=function(a,b){a=a.forEach?a:d(a),b=d(b),a.forEach(function(a){b.forEach(function(b){a.classList.toggle(b)})})};return a.Drawer=function(a){var b,c,k={},l={classTarget:"drawer__item",classTrigger:"drawer__trigger",classInner:"drawer__dialog",classTargetSwitch:"modal",classTriggerSwitch:"modal__trigger",classInnerSwitch:"modal__dialog",classActive:"is-active",classTransitionNone:"transition_none",saveState:!0,switch:"[data-drawer-switch]",switchBreakpoint:"lg",transitionDuration:500},m=[],n={},o=[];k.init=function(a){b=g(l,a||{}),document.querySelectorAll("."+b.classTarget).forEach(function(a){m.push({drawer:a,defaultState:f(a,b.classActive)})});var c=new Promise(function(a){b.saveState?r(a):a()});c.then(function(){b["switch"]&&u()}),document.addEventListener("click",q,!1)},k.destroy=function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];v(),t(),a&&m.forEach(function(a){a.defaultState?e(a.drawer,b.classActive):i(a.drawer,b.classActive)}),b=null,m=[],document.removeEventListener("click",q,!1)},k.open=function(a){a=a?a:"."+b.classTarget,p(document.querySelectorAll(a),"open")},k.close=function(a){a=a?a:"."+b.classTarget,p(document.querySelectorAll(a),"close")},k.toggle=function(a){a=a?a:"."+b.classTarget,p(document.querySelectorAll(a))},k.switchToDrawer=function(a){a=a?a:b["switch"];var c=document.querySelectorAll(a);c=c.forEach?c:d(c),c.forEach(function(a){x(a)})},k.switchToModal=function(a){a=a?a:b["switch"];var c=document.querySelectorAll(a);c=c.forEach?c:d(c),c.forEach(function(a){y(a)})},k.stateSave=function(){s()},k.stateClear=function(){t()};var p=function(a,c,d){"open"===c?e(a,b.classActive):"close"===c?i(a,b.classActive):j(a,b.classActive),b.saveState&&s(a),"function"==typeof d&&d()},q=function a(){var a=event.target.closest("."+b.classTrigger);if(a){var c=a.dataset.target;if(c){var d=document.querySelectorAll(c);d.length&&p(d)}}},r=function(a){localStorage.getItem("drawerState")&&(n=JSON.parse(localStorage.getItem("drawerState"))),m.forEach(function(a){var c=a.drawer;!1==c.id in n&&s(c);var d=c.querySelector("."+b.classInner),f=function(){d&&(e(d,b.classTransitionNone),setTimeout(function(){i(d,b.classTransitionNone)},b.transitionDuration))};!1===n[c.id]?p(c,"close",f):n[c.id]&&p(c,"open",f)}),"function"==typeof a&&a(n)},s=function(a){a=a?a:m,a=a.forEach?a:d(a),a.forEach(function(a){a.drawer&&(a=a.drawer),a.id&&(n[a.id]=f(a,b.classActive),localStorage.setItem("drawerState",JSON.stringify(n)))})},t=function(){n={},localStorage.removeItem("drawerState")},u=function(){c=document.querySelectorAll(b["switch"]),c.forEach(function(a){var c=b["switch"].replace("[","").replace("]","").replace("data-","");c=c.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()});var d=a.dataset[c];d?(d=h(d),!d&&(d=a.dataset[c])):(d=h(b.switchBreakpoint),!d&&(d=b.switchBreakpoint));var e=window.matchMedia("(min-width:"+d+")");e.matches||y(a),e.addListener(w),o.push({drawer:a,mql:e})})},v=function(){c.forEach(function(a){x(a)}),o.forEach(function(a){a.mql.removeListener(w)}),c=null,o=[]},w=function(){o.forEach(function(a){a.mql.matches?x(a.drawer):y(a.drawer)})},x=function(a){var c=a.querySelector(".dialog"),d=document.querySelectorAll("[data-target=\"#"+a.id+"\"]");a.className=a.className.replace(new RegExp(b.classTargetSwitch,"gi"),b.classTarget),c.className=c.className.replace(new RegExp(b.classInnerSwitch,"gi"),b.classInner),d.forEach(function(a){a.className=a.className.replace(new RegExp(b.classTriggerSwitch,"gi"),b.classTrigger)}),b.saveState&&(!1===n[a.id]?p(a,"close"):p(a,"open"))},y=function(a){var c=a.querySelector(".dialog"),d=document.querySelectorAll("[data-target=\"#"+a.id+"\"]");a.className=a.className.replace(new RegExp(b.classTarget,"gi"),b.classTargetSwitch),c.className=c.className.replace(new RegExp(b.classInner,"gi"),b.classInnerSwitch),d.forEach(function(a){a.className=a.className.replace(new RegExp(b.classTrigger,"gi"),b.classTriggerSwitch)}),i(a,b.classActive)};return k.init(a),k},a}({});
