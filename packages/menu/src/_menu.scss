@use "@vrembem/core";
@use "@vrembem/core/css";
@use "./variables" as var;

#{core.bem("menu")} {
  display: flex;
  gap: css.get("menu", "gap");
  flex-direction: column;
  align-items: stretch;
  font-size: css.get("menu", "font-size", var.$font-size);
  line-height: css.get("menu", "line-height", var.$line-height);
  list-style: none;
}

#{core.bem("menu", "sep")} {
  flex: 0 0 auto;
  align-self: stretch;
  width: auto;
  height: css.get("menu", "sep-size");
  margin: css.get("menu", "sep-gap") 0;
  background: css.get("menu", "sep-background");
}

#{core.bem("menu", "action")} {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: 100%;
  min-width: css.get("menu", "size", var.$size);
  min-height: css.get("menu", "size", var.$size);
  padding: css.get("menu", "padding", var.$padding);
  transition-property: css.get("menu", "transition-property", var.$transition-property);
  transition-duration: css.get("menu", "transition-duration", var.$transition-duration);
  transition-timing-function: css.get("menu", "transition-timing-function", var.$transition-timing-function);
  outline: none;
  border: css.get("menu", "border-width", var.$border-width) solid css.get("menu", "border-color");
  border-radius: css.get("menu", "border-radius", var.$border-radius);
  background: css.get("menu", "background");
  background-clip: border-box;
  box-shadow: 0 0 0 0 css.get("menu", "box-shadow");
  color: css.get("menu", "foreground");
  white-space: normal;
  gap: css.get("menu", "action-gap");

  &:hover,
  &:focus-visible {
    border-color: css.get("menu", "border-color-hover", "border-color");
    background: css.get("menu", "background-hover", "background");
    color: css.get("menu", "foreground-hover", "foreground");
  }

  &:focus-visible {
    z-index: 1;
    border-color: css.get("menu", "border-color-focus");
    box-shadow: 0 0 0 0.2rem css.get("menu", "box-shadow-focus");
  }

  &:active {
    border-color: css.get("menu", "border-color-active", "border-color-hover", "border-color");
    background: css.get("menu", "background-active", "background-hover", "background");
    color: css.get("menu", "foreground-active", "foreground-hover", "foreground");
  }

  &.is-active,
  &.is-active:hover,
  &.is-active:focus,
  &.is-active:active,
  &.is-active[disabled] {
    background: css.get("menu", "active-background");
    color: css.get("menu", "active-foreground");
    cursor: pointer;
  }

  &.is-disabled,
  &.is-disabled:hover,
  &.is-disabled:focus,
  &.is-disabled:active,
  &[disabled] {
    background: css.get("menu", "disabled-background");
    color: css.get("menu", "disabled-foreground");
    pointer-events: none;
  }
}

#{core.bem("menu", "action", "icon")} {
  @include css.override("menu", "padding", var.$icon-padding);
}
