@use "@vrembem/core";
@use "@vrembem/core/css";
@use "./variables" as var;

@mixin menu-action-base() {
  position: relative;
  display: flex;
  gap: css.get("menu", "gap", var.$action-gap);
  align-items: center;
  justify-content: flex-start;
  width: 100%;
  outline: none;
  border-style: solid;
  background-clip: border-box;
  font-family: inherit;
  font-weight: inherit;
  text-decoration: none;
  white-space: normal;
  cursor: pointer;
}

#{core.bem("menu")} {
  display: flex;
  gap: css.get("menu", "gap", var.$gap);
  flex-direction: column;
  align-items: stretch;
  font-size: css.get("menu", "font-size", css.get("form-control-font-size"));
  line-height: css.get("menu", "line-height", css.get("form-control-line-height"));
  list-style: none;
}

#{core.bem("menu", "sep")} {
  flex: 0 0 auto;
  align-self: stretch;
  width: auto;
  height: css.get("menu", "sep-size");
  margin: css.get("menu", "sep-gap") 0;
  background: css.get("menu", "sep-background");
}

#{core.bem("menu", "action")} {
  @include core.form-control-properties("menu");
  @include menu-action-base();
  border-color: css.get("menu", "border-color", var.$border-color);
  background-color: css.get("menu", "background");
  box-shadow: 0 0 0 0 css.get("menu", "box-shadow");
  color: css.get("menu", "foreground");

  &:hover,
  &:focus-visible {
    border-color: css.get("menu", "border-color-hover", "border-color");
    background-color: css.get("menu", "background-hover", "background");
    color: css.get("menu", "foreground-hover", "foreground");
  }

  &:focus-visible {
    z-index: 1;
    border-color: css.get("menu", "border-color-focus");
    box-shadow: 0 0 0 0.2rem css.get("menu", "box-shadow-focus");
  }

  &:active {
    border-color: css.get("menu", "border-color-active", "border-color-hover", "border-color");
    background-color: css.get("menu", "background-active", "background-hover", "background");
    color: css.get("menu", "foreground-active", "foreground-hover", "foreground");
  }

  &.is-active,
  &.is-active:hover,
  &.is-active:focus,
  &.is-active:active,
  &.is-active[disabled] {
    background-color: css.get("menu", "active-background");
    color: css.get("menu", "active-foreground");
    cursor: pointer;
  }

  &.is-disabled,
  &.is-disabled:hover,
  &.is-disabled:focus,
  &.is-disabled:active,
  &[disabled] {
    background-color: css.get("menu", "disabled-background");
    color: css.get("menu", "disabled-foreground");
    pointer-events: none;
  }
}

#{core.bem("menu", "action", "icon")} {
  @include css.override("menu", "padding", var.$icon-padding);
}
