<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Setup styles -->
  <link rel="stylesheet" href="./node_modules/@vrembem/base/dist/styles.min.css">
  <link rel="stylesheet" href="./node_modules/@vrembem/utility/dist/styles.min.css">
  <link rel="stylesheet" href="https://unpkg.com/@vrembem/dialog/dist/styles.min.css">
  <!-- Component styles -->
  <link rel="stylesheet" href="./dist/styles.min.css">
  <title>@vrembem/modal</title>
</head>
<body>
<div role="main" class="padding-xl">
  <h1 class="margin-bottom-md">@vrembem/modal</h1>
  <p>A component for changing the mode of a page to complete a critical task. This is usually used in conjunction with the Dialog component to make modal dialogs.</p>
  <hr class="sep margin-vert-lg">
  <ul class="list margin-top-md">

    <li>
      <button data-modal-open="modal-empty" class="link">Modal Empty</button>
      <div data-modal="modal-empty" class="modal">
        <div data-modal-dialog class="modal__dialog padding background-white radius spacing">
          <p>Nothing to focus here, this modal is empty...</p>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-focus-trap" class="link">Modal Focus Trap</button>
      <div data-modal="modal-focus-trap" class="modal is-opened">
        <div data-modal-dialog class="modal__dialog padding background-white radius spacing">
          <div class="flex flex-justify-between">
            <p>Modal Default</p>
            <button data-modal-close class="link">Close</button>
          </div>
          <p tabindex="0">Make this tab-able...</p>
          <p>
            <input class="input" type="text">
          </p>
          <p>
            <input class="input" type="text">
          </p>
          <p>
            <input class="input" type="text">
          </p>
          <p>
            <button data-modal-close class="link">Close</button>
          </p>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-default" class="link">Modal Default</button>
      <div data-modal="modal-default" class="modal">
        <div data-modal-dialog class="modal__dialog padding background-white radius spacing">
          <div class="flex flex-justify-between">
            <p>Modal Default</p>
            <button data-modal-close class="link">Close</button>
          </div>
          <p>
            <button data-modal-open="modal-focus" class="link">Modal Focus</button>
            <button class="link api-test-close">API Close</button>
          </p>
          <p class="display-none">
            <a href="#">Hidden focusable</a>
          </p>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-focus" class="link">Modal Focus</button>
      <div data-modal="modal-focus" class="modal">
        <div data-modal-dialog class="modal__dialog padding background-white radius">
          <div class="flex flex-justify-between">
            <p>Modal Focus</p>
            <button data-modal-close data-modal-focus class="link">Close</button>
          </div>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-required" class="link">Modal Required</button>
      <div data-modal="modal-required" data-modal-required class="modal">
        <div data-modal-dialog class="modal__dialog padding background-white radius">
          <div class="flex flex-justify-between">
            <p>Modal Required</p>
            <button data-modal-close data-modal-focus class="link">Close</button>
          </div>
        </div>
      </div>
    </li>

    <li>
      <button class="link api-test-open">API Open</button>
    </li>

  </ul>

  <hr class="sep margin-vert-md">

  <div class="level">
    <button data-modal-open="modal-pos-top" class="link">
      &uarr; Modal top
    </button>
    <button data-modal-open="modal-pos-bottom" class="link">
      &darr; Modal bottom
    </button>
    <button data-modal-open="modal-pos-left" class="link">
      &larr; Modal left
    </button>
    <button data-modal-open="modal-pos-right" class="link">
      &rarr; Modal right
    </button>
  </div>
  
  <div data-modal="modal-pos-top" class="modal modal_pos_top">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Top position modal</p>
      </div>
      <div class="dialog__footer flex-justify-between">
        <button data-modal-open="modal-pos-left" class="link">
          &larr; Left modal
        </button>
        <button data-modal-open="modal-pos-bottom" class="link">
          &darr; Bottom modal
        </button>
        <button data-modal-open="modal-pos-right" class="link">
          &rarr; Right modal
        </button>
      </div>
    </div>
  </div>
  
  <div data-modal="modal-pos-bottom" class="modal modal_pos_bottom">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Bottom position modal</p>
      </div>
      <div class="dialog__footer flex-justify-between">
        <button data-modal-open="modal-pos-left" class="link">
          &larr; Left modal
        </button>
        <button data-modal-open="modal-pos-top" class="link">
          &uarr; Top modal
        </button>
        <button data-modal-open="modal-pos-right" class="link">
          &rarr; Right modal
        </button>
      </div>
    </div>
  </div>
  
  <div data-modal="modal-pos-left" class="modal modal_pos_left">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Left position modal</p>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-top" class="link">
          &uarr; Top modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-right" class="link">
          &rarr; Right modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-bottom" class="link">
          &darr; Bottom modal
        </button>
      </div>
    </div>
  </div>
  
  <div data-modal="modal-pos-right" class="modal modal_pos_right">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Right position modal</p>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-top" class="link">
          &uarr; Top modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-left" class="link">
          &larr; Left modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-bottom" class="link">
          &darr; Bottom modal
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modals"></div>

<!-- Component scripts -->
<script src="./dist/scripts.js"></script>
<script>
  const modal = new vrembem.Modal({
    autoInit: true,
    selectorMain: '[role="main"]',
    moveModals: {
      selector: '.modals',
      location: 'append'
    }
  });

  const apiOpen = document.querySelector(".api-test-open");
  const apiClose = document.querySelector(".api-test-close");

  apiOpen.addEventListener("click", (event) => {
    modal.open("modal-default", () => {
      console.log("Open API called");
    });
  });

  apiClose.addEventListener("click", (event) => {
    modal.close(true, () => {
      console.log("Close API called");
    });
  });

  document.addEventListener('modal:opened', () => {
    console.log('Open:', modal.memory);
  });

  document.addEventListener('modal:closed', () => {
    console.log('Closed:', modal.memory);
  });
</script>

<!-- Polyfills -->
<script src="https://unpkg.com/wicg-inert/dist/inert.min.js"></script>

</body>
</html>
