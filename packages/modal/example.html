<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Setup styles -->
  <link rel="stylesheet" href="./node_modules/@vrembem/base/dist/styles.min.css">
  <link rel="stylesheet" href="./node_modules/@vrembem/utility/dist/styles.min.css">
  <link rel="stylesheet" href="./node_modules/@vrembem/dialog/dist/styles.min.css">
  <!-- Component styles -->
  <link rel="stylesheet" href="./dist/styles.min.css">
  <title>@vrembem/modal</title>
</head>
<body>
<div role="main" class="padding-xl spacing">
  <h1>@vrembem/modal</h1>
  <p class="span-8-md span-6-lg">
    A component for changing the mode of a page to complete a critical task. This is usually used in conjunction with the Dialog component to make modal dialogs.
  </p>
  <hr class="sep margin-vert-lg">
  <ul class="list">

    <li>
      <button data-modal-open="modal-default" class="link">Modal Default</button>
      <div data-modal="modal-default" class="modal">
        <div data-modal-dialog class="modal__dialog dialog">
          <button data-modal-close class="dialog__close link">Close</button>
          <div class="dialog__body">
            <p>Modal Default</p>
          </div>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-focus-trap" class="link">Modal Focus Trap</button>
      <div data-modal="modal-focus-trap" class="modal is-opened">
        <div data-modal-dialog class="modal__dialog dialog">
          <a class="display-none" href="#">Focusable, but hidden...</a>
          <div class="dialog__header">
            <h2 class="dialog__title">Modal Focus Trap</h2>
            <button data-modal-close class="dialog__close link">Close</button>
          </div>
          <div class="dialog__body spacing">
            <p tabindex="0">This paragraph is focusable because of the <code class="code">tabindex="0"</code> attribute.</p>
            <p>
              <input class="input" type="text">
            </p>
            <p>
              <input class="input" type="text">
            </p>
          </div>
          <div class="dialog__footer">
            <button data-modal-close class="link">Close</button>
          </div>
          <a class="display-none" href="#">Focusable, but hidden...</a>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-focus" class="link">Modal Focus</button>
      <div data-modal="modal-focus" class="modal">
        <div data-modal-dialog class="modal__dialog padding background-white radius">
          <div class="flex flex-justify-between">
            <p>Modal Focus</p>
            <button data-modal-close data-modal-focus class="link">Close</button>
          </div>
        </div>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-empty" class="link">Modal Focus Empty</button>
      <div data-modal="modal-empty" class="modal">
        <a class="display-none" href="#">Focusable, but hidden...</a>
        <div data-modal-dialog class="modal__dialog padding background-white radius spacing">
          <p>Modal Focus Empty</p>
        </div>
        <a class="display-none" href="#">Focusable, but hidden...</a>
      </div>
    </li>

    <li>
      <button data-modal-open="modal-required" class="link">Modal Required</button>
      <div data-modal="modal-required" data-modal-required class="modal">
        <div data-modal-dialog class="modal__dialog padding background-white radius">
          <div class="flex flex-justify-between">
            <p>Modal Required</p>
            <button data-modal-close class="link">Close</button>
          </div>
        </div>
      </div>
    </li>

    <li>
      <button class="link api-open">API Open</button>
      <div data-modal="modal-api" class="modal">
        <div data-modal-dialog class="modal__dialog dialog">
          <div class="dialog__header">
            <h2 class="dialog__title">Modal API</h2>
            <button class="dialog__close link api-close">API Close</button>
          </div>
          <div class="dialog__body">
            <p>This modal is controlled using modal API calls instead of data attributes.</p>
          </div>
        </div>
      </div>
    </li>

    <li>
      <button class="link api-close">API Close</button>
    </li>

  </ul>

  <hr class="sep">

  <h2>Position Modifiers</h2>

  <ul class="list">
    <li>
      <button data-modal-open="modal-pos-top" class="link">&uarr; Modal top</button>
    </li>
    <li>
      <button data-modal-open="modal-pos-bottom" class="link">&darr; Modal bottom</button>
    </li>
    <li>
      <button data-modal-open="modal-pos-left" class="link">&larr; Modal left</button>
    </li>
    <li>
      <button data-modal-open="modal-pos-right" class="link">&rarr; Modal right</button>
    </li>
  </ul>
  
  <div data-modal="modal-pos-top" class="modal modal_pos_top">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Top position modal</p>
      </div>
      <div class="dialog__footer flex-justify-between">
        <button data-modal-open="modal-pos-left" class="link">
          &larr; Left modal
        </button>
        <button data-modal-open="modal-pos-bottom" class="link">
          &darr; Bottom modal
        </button>
        <button data-modal-open="modal-pos-right" class="link">
          &rarr; Right modal
        </button>
      </div>
    </div>
  </div>
  
  <div data-modal="modal-pos-bottom" class="modal modal_pos_bottom">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Bottom position modal</p>
      </div>
      <div class="dialog__footer flex-justify-between">
        <button data-modal-open="modal-pos-left" class="link">
          &larr; Left modal
        </button>
        <button data-modal-open="modal-pos-top" class="link">
          &uarr; Top modal
        </button>
        <button data-modal-open="modal-pos-right" class="link">
          &rarr; Right modal
        </button>
      </div>
    </div>
  </div>
  
  <div data-modal="modal-pos-left" class="modal modal_pos_left">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Left position modal</p>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-top" class="link">
          &uarr; Top modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-right" class="link">
          &rarr; Right modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-bottom" class="link">
          &darr; Bottom modal
        </button>
      </div>
    </div>
  </div>
  
  <div data-modal="modal-pos-right" class="modal modal_pos_right">
    <div data-modal-dialog class="modal__dialog dialog">
      <button data-modal-close class="dialog__close link">
        Close
      </button>
      <div class="dialog__body">
        <p>Right position modal</p>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-top" class="link">
          &uarr; Top modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-left" class="link">
          &larr; Left modal
        </button>
      </div>
      <div class="dialog__footer">
        <button data-modal-open="modal-pos-bottom" class="link">
          &darr; Bottom modal
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modals"></div>

<!-- Polyfills -->
<script src="https://unpkg.com/wicg-inert/dist/inert.min.js"></script>

<!-- Component scripts -->
<script src="./dist/scripts.js"></script>

<!-- Implementation scripts -->
<script>
  const modal = vrembem.modal({
    autoInit: true,
    selectorInert: '[role="main"]',
    selectorOverflow: 'body, [role="main"]',
    moveModals: {
      selector: '.modals',
      location: 'append'
    }
  });

  document.addEventListener('modal:opened', () => {
    console.log(modal.memory);
  });

  document.addEventListener('modal:closed', () => {
    console.log(modal.memory);
  });

  document.addEventListener('click', async () => {
    if (event.target.classList.contains('api-open')) {
      // return modal.open('modal-api').then(console.log);
      modal.open('modal-api').then((result) => {
        console.log({ result });
      });
      return;
    }

    if (event.target.classList.contains('api-close')) {
      // return modal.close().then(console.log);
      modal.close().then((result) => {
        console.log({ result });
      });
      return;
    }
  });
</script>

</body>
</html>
