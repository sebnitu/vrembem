{"version":3,"file":"modal.modern.js","sources":["../../core/src/js/accessibility.js","../../core/src/js/focus.js","../../core/src/js/getElement.js","../../core/src/js/transition.js","../src/js/defaults.js","../src/js/handlers.js","../index.js","../src/js/initialState.js","../../core/src/js/removeClass.js","../../core/src/js/addClass.js","../../core/src/js/moveElement.js","../../core/src/js/hasClass.js"],"sourcesContent":["export const setInert = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\n\nexport const setOverflowHidden = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\n\nexport const setTabindex = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n","export const focusTarget = (target, settings) => {\n  const innerFocus = target.querySelector(\n    `[data-${settings.dataFocus}]`\n  );\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    const innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\n\nexport const focusTrigger = (obj = null) => {\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\n\nexport class FocusTrap {\n  constructor() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  }\n\n  destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  }\n\n  handlerFocusTrap(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (!isTab) return;\n    if (event.shiftKey) {\n      if (\n        document.activeElement === this.focusableFirst ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (\n        document.activeElement === this.focusableLast ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  handlerFocusLock(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (isTab) event.preventDefault();\n  }\n\n  getFocusable() {\n    const focusable = [];\n    const initFocus = document.activeElement;\n    const initScrollTop = (this.inner) ? this.inner.scrollTop : 0;\n\n    this.target\n      .querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type=\"text\"]:not([disabled]),input[type=\"radio\"]:not([disabled]),input[type=\"checkbox\"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex=\"-1\"])')\n      .forEach((el) => {\n        el.focus();\n        if (el === document.activeElement) {\n          focusable.push(el);\n        }\n      });\n\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  }\n}\n","/**\n * Get an element(s) from a selector or return value if not a string\n * ---\n * @param {String} selector - Selector to query\n * @param {Boolean} single - Whether to return a single or all matches\n */\n\nexport const getElement = function (selector, single = 0) {\n  if (typeof selector != 'string') return selector;\n  return (single) ?\n    document.querySelector(selector) :\n    document.querySelectorAll(selector);\n};\n","export const openTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\n\nexport const closeTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n","export default {\n  autoInit: false,\n\n  // Data attributes\n  dataModal: 'modal',\n  dataDialog: 'modal-dialog',\n  dataOpen: 'modal-open',\n  dataClose: 'modal-close',\n  dataFocus: 'modal-focus',\n  dataRequired: 'modal-required',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Selector\n  selectorInert: null,\n  selectorOverflow: 'body',\n\n  // Feature toggles\n  customEventPrefix: 'modal:',\n  moveModals: {\n    ref: null,\n    type: null\n  },\n  setTabindex: true,\n  transition: true\n};\n","export async function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Trigger click\n  const trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    event.preventDefault();\n    const modalKey = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    const fromModal = event.target.closest(`[data-${this.settings.dataModal}]`);\n    if (!fromModal) this.memory.trigger = trigger;\n    await this.close(!fromModal);\n    this.open(modalKey);\n    return;\n  }\n\n  // Close click\n  if (event.target.closest(`[data-${this.settings.dataClose}]`)) {\n    event.preventDefault();\n    this.close();\n    return;\n  }\n\n  // Root click\n  if (\n    event.target.hasAttribute(`data-${this.settings.dataModal}`) &&\n    !event.target.hasAttribute(`data-${this.settings.dataRequired}`)\n  ) {\n    this.close();\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.key === 'Escape' || event.keyCode === 27) {\n    const target = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (target && !target.hasAttribute(`data-${this.settings.dataRequired}`)) {\n      this.close();\n    }\n  }\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\nimport { moveElement } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { setInitialState } from './src/js/initialState';\n\nexport default class Modal {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.focusTrap = new FocusTrap();\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.moveModals();\n    this.setTabindex(this.settings.setTabindex);\n    this.setInitialState();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.memory = {};\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getModal(modalKey) {\n    if (typeof modalKey !== 'string') return modalKey;\n    return document.querySelector(\n      `[data-${this.settings.dataModal}=\"${modalKey}\"]`\n    );\n  }\n\n  modalNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find modal with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataModal}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  setInitialState() {\n    setInitialState(this);\n  }\n\n  moveModals(type = this.settings.moveModals.type, ref = this.settings.moveModals.ref) {\n    const modals = document.querySelectorAll(`[data-${this.settings.dataModal}]`);\n    if (modals.length) moveElement(modals, type, ref);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async open(modalKey) {\n    const modal = this.getModal(modalKey);\n    if (!modal) return this.modalNotFound(modalKey);\n    if (hasClass(modal, this.settings.stateClosed)) {\n      this.working = true;\n      setOverflowHidden(true, this.settings.selectorOverflow);\n      await openTransition(modal, this.settings);\n      this.focusTrap.init(modal);\n      focusTarget(modal, this.settings);\n      setInert(true, this.settings.selectorInert);\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n\n  async close(returnFocus = true) {\n    const modal = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (modal) {\n      this.working = true;\n      setInert(false, this.settings.selectorInert);\n      setOverflowHidden(false, this.settings.selectorOverflow);\n      await closeTransition(modal, this.settings);\n      if (returnFocus) focusTrigger(this);\n      this.focusTrap.destroy();\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n}\n","import { addClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\nimport { focusTrigger } from '@vrembem/core/index';\n\nexport function setInitialState(obj) {\n  const modals = document.querySelectorAll(`[data-${obj.settings.dataModal}]`);\n  modals.forEach((el) => {\n    if (el.classList.contains(obj.settings.stateOpened)) {\n      setInert(false, obj.settings.selectorInert);\n      setOverflowHidden(false, obj.settings.selectorOverflow);\n      focusTrigger(obj);\n      obj.focusTrap.destroy();\n    }\n    removeClass(el,\n      obj.settings.stateOpened,\n      obj.settings.stateOpening,\n      obj.settings.stateClosing\n    );\n    addClass(el, obj.settings.stateClosed);\n  });\n}\n","/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\n\nexport const removeClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.remove(...cl);\n  });\n};\n","/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\n\nexport const addClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.add(...cl);\n  });\n};\n","import { getElement } from './getElement';\n\n/**\n * Moves element(s) in the DOM based on a reference and move type\n * ---\n * @param {String} target - The element(s) to move\n * @param {String} type - Move type can be 'after', 'before', 'append' or 'prepend'\n * @param {String} reference - The reference element the move is relative to\n */\n\nexport function moveElement(target, type, reference = false) {\n  if (reference) {\n    const els = getElement(target);\n    if (!els.length) throw new Error(`Move target element \"${target}\" not found!`);\n    const ref = getElement(reference, 1);\n    if (!ref) throw new Error(`Move reference element \"${reference}\" not found!`);\n    els.forEach((el) => {\n      switch (type) {\n        case 'after':\n          ref.after(el);\n          return { ref, el, type };\n        case 'before':\n          ref.before(el);\n          return { ref, el, type };\n        case 'append':\n          ref.append(el);\n          return { ref, el, type };\n        case 'prepend':\n          ref.prepend(el);\n          return { ref, el, type };\n        default:\n          throw new Error(`Move type \"${type}\" does not exist!`);\n      }\n    });\n  }\n}\n","/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\n\nexport const hasClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el = [].slice.call(el);\n\n  return cl.some((cl) => {\n    return el.some((el) => {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n"],"names":["setInert","state","selector","document","querySelectorAll","forEach","el","inert","setAttribute","removeAttribute","setOverflowHidden","style","overflow","removeProperty","focusTrigger","obj","memory","trigger","focus","FocusTrap","constructor","this","target","__handlerFocusTrap","handlerFocusTrap","bind","init","inner","querySelector","focusable","getFocusable","length","focusableFirst","focusableLast","addEventListener","handlerFocusLock","destroy","removeEventListener","event","key","keyCode","shiftKey","activeElement","preventDefault","initFocus","initScrollTop","scrollTop","push","getElement","single","openTransition","settings","Promise","resolve","transition","classList","remove","stateClosed","add","stateOpening","_f","stateOpened","closeTransition","stateClosing","autoInit","dataModal","dataDialog","dataOpen","dataClose","dataFocus","dataRequired","selectorInert","selectorOverflow","customEventPrefix","moveModals","ref","type","setTabindex","handlerClick","working","closest","modalKey","getAttribute","fromModal","close","open","hasAttribute","handlerKeyup","options","defaults","focusTrap","__handlerClick","__handlerKeyup","setInitialState","getModal","modalNotFound","reject","Error","contains","cl","removeClass","addClass","modals","reference","els","after","before","append","prepend","moveElement","[object Object]","modal","slice","call","some","hasClass","innerFocus","innerElement","focusTarget","dispatchEvent","CustomEvent","bubbles","returnFocus"],"mappings":"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"}