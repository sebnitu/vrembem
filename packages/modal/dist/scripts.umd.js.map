{"version":3,"file":"scripts.umd.js","sources":["../../core/src/js/accessibility.js","../../core/src/js/focus.js","../../core/src/js/getElement.js","../src/js/defaults.js","../src/js/handlers.js","../index.js","../src/js/initialState.js","../../core/src/js/removeClass.js","../../core/src/js/addClass.js","../../core/src/js/moveElement.js","../../core/src/js/hasClass.js","../../core/src/js/transition.js"],"sourcesContent":["export const setInert = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.inert = true;\n        el.setAttribute('aria-hidden', true);\n      } else {\n        el.inert = null;\n        el.removeAttribute('aria-hidden');\n      }\n    });\n  }\n};\n\nexport const setOverflowHidden = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.style.overflow = 'hidden';\n      } else {\n        el.style.removeProperty('overflow');\n      }\n    });\n  }\n};\n\nexport const setTabindex = (state, selector) => {\n  if (selector) {\n    const els = document.querySelectorAll(selector);\n    els.forEach((el) => {\n      if (state) {\n        el.setAttribute('tabindex', '-1');\n      } else {\n        el.removeAttribute('tabindex');\n      }\n    });\n  }\n};\n","export const focusTarget = (target, settings) => {\n  const innerFocus = target.querySelector(\n    `[data-${settings.dataFocus}]`\n  );\n  if (innerFocus) {\n    innerFocus.focus();\n  } else {\n    const innerElement = target.querySelector('[tabindex=\"-1\"]');\n    if (innerElement) innerElement.focus();\n  }\n};\n\nexport const focusTrigger = (obj = null) => {\n  if (!obj || !obj.memory || !obj.memory.trigger) return;\n  obj.memory.trigger.focus();\n  obj.memory.trigger = null;\n};\n\nexport class FocusTrap {\n  constructor() {\n    this.target = null;\n    this.__handlerFocusTrap = this.handlerFocusTrap.bind(this);\n  }\n\n  init(target) {\n    this.target = target;\n    this.inner = this.target.querySelector('[tabindex=\"-1\"]');\n    this.focusable = this.getFocusable();\n    if (this.focusable.length) {\n      this.focusableFirst = this.focusable[0];\n      this.focusableLast = this.focusable[this.focusable.length - 1];\n      this.target.addEventListener('keydown', this.__handlerFocusTrap);\n    } else {\n      this.target.addEventListener('keydown', this.handlerFocusLock);\n    }\n  }\n\n  destroy() {\n    if (!this.target) return;\n    this.inner = null;\n    this.focusable = null;\n    this.focusableFirst = null;\n    this.focusableLast = null;\n    this.target.removeEventListener('keydown', this.__handlerFocusTrap);\n    this.target.removeEventListener('keydown', this.handlerFocusLock);\n    this.target = null;\n  }\n\n  handlerFocusTrap(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (!isTab) return;\n    if (event.shiftKey) {\n      if (\n        document.activeElement === this.focusableFirst ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableLast.focus();\n        event.preventDefault();\n      }\n    } else {\n      if (\n        document.activeElement === this.focusableLast ||\n        document.activeElement === this.inner\n      ) {\n        this.focusableFirst.focus();\n        event.preventDefault();\n      }\n    }\n  }\n\n  handlerFocusLock(event) {\n    const isTab = (event.key === 'Tab' || event.keyCode === 9);\n    if (isTab) event.preventDefault();\n  }\n\n  getFocusable() {\n    const focusable = [];\n    const initFocus = document.activeElement;\n    const initScrollTop = (this.inner) ? this.inner.scrollTop : 0;\n\n    this.target\n      .querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input[type=\"text\"]:not([disabled]),input[type=\"radio\"]:not([disabled]),input[type=\"checkbox\"]:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex=\"-1\"])')\n      .forEach((el) => {\n        el.focus();\n        if (el === document.activeElement) {\n          focusable.push(el);\n        }\n      });\n\n    if (this.inner) this.inner.scrollTop = initScrollTop;\n    initFocus.focus();\n    return focusable;\n  }\n}\n","/**\n * Get an element(s) from a selector or return value if not a string\n * ---\n * @param {String} selector - Selector to query\n * @param {Boolean} single - Whether to return a single or all matches\n */\n\nexport const getElement = function (selector, single = 0) {\n  if (typeof selector != 'string') return selector;\n  return (single) ?\n    document.querySelector(selector) :\n    document.querySelectorAll(selector);\n};\n","export default {\n  autoInit: false,\n\n  // Data attributes\n  dataModal: 'modal',\n  dataDialog: 'modal-dialog',\n  dataOpen: 'modal-open',\n  dataClose: 'modal-close',\n  dataFocus: 'modal-focus',\n  dataRequired: 'modal-required',\n\n  // State classes\n  stateOpened: 'is-opened',\n  stateOpening: 'is-opening',\n  stateClosing: 'is-closing',\n  stateClosed: 'is-closed',\n\n  // Selector\n  selectorInert: null,\n  selectorOverflow: 'body',\n\n  // Feature toggles\n  customEventPrefix: 'modal:',\n  moveModals: {\n    ref: null,\n    type: null\n  },\n  setTabindex: true,\n  transition: true\n};\n","export async function handlerClick(event) {\n  // Working catch\n  if (this.working) return;\n\n  // Trigger click\n  const trigger = event.target.closest(`[data-${this.settings.dataOpen}]`);\n  if (trigger) {\n    event.preventDefault();\n    const modalKey = trigger.getAttribute(`data-${this.settings.dataOpen}`);\n    const fromModal = event.target.closest(`[data-${this.settings.dataModal}]`);\n    if (!fromModal) this.memory.trigger = trigger;\n    await this.close(!fromModal);\n    this.open(modalKey);\n    return;\n  }\n\n  // Close click\n  if (event.target.closest(`[data-${this.settings.dataClose}]`)) {\n    event.preventDefault();\n    this.close();\n    return;\n  }\n\n  // Root click\n  if (\n    event.target.hasAttribute(`data-${this.settings.dataModal}`) &&\n    !event.target.hasAttribute(`data-${this.settings.dataRequired}`)\n  ) {\n    this.close();\n    return;\n  }\n}\n\nexport function handlerKeyup(event) {\n  // Working catch\n  if (this.working) return;\n\n  if (event.key === 'Escape' || event.keyCode === 27) {\n    const target = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (target && !target.hasAttribute(`data-${this.settings.dataRequired}`)) {\n      this.close();\n    }\n  }\n}\n","import { hasClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden, setTabindex } from '@vrembem/core/index';\nimport { FocusTrap, focusTarget, focusTrigger } from '@vrembem/core/index';\nimport { openTransition, closeTransition } from '@vrembem/core/index';\nimport { moveElement } from '@vrembem/core/index';\n\nimport defaults from './src/js/defaults';\nimport { handlerClick, handlerKeyup } from './src/js/handlers';\nimport { setInitialState } from './src/js/initialState';\n\nexport default class Modal {\n  constructor(options) {\n    this.defaults = defaults;\n    this.settings = { ...this.defaults, ...options };\n    this.working = false;\n    this.memory = {};\n    this.focusTrap = new FocusTrap();\n    this.__handlerClick = handlerClick.bind(this);\n    this.__handlerKeyup = handlerKeyup.bind(this);\n    if (this.settings.autoInit) this.init();\n  }\n\n  init(options = null) {\n    if (options) this.settings = { ...this.settings, ...options };\n    this.moveModals();\n    this.setTabindex(this.settings.setTabindex);\n    this.setInitialState();\n    document.addEventListener('click', this.__handlerClick, false);\n    document.addEventListener('touchend', this.__handlerClick, false);\n    document.addEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  destroy() {\n    this.memory = {};\n    document.removeEventListener('click', this.__handlerClick, false);\n    document.removeEventListener('touchend', this.__handlerClick, false);\n    document.removeEventListener('keyup', this.__handlerKeyup, false);\n  }\n\n  /**\n   * Helpers\n   */\n\n  getModal(modalKey) {\n    if (typeof modalKey !== 'string') return modalKey;\n    return document.querySelector(\n      `[data-${this.settings.dataModal}=\"${modalKey}\"]`\n    );\n  }\n\n  modalNotFound(key) {\n    return Promise.reject(\n      new Error(`Did not find modal with key: \"${key}\"`)\n    );\n  }\n\n  setTabindex(state = true) {\n    const selectorTabindex = `\n      [data-${this.settings.dataModal}]\n      [data-${this.settings.dataDialog}]\n    `;\n    setTabindex(state, selectorTabindex);\n  }\n\n  setInitialState() {\n    setInitialState(this);\n  }\n\n  moveModals(type = this.settings.moveModals.type, ref = this.settings.moveModals.ref) {\n    const modals = document.querySelectorAll(`[data-${this.settings.dataModal}]`);\n    if (modals.length) moveElement(modals, type, ref);\n  }\n\n  /**\n   * Change state functionality\n   */\n\n  async open(modalKey) {\n    const modal = this.getModal(modalKey);\n    if (!modal) return this.modalNotFound(modalKey);\n    if (hasClass(modal, this.settings.stateClosed)) {\n      this.working = true;\n      setOverflowHidden(true, this.settings.selectorOverflow);\n      await openTransition(modal, this.settings);\n      this.focusTrap.init(modal);\n      focusTarget(modal, this.settings);\n      setInert(true, this.settings.selectorInert);\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'opened', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n\n  async close(returnFocus = true) {\n    const modal = document.querySelector(\n      `[data-${this.settings.dataModal}].${this.settings.stateOpened}`\n    );\n    if (modal) {\n      this.working = true;\n      setInert(false, this.settings.selectorInert);\n      setOverflowHidden(false, this.settings.selectorOverflow);\n      await closeTransition(modal, this.settings);\n      if (returnFocus) focusTrigger(this);\n      this.focusTrap.destroy();\n      modal.dispatchEvent(new CustomEvent(this.settings.customEventPrefix + 'closed', {\n        bubbles: true\n      }));\n      this.working = false;\n      return modal;\n    } else {\n      return modal;\n    }\n  }\n}\n","import { addClass, removeClass } from '@vrembem/core/index';\nimport { setInert, setOverflowHidden } from '@vrembem/core/index';\nimport { focusTrigger } from '@vrembem/core/index';\n\nexport function setInitialState(obj) {\n  const modals = document.querySelectorAll(`[data-${obj.settings.dataModal}]`);\n  modals.forEach((el) => {\n    if (el.classList.contains(obj.settings.stateOpened)) {\n      setInert(false, obj.settings.selectorInert);\n      setOverflowHidden(false, obj.settings.selectorOverflow);\n      focusTrigger(obj);\n      obj.focusTrap.destroy();\n    }\n    removeClass(el,\n      obj.settings.stateOpened,\n      obj.settings.stateOpening,\n      obj.settings.stateClosing\n    );\n    addClass(el, obj.settings.stateClosed);\n  });\n}\n","/**\n * Remove a class or classes from an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to remove class(es) from\n * @param {String || Array} cl - Class(es) to remove\n */\n\nexport const removeClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.remove(...cl);\n  });\n};\n","/**\n * Adds a class or classes to an element or NodeList\n * ---\n * @param {Node || NodeList} el - Element(s) to add class(es) to\n * @param {String || Array} cl - Class(es) to add\n */\n\nexport const addClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el.forEach((el) => {\n    el.classList.add(...cl);\n  });\n};\n","import { getElement } from './getElement';\n\n/**\n * Moves element(s) in the DOM based on a reference and move type\n * ---\n * @param {String} target - The element(s) to move\n * @param {String} type - Move type can be 'after', 'before', 'append' or 'prepend'\n * @param {String} reference - The reference element the move is relative to\n */\n\nexport function moveElement(target, type, reference = false) {\n  if (reference) {\n    const els = getElement(target);\n    if (!els.length) throw new Error(`Move target element \"${target}\" not found!`);\n    const ref = getElement(reference, 1);\n    if (!ref) throw new Error(`Move reference element \"${reference}\" not found!`);\n    els.forEach((el) => {\n      switch (type) {\n        case 'after':\n          ref.after(el);\n          return { ref, el, type };\n        case 'before':\n          ref.before(el);\n          return { ref, el, type };\n        case 'append':\n          ref.append(el);\n          return { ref, el, type };\n        case 'prepend':\n          ref.prepend(el);\n          return { ref, el, type };\n        default:\n          throw new Error(`Move type \"${type}\" does not exist!`);\n      }\n    });\n  }\n}\n","/**\n * Checks an element or NodeList whether they contain a class or classes\n * Ref: https://davidwalsh.name/nodelist-array\n * ---\n * @param {Node} el - Element(s) to check class(es) on\n * @param {String || Array} c - Class(es) to check\n * @returns {Boolean} - Returns true if class exists, otherwise false\n */\n\nexport const hasClass = (el, ...cl) => {\n  el = (el.forEach) ? el : [el];\n  el = [].slice.call(el);\n\n  return cl.some((cl) => {\n    return el.some((el) => {\n      if (el.classList.contains(cl)) return true;\n    });\n  });\n};\n","export const openTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.remove(settings.stateClosed);\n      el.classList.add(settings.stateOpening);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.add(settings.stateOpened);\n        el.classList.remove(settings.stateOpening);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateOpened);\n      el.classList.remove(settings.stateClosed);\n      resolve(el);\n    }\n  });\n};\n\nexport const closeTransition = (el, settings) => {\n  return new Promise((resolve) => {\n    if (settings.transition) {\n      el.classList.add(settings.stateClosing);\n      el.classList.remove(settings.stateOpened);\n      el.addEventListener('transitionend', function _f() {\n        el.classList.remove(settings.stateClosing);\n        el.classList.add(settings.stateClosed);\n        resolve(el);\n        this.removeEventListener('transitionend', _f);\n      });\n    } else {\n      el.classList.add(settings.stateClosed);\n      el.classList.remove(settings.stateOpened);\n      resolve(el);\n    }\n  });\n};\n"],"names":["setInert","state","selector","document","querySelectorAll","forEach","el","inert","setAttribute","removeAttribute","setOverflowHidden","style","overflow","removeProperty","focusTrigger","obj","memory","trigger","focus","FocusTrap","this","target","__handlerFocusTrap","handlerFocusTrap","bind","init","inner","querySelector","focusable","getFocusable","length","focusableFirst","focusableLast","addEventListener","handlerFocusLock","destroy","removeEventListener","event","key","keyCode","shiftKey","activeElement","preventDefault","initFocus","initScrollTop","scrollTop","push","getElement","single","autoInit","dataModal","dataDialog","dataOpen","dataClose","dataFocus","dataRequired","stateOpened","stateOpening","stateClosing","stateClosed","selectorInert","selectorOverflow","customEventPrefix","moveModals","ref","type","setTabindex","transition","handlerClick","closest","_this2","settings","close","hasAttribute","working","modalKey","getAttribute","fromModal","open","_exit2","handlerKeyup","options","defaults","focusTrap","__handlerClick","__handlerKeyup","setInitialState","getModal","modalNotFound","Promise","reject","Error","classList","contains","remove","removeClass","add","addClass","modals","reference","els","after","before","append","prepend","moveElement","modal","slice","call","some","cl","hasClass","resolve","_f","innerFocus","innerElement","focusTarget","dispatchEvent","CustomEvent","bubbles","returnFocus","_this4"],"mappings":"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"}