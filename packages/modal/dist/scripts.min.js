!function(t){"use strict";var e=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];(t=t.forEach?t:[t]).forEach((function(t){var e;(e=t.classList).add.apply(e,n)}))},o=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},r=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];(t=t.forEach?t:[t]).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))};function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}t.Modal=function(t){var e={};e.settings=a(a({},{autoInit:!1,dataModal:"modal",dataOpen:"modal-open",dataClose:"modal-close",dataFocus:"modal-focus",dataRequired:"modal-required",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",toggleOverflow:"body",customEventPrefix:"modal:",focus:!0}),t),e.memoryTrigger=null,e.memoryTarget=null,e.init=function(){document.addEventListener("click",s,!1),document.addEventListener("touchend",s,!1),document.addEventListener("keyup",i,!1)},e.destroy=function(){e.memoryTrigger=null,e.memoryTarget=null,document.removeEventListener("click",s,!1),document.removeEventListener("touchend",s,!1),document.removeEventListener("keyup",i,!1)},e.open=function(t,e){u(t,e)},e.close=function(t,e){d(t,e)};var s=function(t){var n=t.target.closest("[data-".concat(e.settings.dataOpen,"]"));if(n){var r=n.dataset[o(e.settings.dataOpen)],s=t.target.closest("[data-".concat(e.settings.dataModal,"]"));s||g(n),d(!s),u(r),t.preventDefault()}else t.target.closest("[data-".concat(e.settings.dataClose,"]"))&&(d(),t.preventDefault()),t.target.dataset[o(e.settings.dataModal)]&&!t.target.hasAttribute("data-".concat(e.settings.dataRequired))&&d()},i=function(t){if(27==t.keyCode){var n=document.querySelector("[data-".concat(e.settings.dataModal,"].").concat(e.settings.stateOpened));n&&!n.hasAttribute("data-".concat(e.settings.dataRequired))&&d()}},c=function(t){e.settings.toggleOverflow&&document.querySelectorAll(e.settings.toggleOverflow).forEach((function(e){"hidden"==t?e.style.overflow="hidden":e.style.removeProperty("overflow")}))},u=function(t,o){var s=document.querySelector("[data-".concat(e.settings.dataModal,'="').concat(t,'"]'));s&&!function(t){t=t.forEach?t:[t],t=[].slice.call(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.some((function(e){return t.some((function(t){if(t.classList.contains(e))return!0}))}))}(s,e.settings.stateOpened)&&(c("hidden"),l(s),n(s,e.settings.stateOpening),r(s,e.settings.stateClosed),s.addEventListener("transitionend",(function t(){n(s,e.settings.stateOpened),r(s,e.settings.stateOpening),f(),"function"==typeof o&&o(),this.removeEventListener("transitionend",t,!0),s.dispatchEvent(new CustomEvent(e.settings.customEventPrefix+"opened",{bubbles:!0}))}),!0))},d=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1?arguments[1]:void 0,s=document.querySelector("[data-".concat(e.settings.dataModal,"].").concat(e.settings.stateOpened));s&&(c(),n(s,e.settings.stateClosing),r(s,e.settings.stateOpened),s.addEventListener("transitionend",(function a(){n(s,e.settings.stateClosed),r(s,e.settings.stateClosing),t&&m(),"function"==typeof o&&o(),this.removeEventListener("transitionend",a,!0),s.dispatchEvent(new CustomEvent(e.settings.customEventPrefix+"closed",{bubbles:!0}))}),!0))},l=function(t){e.settings.focus&&(e.memoryTarget=t)},g=function(t){e.settings.focus&&(e.memoryTrigger=t)},f=function(){if(e.settings.focus&&e.memoryTarget){var t=e.memoryTarget.querySelector("[data-".concat(e.settings.dataFocus,"]"));t?t.focus():e.memoryTarget.focus(),e.memoryTarget=null}},m=function(){e.settings.focus&&e.memoryTrigger&&(e.memoryTrigger.focus(),e.memoryTrigger=null)};return e.settings.autoInit&&e.init(),e}}(this.vrembem=this.vrembem||{});
