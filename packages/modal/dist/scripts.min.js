!function(t){"use strict";var e=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];(t=t.forEach?t:[t]).forEach((function(t){var e;(e=t.classList).add.apply(e,n)}))},o=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},r=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];(t=t.forEach?t:[t]).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))};function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?a(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}t.Modal=function(t){var e={};e.settings=s(s({},{autoInit:!1,dataModal:"modal",dataOpen:"modal-open",dataClose:"modal-close",dataFocus:"modal-focus",dataRequired:"modal-required",stateOpened:"is-opened",stateOpening:"is-opening",stateClosing:"is-closing",stateClosed:"is-closed",customEventPrefix:"modal:",focus:!0}),t),e.memoryTrigger=null,e.memoryTarget=null,e.init=function(){document.addEventListener("click",a,!1),document.addEventListener("touchend",a,!1),document.addEventListener("keyup",i,!1)},e.destroy=function(){e.memoryTrigger=null,e.memoryTarget=null,document.removeEventListener("click",a,!1),document.removeEventListener("touchend",a,!1),document.removeEventListener("keyup",i,!1)},e.open=function(t,e){c(t,e)},e.close=function(t,e){u(t,e)};var a=function(t){var n=t.target.closest("[data-".concat(e.settings.dataOpen,"]"));if(n){var r=n.dataset[o(e.settings.dataOpen)],a=t.target.closest("[data-".concat(e.settings.dataModal,"]"));a||l(n),u(!a),c(r),t.preventDefault()}else t.target.closest("[data-".concat(e.settings.dataClose,"]"))&&(u(),t.preventDefault()),t.target.dataset[o(e.settings.dataModal)]&&!t.target.hasAttribute("data-".concat(e.settings.dataRequired))&&u()},i=function(t){if(27==t.keyCode){var n=document.querySelector("[data-".concat(e.settings.dataModal,"].").concat(e.settings.stateOpened));n&&!n.hasAttribute("data-".concat(e.settings.dataRequired))&&u()}},c=function(t,o){var a=document.querySelector("[data-".concat(e.settings.dataModal,'="').concat(t,'"]'));a&&!function(t){t=t.forEach?t:[t],t=[].slice.call(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.some((function(e){return t.some((function(t){if(t.classList.contains(e))return!0}))}))}(a,e.settings.stateOpened)&&(d(a),n(a,e.settings.stateOpening),r(a,e.settings.stateClosed),a.addEventListener("transitionend",(function t(){n(a,e.settings.stateOpened),r(a,e.settings.stateOpening),g(),"function"==typeof o&&o(),this.removeEventListener("transitionend",t,!0);var s=new CustomEvent(e.settings.customEventPrefix+"opened",{bubbles:!0});a.dispatchEvent(s)}),!0))},u=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1?arguments[1]:void 0,a=document.querySelector("[data-".concat(e.settings.dataModal,"].").concat(e.settings.stateOpened));a&&(n(a,e.settings.stateClosing),r(a,e.settings.stateOpened),a.addEventListener("transitionend",(function s(){n(a,e.settings.stateClosed),r(a,e.settings.stateClosing),t&&f(),"function"==typeof o&&o(),this.removeEventListener("transitionend",s,!0);var i=new CustomEvent(e.settings.customEventPrefix+"closed",{bubbles:!0});a.dispatchEvent(i)}),!0))},d=function(t){e.settings.focus&&(e.memoryTarget=t)},l=function(t){e.settings.focus&&(e.memoryTrigger=t)},g=function(){if(e.settings.focus&&e.memoryTarget){var t=e.memoryTarget.querySelector("[data-".concat(e.settings.dataFocus,"]"));t?t.focus():e.memoryTarget.focus(),e.memoryTarget=null}},f=function(){e.settings.focus&&e.memoryTrigger&&(e.memoryTrigger.focus(),e.memoryTrigger=null)};return e.settings.autoInit&&e.init(),e}}(this.vrembem=this.vrembem||{});
