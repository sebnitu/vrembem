this.vrembem=this.vrembem||{},this.vrembem.modal=function(){'use strict';var a=function(a){var b=[];return Array.isArray(a)?b=a:b.push(a),b},b=function(b,d){b=b.forEach?b:a(b),d=a(d),b.forEach(function(a){d.forEach(function(b){a.classList.add(b)})})},c=function a(){var b={},c=!1,d=0,e=arguments.length;"[object Boolean]"===Object.prototype.toString.call(0>=arguments.length?void 0:arguments[0])&&(c=0>=arguments.length?void 0:arguments[0],d++);for(var f=function(d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=c&&"[object Object]"===Object.prototype.toString.call(d[e])?a(!0,b[e],d[e]):d[e])};d<e;d++){var g=0>d||arguments.length<=d?void 0:arguments[d];f(g)}return b},d=function(b,d){b=b.forEach?b:a(b),d=a(d),b.forEach(function(a){d.forEach(function(b){a.classList.remove(b)})})};return function(a){var e,f,g,h={},i={classTarget:"modal",classTrigger:"modal__trigger",classInner:"modal__dialog",classActive:"is-active",focus:"[data-focus]"};h.init=function(a){e=c(i,a||{}),document.addEventListener("click",m,!1),document.addEventListener("touchend",m,!1),document.addEventListener("keyup",l,!1)},h.destroy=function(){e=null,g=null,f=null,document.removeEventListener("click",m,!1),document.removeEventListener("touchend",m,!1),document.removeEventListener("keyup",l,!1)},h.open=function(a){j(document.querySelectorAll(a))},h.close=function(a){k(a)};var j=function(a){if(b(a,e.classActive),1===a.length){a=a.item(0);var c=a.querySelector(e.focus);a.addEventListener("transitionend",function b(){c?c.focus():a.focus(),this.removeEventListener("transitionend",b,!0)},!0)}},k=function(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],b=document.querySelectorAll("."+e.classTarget);d(b,e.classActive),!1==a&&f&&g?1===g.length&&(g=g.item(0),g.addEventListener("transitionend",function a(){f&&f.focus(),g=null,f=null,this.removeEventListener("transitionend",a,!0)},!0)):!0==a&&(g=null,f=null)},l=function(){27==event.keyCode&&k()},m=function(){var a=event.target.closest("."+e.classTarget),b=event.target.closest("."+e.classTrigger),c=event.target.closest("."+e.classInner);if(b){k();var d=b.dataset.target;d&&(g=document.querySelectorAll(d),f=b,j(g)),event.preventDefault()}else a&&!c&&k()};return h.init(a),h}}();
