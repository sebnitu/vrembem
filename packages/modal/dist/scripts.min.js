this.vrembem=this.vrembem||{},this.vrembem.modal=function(a){'use strict';var b=function(a){var b=[];return Array.isArray(a)?b=a:b.push(a),b},c=function(a,d){a=a.forEach?a:b(a),d=b(d),a.forEach(function(a){d.forEach(function(b){a.classList.add(b)})})},d=function a(){var b={},c=!1,d=0,e=arguments.length;"[object Boolean]"===Object.prototype.toString.call(0>=arguments.length?void 0:arguments[0])&&(c=0>=arguments.length?void 0:arguments[0],d++);for(var f,g=function(d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=c&&"[object Object]"===Object.prototype.toString.call(d[e])?a(!0,b[e],d[e]):d[e])};d<e;d++)f=0>d||arguments.length<=d?void 0:arguments[d],g(f);return b},e=function(a,d){a=a.forEach?a:b(a),d=b(d),a.forEach(function(a){d.forEach(function(b){a.classList.remove(b)})})};return a.Modal=function(a){var b,f,g,h={},i={classTarget:"modal",classTrigger:"modal__trigger",classInner:"modal__dialog",classActive:"is-active",focus:"[data-focus]"};h.init=function(a){b=d(i,a||{}),document.addEventListener("click",m,!1),document.addEventListener("touchend",m,!1),document.addEventListener("keyup",l,!1)},h.destroy=function(){b=null,g=null,f=null,document.removeEventListener("click",m,!1),document.removeEventListener("touchend",m,!1),document.removeEventListener("keyup",l,!1)},h.open=function(a){j(document.querySelectorAll(a))},h.close=function(a){k(a)};var j=function(a){if(c(a,b.classActive),1===a.length){a=a.item(0);var d=a.querySelector(b.focus);a.addEventListener("transitionend",function b(){d?d.focus():a.focus(),this.removeEventListener("transitionend",b,!0)},!0)}},k=function(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],c=document.querySelectorAll("."+b.classTarget);e(c,b.classActive),!1==a&&f&&g?1===g.length&&(g=g.item(0),g.addEventListener("transitionend",function a(){f&&f.focus(),g=null,f=null,this.removeEventListener("transitionend",a,!0)},!0)):!0==a&&(g=null,f=null)},l=function(){27==event.keyCode&&k()},m=function(){var a=event.target.closest("."+b.classTarget),c=event.target.closest("."+b.classTrigger),d=event.target.closest("."+b.classInner);if(c){k();var e=c.dataset.target;e&&(g=document.querySelectorAll(e),f=c,j(g)),event.preventDefault()}else a&&!d&&k()};return h.init(a),h},a}({});
