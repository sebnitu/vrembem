{"version":3,"sources":["src/js/app.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_example2","_interopRequireDefault","_modal2","_dismissible2","obj","__esModule","default","init","./dismissible.js","./example.js","./modal.js","2","Object","defineProperty","value","api","settings","defaults","trigger","target","classToggle","run","event","closest","_utility2","toggleClass","preventDefault","options","destroy","extend","document","addEventListener","removeEventListener","_utility","./utility.js","3","classTrigger","classTarget","classActive","close","dataModal","dataset","modal","open","getElementById","4","classModal","classDialog","modals","querySelectorAll","removeClass","dialog","addClass","5","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_class","instance","TypeError","_classCallCheck","this","el","toArray","every","classList","contains","forEach","add","remove","toggle","parentElement","hasClass","string","array","push","Array","isArray","_extend","apply","arguments","toString","extended","deep","merge","prop","hasOwnProperty"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nvar _example = require('./example.js');\n\nvar _example2 = _interopRequireDefault(_example);\n\nvar _modal = require('./modal.js');\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _dismissible = require('./dismissible.js');\n\nvar _dismissible2 = _interopRequireDefault(_dismissible);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar example = new _example2.default();\nexample.init();\n\nvar modal = new _modal2.default();\nmodal.init();\n\nvar dismissible = new _dismissible2.default();\ndismissible.init();\n\n},{\"./dismissible.js\":2,\"./example.js\":3,\"./modal.js\":4}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n\n  'use strict';\n\n  var api = {};\n  var settings = void 0;\n  var defaults = {\n    trigger: '[data-dismiss]',\n    target: '[data-dismissible]',\n    classToggle: 'dismiss'\n  };\n\n  var run = function run() {\n    var trigger = event.target.closest(settings.trigger);\n    if (trigger) {\n      var target = trigger.closest(settings.target);\n      if (target) {\n        _utility2.default.toggleClass(target, settings.classToggle);\n      }\n      event.preventDefault();\n    }\n  };\n\n  api.init = function (options) {\n    api.destroy();\n    settings = _utility2.default.extend(defaults, options || {});\n    document.addEventListener('click', run, false);\n  };\n\n  api.destroy = function () {\n    settings = null;\n    document.removeEventListener('click', run, false);\n  };\n\n  api.init();\n\n  return api;\n};\n\nvar _utility = require('./utility.js');\n\nvar _utility2 = _interopRequireDefault(_utility);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./utility.js\":5}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n\n  'use strict';\n\n  // Init variables\n\n  var api = {};\n  var settings = void 0;\n\n  // Default settings\n  var defaults = {\n    classTrigger: 'trigger',\n    classTarget: 'target',\n    classActive: 'active'\n\n    // Private functions\n  };var run = function run() {\n    var trigger = event.target.closest('.' + settings.classTrigger);\n\n    if (trigger) {\n      close();\n      var dataModal = trigger.dataset.modal;\n      if (dataModal) {\n        open(document.getElementById(dataModal));\n      }\n      event.preventDefault();\n    }\n  };\n\n  // Public functions\n  api.init = function (options) {\n    api.destroy();\n    settings = _utility2.default.extend(defaults, options || {});\n    document.addEventListener('click', run, false);\n  };\n\n  api.destroy = function () {\n    settings = null;\n    document.removeEventListener('click', run, false);\n  };\n\n  // Initialize our component when an instance is created\n  api.init();\n\n  // Return the application program interface\n  return api;\n};\n\nvar _utility = require('./utility.js');\n\nvar _utility2 = _interopRequireDefault(_utility);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./utility.js\":5}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n\n  'use strict';\n\n  var api = {};\n  var settings = void 0;\n  var defaults = {\n    classTrigger: 'modal__trigger',\n    classModal: 'modal',\n    classDialog: 'modal__dialog',\n    classActive: 'is-active'\n  };\n\n  var open = function open(target) {\n    _utility2.default.addClass(target, settings.classActive);\n  };\n\n  var close = function close() {\n    var modals = document.querySelectorAll('.' + settings.classModal);\n    for (var i = 0; i < modals.length; ++i) {\n      _utility2.default.removeClass(modals[i], settings.classActive);\n    }\n  };\n\n  var run = function run() {\n    var trigger = event.target.closest('.' + settings.classTrigger);\n    var modal = event.target.closest('.' + settings.classModal);\n    var dialog = event.target.closest('.' + settings.classDialog);\n    if (trigger) {\n      close();\n      var dataModal = trigger.dataset.modal;\n      if (dataModal) {\n        open(document.getElementById(dataModal));\n      }\n      event.preventDefault();\n    } else if (modal && !dialog) {\n      close();\n    }\n  };\n\n  api.init = function (options) {\n    api.destroy();\n    settings = _utility2.default.extend(defaults, options || {});\n    document.addEventListener('click', run, false);\n    document.addEventListener('touchend', run, false);\n  };\n\n  api.destroy = function () {\n    settings = null;\n    document.removeEventListener('click', run, false);\n    document.removeEventListener('touchend', run, false);\n  };\n\n  api.init();\n\n  return api;\n};\n\nvar _utility = require('./utility.js');\n\nvar _utility2 = _interopRequireDefault(_utility);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./utility.js\":5}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class() {\n    _classCallCheck(this, _class);\n  }\n\n  _createClass(_class, null, [{\n    key: 'hasClass',\n\n\n    /**\n     * Checks if an element has a class or not\n     * @param {Element} Element to check class(es) on\n     * @param {String} || {Array} Class(es) to check\n     * @returns {Boolean} Returns true if class exists on element, otherwise false\n     */\n    value: function hasClass(el, c) {\n\n      c = this.toArray(c);\n\n      return c.every(function (c) {\n        return el.classList.contains(c);\n      });\n    }\n\n    /**\n     * Adds a class or classes to an element\n     * @param {Element} Element to add class(es) on\n     * @param {String} || {Array} Class(es) to add\n     */\n\n  }, {\n    key: 'addClass',\n    value: function addClass(el, c) {\n\n      c = this.toArray(c);\n\n      c.forEach(function (c) {\n        el.classList.add(c);\n      });\n    }\n    /**\n     * Remove a class or classes from an element\n     * @param {Element} Element to remove class(es) from\n     * @param {String} || {Array} Class(es) to remove\n     */\n\n  }, {\n    key: 'removeClass',\n    value: function removeClass(el, c) {\n\n      c = this.toArray(c);\n\n      c.forEach(function (c) {\n        el.classList.remove(c);\n      });\n    }\n\n    /**\n     * Toggle a class or classes on an element\n     * @param {Element} Element to toggle class(es) on\n     * @param {String} || {Array} Class(es) to toggle\n     */\n\n  }, {\n    key: 'toggleClass',\n    value: function toggleClass(el, c) {\n\n      c = this.toArray(c);\n\n      c.forEach(function (c) {\n        el.classList.toggle(c);\n      });\n    }\n\n    /**\n     * Find the closest parent element based on class. This is different from the\n     * native .closest() method in that it doesn't check the current element.\n     * @param {Element} Element to start search on\n     * @param {String} || {Array} Class(es) to check for\n     * @return {Element} Closest parent element\n     */\n\n  }, {\n    key: 'closest',\n    value: function closest(el, c) {\n      while ((el = el.parentElement) && !this.hasClass(el, c)) {\n        return el;\n      }\n    }\n\n    /**\n     * Converts a string to an array. If an array is passed, it's returned as is.\n     * Anything else is returned as false.\n     * @param {String} || {Array} String to convert to an array\n     * @return {Array} Return the converted array\n     */\n\n  }, {\n    key: 'toArray',\n    value: function toArray(string) {\n\n      var array = [];\n\n      if (typeof string === 'string') {\n        array.push(string);\n      } else if (Array.isArray(string)) {\n        array = string;\n      } else {\n        return false;\n      }\n\n      return array;\n    }\n\n    /**\n     * Merge two or more objects. Returns a new object. Set the first argument\n     * to `true` for a deep or recursive merge.\n     * @param {Boolean} [Optional] If true, do a deep (or recursive) merge\n     * @param {Object} The objects to merge together; each overriding the next\n     * @returns {Object} Merged values of defaults and options\n     */\n\n  }, {\n    key: 'extend',\n    value: function (_extend) {\n      function extend() {\n        return _extend.apply(this, arguments);\n      }\n\n      extend.toString = function () {\n        return _extend.toString();\n      };\n\n      return extend;\n    }(function () {\n\n      var extended = {};\n      var deep = false;\n      var i = 0;\n      var length = arguments.length;\n\n      if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n        deep = arguments[0];\n        i++;\n      }\n\n      var merge = function merge(obj) {\n        for (var prop in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n            if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n              extended[prop] = extend(true, extended[prop], obj[prop]);\n            } else {\n              extended[prop] = obj[prop];\n            }\n          }\n        }\n      };\n\n      for (; i < length; i++) {\n        var obj = arguments[i];\n        merge(obj);\n      }\n\n      return extended;\n    })\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL2Rpc21pc3NpYmxlLmpzIiwic3JjL2pzL2V4YW1wbGUuanMiLCJzcmMvanMvbW9kYWwuanMiLCJzcmMvanMvdXRpbGl0eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNLFVBQVUsSUFBSSxpQkFBSixFQUFoQjtBQUNBLFFBQVEsSUFBUjs7QUFFQSxJQUFNLFFBQVEsSUFBSSxlQUFKLEVBQWQ7QUFDQSxNQUFNLElBQU47O0FBRUEsSUFBTSxjQUFjLElBQUkscUJBQUosRUFBcEI7QUFDQSxZQUFZLElBQVo7Ozs7Ozs7OztrQkNUZSxZQUFXOztBQUV4Qjs7QUFFQSxNQUFJLE1BQU0sRUFBVjtBQUNBLE1BQUksaUJBQUo7QUFDQSxNQUFJLFdBQVc7QUFDYixhQUFTLGdCQURJO0FBRWIsWUFBUSxvQkFGSztBQUdiLGlCQUFhO0FBSEEsR0FBZjs7QUFNQSxNQUFJLE1BQU0sU0FBTixHQUFNLEdBQU07QUFDZCxRQUFJLFVBQVUsTUFBTSxNQUFOLENBQWEsT0FBYixDQUFxQixTQUFTLE9BQTlCLENBQWQ7QUFDQSxRQUFJLE9BQUosRUFBYTtBQUNYLFVBQUksU0FBUyxRQUFRLE9BQVIsQ0FBZ0IsU0FBUyxNQUF6QixDQUFiO0FBQ0EsVUFBSSxNQUFKLEVBQVk7QUFDViwwQkFBRSxXQUFGLENBQWMsTUFBZCxFQUFzQixTQUFTLFdBQS9CO0FBQ0Q7QUFDRCxZQUFNLGNBQU47QUFDRDtBQUNGLEdBVEQ7O0FBV0EsTUFBSSxJQUFKLEdBQVcsVUFBQyxPQUFELEVBQWE7QUFDdEIsUUFBSSxPQUFKO0FBQ0EsZUFBVyxrQkFBRSxNQUFGLENBQVUsUUFBVixFQUFvQixXQUFXLEVBQS9CLENBQVg7QUFDQSxhQUFTLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLEdBQW5DLEVBQXdDLEtBQXhD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LFNBQVAsQ0FBaUIsY0FBakIsQ0FBZ0MsSUFBaEMsQ0FBc0MsR0FBdEMsRUFBMkMsSUFBM0MsQ0FBTCxFQUF5RDtBQUN2RCxnQkFBSyxRQUFRLE9BQU8sU0FBUCxDQUFpQixRQUFqQixDQUEwQixJQUExQixDQUErQixJQUFJLElBQUosQ0FBL0IsTUFBOEMsaUJBQTNELEVBQStFO0FBQzdFLHVCQUFTLElBQVQsSUFBaUIsT0FBUSxJQUFSLEVBQWMsU0FBUyxJQUFULENBQWQsRUFBOEIsSUFBSSxJQUFKLENBQTlCLENBQWpCO0FBQ0QsYUFGRCxNQUVPO0FBQ0wsdUJBQVMsSUFBVCxJQUFpQixJQUFJLElBQUosQ0FBakI7QUFDRDtBQUNGO0FBQ0Y7QUFDRixPQVZEOztBQVlBLGFBQVEsSUFBSSxNQUFaLEVBQW9CLEdBQXBCLEVBQTBCO0FBQ3hCLFlBQUksTUFBTSxVQUFVLENBQVYsQ0FBVjtBQUNBLGNBQU0sR0FBTjtBQUNEOztBQUVELGFBQU8sUUFBUDtBQUNELEsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgRXhhbXBsZSBmcm9tICcuL2V4YW1wbGUuanMnXG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9tb2RhbC5qcydcbmltcG9ydCBEaXNtaXNzaWJsZSBmcm9tICcuL2Rpc21pc3NpYmxlLmpzJ1xuXG5jb25zdCBleGFtcGxlID0gbmV3IEV4YW1wbGUoKVxuZXhhbXBsZS5pbml0KClcblxuY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoKVxubW9kYWwuaW5pdCgpXG5cbmNvbnN0IGRpc21pc3NpYmxlID0gbmV3IERpc21pc3NpYmxlKClcbmRpc21pc3NpYmxlLmluaXQoKVxuIiwiaW1wb3J0IHUgZnJvbSAnLi91dGlsaXR5LmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCdcblxuICBsZXQgYXBpID0ge31cbiAgbGV0IHNldHRpbmdzXG4gIGxldCBkZWZhdWx0cyA9IHtcbiAgICB0cmlnZ2VyOiAnW2RhdGEtZGlzbWlzc10nLFxuICAgIHRhcmdldDogJ1tkYXRhLWRpc21pc3NpYmxlXScsXG4gICAgY2xhc3NUb2dnbGU6ICdkaXNtaXNzJ1xuICB9XG5cbiAgbGV0IHJ1biA9ICgpID0+IHtcbiAgICBsZXQgdHJpZ2dlciA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KHNldHRpbmdzLnRyaWdnZXIpXG4gICAgaWYgKHRyaWdnZXIpIHtcbiAgICAgIGxldCB0YXJnZXQgPSB0cmlnZ2VyLmNsb3Nlc3Qoc2V0dGluZ3MudGFyZ2V0KVxuICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICB1LnRvZ2dsZUNsYXNzKHRhcmdldCwgc2V0dGluZ3MuY2xhc3NUb2dnbGUpXG4gICAgICB9XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9XG5cbiAgYXBpLmluaXQgPSAob3B0aW9ucykgPT4ge1xuICAgIGFwaS5kZXN0cm95KClcbiAgICBzZXR0aW5ncyA9IHUuZXh0ZW5kKCBkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSApXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBydW4sIGZhbHNlKVxuICB9XG5cbiAgYXBpLmRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgc2V0dGluZ3MgPSBudWxsXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBydW4sIGZhbHNlKVxuICB9XG5cbiAgYXBpLmluaXQoKVxuXG4gIHJldHVybiBhcGlcbn1cbiIsImltcG9ydCB1IGZyb20gJy4vdXRpbGl0eS5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLy8gSW5pdCB2YXJpYWJsZXNcbiAgbGV0IGFwaSA9IHt9XG4gIGxldCBzZXR0aW5nc1xuXG4gIC8vIERlZmF1bHQgc2V0dGluZ3NcbiAgbGV0IGRlZmF1bHRzID0ge1xuICAgIGNsYXNzVHJpZ2dlcjogJ3RyaWdnZXInLFxuICAgIGNsYXNzVGFyZ2V0OiAndGFyZ2V0JyxcbiAgICBjbGFzc0FjdGl2ZTogJ2FjdGl2ZSdcbiAgfVxuXG4gIC8vIFByaXZhdGUgZnVuY3Rpb25zXG4gIGxldCBydW4gPSAoKSA9PiB7XG4gICAgdmFyIHRyaWdnZXIgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLicgKyBzZXR0aW5ncy5jbGFzc1RyaWdnZXIpXG5cbiAgICBpZiAodHJpZ2dlcikge1xuICAgICAgY2xvc2UoKVxuICAgICAgdmFyIGRhdGFNb2RhbCA9IHRyaWdnZXIuZGF0YXNldC5tb2RhbFxuICAgICAgaWYgKGRhdGFNb2RhbCkge1xuICAgICAgICBvcGVuKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGFNb2RhbCkpXG4gICAgICB9XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfVxuICB9XG5cbiAgLy8gUHVibGljIGZ1bmN0aW9uc1xuICBhcGkuaW5pdCA9IChvcHRpb25zKSA9PiB7XG4gICAgYXBpLmRlc3Ryb3koKVxuICAgIHNldHRpbmdzID0gdS5leHRlbmQoIGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9IClcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1biwgZmFsc2UpXG4gIH1cblxuICBhcGkuZGVzdHJveSA9ICgpID0+IHtcbiAgICBzZXR0aW5ncyA9IG51bGxcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1biwgZmFsc2UpXG4gIH1cblxuICAvLyBJbml0aWFsaXplIG91ciBjb21wb25lbnQgd2hlbiBhbiBpbnN0YW5jZSBpcyBjcmVhdGVkXG4gIGFwaS5pbml0KClcblxuICAvLyBSZXR1cm4gdGhlIGFwcGxpY2F0aW9uIHByb2dyYW0gaW50ZXJmYWNlXG4gIHJldHVybiBhcGlcbn1cbiIsImltcG9ydCB1IGZyb20gJy4vdXRpbGl0eS5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnXG5cbiAgbGV0IGFwaSA9IHt9XG4gIGxldCBzZXR0aW5nc1xuICBsZXQgZGVmYXVsdHMgPSB7XG4gICAgY2xhc3NUcmlnZ2VyOiAnbW9kYWxfX3RyaWdnZXInLFxuICAgIGNsYXNzTW9kYWw6ICdtb2RhbCcsXG4gICAgY2xhc3NEaWFsb2c6ICdtb2RhbF9fZGlhbG9nJyxcbiAgICBjbGFzc0FjdGl2ZTogJ2lzLWFjdGl2ZSdcbiAgfVxuXG4gIGxldCBvcGVuID0gKHRhcmdldCkgPT4ge1xuICAgIHUuYWRkQ2xhc3ModGFyZ2V0LCBzZXR0aW5ncy5jbGFzc0FjdGl2ZSlcbiAgfVxuXG4gIGxldCBjbG9zZSA9ICgpID0+IHtcbiAgICBsZXQgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBzZXR0aW5ncy5jbGFzc01vZGFsKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kYWxzLmxlbmd0aDsgKytpKSB7XG4gICAgICB1LnJlbW92ZUNsYXNzKG1vZGFsc1tpXSwgc2V0dGluZ3MuY2xhc3NBY3RpdmUpXG4gICAgfVxuICB9XG5cbiAgbGV0IHJ1biA9ICgpID0+IHtcbiAgICBsZXQgdHJpZ2dlciA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuJyArIHNldHRpbmdzLmNsYXNzVHJpZ2dlcilcbiAgICBsZXQgbW9kYWwgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLicgKyBzZXR0aW5ncy5jbGFzc01vZGFsKVxuICAgIGxldCBkaWFsb2cgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLicgKyBzZXR0aW5ncy5jbGFzc0RpYWxvZylcbiAgICBpZiAodHJpZ2dlcikge1xuICAgICAgY2xvc2UoKVxuICAgICAgbGV0IGRhdGFNb2RhbCA9IHRyaWdnZXIuZGF0YXNldC5tb2RhbFxuICAgICAgaWYgKGRhdGFNb2RhbCkge1xuICAgICAgICBvcGVuKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGFNb2RhbCkpXG4gICAgICB9XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfSBlbHNlIGlmIChtb2RhbCAmJiAhZGlhbG9nKSB7XG4gICAgICBjbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgYXBpLmluaXQgPSAob3B0aW9ucykgPT4ge1xuICAgIGFwaS5kZXN0cm95KClcbiAgICBzZXR0aW5ncyA9IHUuZXh0ZW5kKCBkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSApXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBydW4sIGZhbHNlKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgcnVuLCBmYWxzZSlcbiAgfVxuXG4gIGFwaS5kZXN0cm95ID0gKCkgPT4ge1xuICAgIHNldHRpbmdzID0gbnVsbFxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcnVuLCBmYWxzZSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHJ1biwgZmFsc2UpXG4gIH1cblxuICBhcGkuaW5pdCgpXG5cbiAgcmV0dXJuIGFwaVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYW4gZWxlbWVudCBoYXMgYSBjbGFzcyBvciBub3RcbiAgICogQHBhcmFtIHtFbGVtZW50fSBFbGVtZW50IHRvIGNoZWNrIGNsYXNzKGVzKSBvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gfHwge0FycmF5fSBDbGFzcyhlcykgdG8gY2hlY2tcbiAgICogQHJldHVybnMge0Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBjbGFzcyBleGlzdHMgb24gZWxlbWVudCwgb3RoZXJ3aXNlIGZhbHNlXG4gICAqL1xuICBzdGF0aWMgaGFzQ2xhc3MoIGVsLCBjICkge1xuXG4gICAgYyA9IHRoaXMudG9BcnJheShjKVxuXG4gICAgcmV0dXJuIGMuZXZlcnkoIGZ1bmN0aW9uICggYyApIHtcbiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoYylcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjbGFzcyBvciBjbGFzc2VzIHRvIGFuIGVsZW1lbnRcbiAgICogQHBhcmFtIHtFbGVtZW50fSBFbGVtZW50IHRvIGFkZCBjbGFzcyhlcykgb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IHx8IHtBcnJheX0gQ2xhc3MoZXMpIHRvIGFkZFxuICAgKi9cbiAgc3RhdGljIGFkZENsYXNzKCBlbCwgYyApIHtcblxuICAgIGMgPSB0aGlzLnRvQXJyYXkoYylcblxuICAgIGMuZm9yRWFjaCggZnVuY3Rpb24gKCBjICkge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCggYyApXG4gICAgfSlcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgY2xhc3Mgb3IgY2xhc3NlcyBmcm9tIGFuIGVsZW1lbnRcbiAgICogQHBhcmFtIHtFbGVtZW50fSBFbGVtZW50IHRvIHJlbW92ZSBjbGFzcyhlcykgZnJvbVxuICAgKiBAcGFyYW0ge1N0cmluZ30gfHwge0FycmF5fSBDbGFzcyhlcykgdG8gcmVtb3ZlXG4gICAqL1xuICBzdGF0aWMgcmVtb3ZlQ2xhc3MoIGVsLCBjICkge1xuXG4gICAgYyA9IHRoaXMudG9BcnJheShjKVxuXG4gICAgYy5mb3JFYWNoKCBmdW5jdGlvbiAoIGMgKSB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCBjIClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBhIGNsYXNzIG9yIGNsYXNzZXMgb24gYW4gZWxlbWVudFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IEVsZW1lbnQgdG8gdG9nZ2xlIGNsYXNzKGVzKSBvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gfHwge0FycmF5fSBDbGFzcyhlcykgdG8gdG9nZ2xlXG4gICAqL1xuICBzdGF0aWMgdG9nZ2xlQ2xhc3MoIGVsLCBjICkge1xuXG4gICAgYyA9IHRoaXMudG9BcnJheShjKVxuXG4gICAgYy5mb3JFYWNoKCBmdW5jdGlvbiAoIGMgKSB7XG4gICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKGMpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBjbG9zZXN0IHBhcmVudCBlbGVtZW50IGJhc2VkIG9uIGNsYXNzLiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgKiBuYXRpdmUgLmNsb3Nlc3QoKSBtZXRob2QgaW4gdGhhdCBpdCBkb2Vzbid0IGNoZWNrIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gRWxlbWVudCB0byBzdGFydCBzZWFyY2ggb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IHx8IHtBcnJheX0gQ2xhc3MoZXMpIHRvIGNoZWNrIGZvclxuICAgKiBAcmV0dXJuIHtFbGVtZW50fSBDbG9zZXN0IHBhcmVudCBlbGVtZW50XG4gICAqL1xuICBzdGF0aWMgY2xvc2VzdCggZWwsIGMgKSB7XG4gICAgd2hpbGUgKChlbCA9IGVsLnBhcmVudEVsZW1lbnQpICYmICF0aGlzLmhhc0NsYXNzKGVsLCBjKSlcbiAgICByZXR1cm4gZWxcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIHN0cmluZyB0byBhbiBhcnJheS4gSWYgYW4gYXJyYXkgaXMgcGFzc2VkLCBpdCdzIHJldHVybmVkIGFzIGlzLlxuICAgKiBBbnl0aGluZyBlbHNlIGlzIHJldHVybmVkIGFzIGZhbHNlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gfHwge0FycmF5fSBTdHJpbmcgdG8gY29udmVydCB0byBhbiBhcnJheVxuICAgKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJuIHRoZSBjb252ZXJ0ZWQgYXJyYXlcbiAgICovXG4gIHN0YXRpYyB0b0FycmF5KHN0cmluZykge1xuXG4gICAgdmFyIGFycmF5ID0gW11cblxuICAgIGlmICh0eXBlb2Ygc3RyaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgYXJyYXkucHVzaChzdHJpbmcpXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHN0cmluZykpIHtcbiAgICAgIGFycmF5ID0gc3RyaW5nXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiBhcnJheVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIHR3byBvciBtb3JlIG9iamVjdHMuIFJldHVybnMgYSBuZXcgb2JqZWN0LiBTZXQgdGhlIGZpcnN0IGFyZ3VtZW50XG4gICAqIHRvIGB0cnVlYCBmb3IgYSBkZWVwIG9yIHJlY3Vyc2l2ZSBtZXJnZS5cbiAgICogQHBhcmFtIHtCb29sZWFufSBbT3B0aW9uYWxdIElmIHRydWUsIGRvIGEgZGVlcCAob3IgcmVjdXJzaXZlKSBtZXJnZVxuICAgKiBAcGFyYW0ge09iamVjdH0gVGhlIG9iamVjdHMgdG8gbWVyZ2UgdG9nZXRoZXI7IGVhY2ggb3ZlcnJpZGluZyB0aGUgbmV4dFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBNZXJnZWQgdmFsdWVzIG9mIGRlZmF1bHRzIGFuZCBvcHRpb25zXG4gICAqL1xuICBzdGF0aWMgZXh0ZW5kKCkge1xuXG4gICAgdmFyIGV4dGVuZGVkID0ge31cbiAgICB2YXIgZGVlcCA9IGZhbHNlXG4gICAgdmFyIGkgPSAwXG4gICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGhcblxuICAgIGlmICggT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCBhcmd1bWVudHNbMF0gKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nICkge1xuICAgICAgZGVlcCA9IGFyZ3VtZW50c1swXVxuICAgICAgaSsrXG4gICAgfVxuXG4gICAgbGV0IG1lcmdlID0gKCBvYmogKSA9PiB7XG4gICAgICBmb3IgKCB2YXIgcHJvcCBpbiBvYmogKSB7XG4gICAgICAgIGlmICggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCBvYmosIHByb3AgKSApIHtcbiAgICAgICAgICBpZiAoIGRlZXAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9ialtwcm9wXSkgPT09ICdbb2JqZWN0IE9iamVjdF0nICkge1xuICAgICAgICAgICAgZXh0ZW5kZWRbcHJvcF0gPSBleHRlbmQoIHRydWUsIGV4dGVuZGVkW3Byb3BdLCBvYmpbcHJvcF0gKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRlbmRlZFtwcm9wXSA9IG9ialtwcm9wXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXVxuICAgICAgbWVyZ2Uob2JqKVxuICAgIH1cblxuICAgIHJldHVybiBleHRlbmRlZFxuICB9XG5cbn1cbiJdfQ==\n"]}